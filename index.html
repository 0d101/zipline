

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Zipline &mdash; Zipline v0.8.3+126.g1a595c0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Zipline v0.8.3+126.g1a595c0 documentation" href="#"/>
        <link rel="next" title="Install" href="install.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="#" class="icon icon-home"> Zipline
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#installing-with-pip">Installing with <code class="docutils literal"><span class="pre">pip</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="install.html#gnu-linux">GNU/Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#osx">OSX</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="install.html#installing-with-conda">Installing with <code class="docutils literal"><span class="pre">conda</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="beginner-tutorial.html">Zipline beginner tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="beginner-tutorial.html#basics">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="beginner-tutorial.html#my-first-algorithm">My first algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="beginner-tutorial.html#running-the-algorithm">Running the algorithm</a><ul>
<li class="toctree-l3"><a class="reference internal" href="beginner-tutorial.html#command-line-interface">Command line interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="beginner-tutorial.html#ipython-notebook">IPython Notebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="beginner-tutorial.html#manual-advanced">Manual (advanced)</a></li>
<li class="toctree-l2"><a class="reference internal" href="beginner-tutorial.html#access-to-previous-prices-using-history">Access to previous prices using <code class="docutils literal"><span class="pre">history</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="beginner-tutorial.html#working-example-dual-moving-average-cross-over">Working example: Dual Moving Average Cross-Over</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="beginner-tutorial.html#conclusions">Conclusions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="releases.html#development">Development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#highlights">Highlights</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#enhancements">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#experimental-features">Experimental Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#bug-fixes">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#performance">Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#maintenance-and-refactorings">Maintenance and Refactorings</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#build">Build</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-0-8-3">Release 0.8.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-0-8-0">Release 0.8.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id1">Highlights</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id2">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id3">Experimental Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id4">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id5">Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id6">Maintenance and Refactorings</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id7">Build</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id8">Documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-0-7-0">Release 0.7.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id9">Highlights</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id10">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id11">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id12">Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id13">Maintenance and Refactorings</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id14">Build</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#contributors">Contributors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-0-6-1">Release 0.6.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id15">Highlights</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id16">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id17">Bug Fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id20">Performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id21">Maintenance and Refactorings</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id22">Build</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#id23">Contributors</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="appendix.html#algorithm-api">Algorithm API</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix.html#pipeline-api">Pipeline API</a></li>
<li class="toctree-l2"><a class="reference internal" href="appendix.html#asset-metadata">Asset Metadata</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release-process.html">Zipline Release Process</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release-process.html#updating-the-release-notes">Updating the Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-process.html#updating-the-version">Updating the <code class="docutils literal"><span class="pre">__version__</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="release-process.html#uploading-pypi-packages">Uploading PyPI packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release-process.html#sdist"><code class="docutils literal"><span class="pre">sdist</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="release-process.html#bdist"><code class="docutils literal"><span class="pre">bdist</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release-process.html#documentation">Documentation</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="#">Zipline</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="#">Docs</a> &raquo;</li>
      
    <li>Zipline</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/index.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="zipline">
<h1>Zipline<a class="headerlink" href="#zipline" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://gitter.im/quantopian/zipline?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img alt="Gitter" src="https://badges.gitter.im/Join%20Chat.svg" /></a>
<a class="reference external" href="https://pypi.python.org/pypi/zipline"><img alt="version status" src="https://img.shields.io/pypi/pyversions/zipline.svg" /></a>
<a class="reference external" href="https://pypi.python.org/pypi/zipline"><img alt="downloads" src="https://img.shields.io/pypi/dd/zipline.svg" /></a>
<a class="reference external" href="https://travis-ci.org/quantopian/zipline"><img alt="build status" src="https://travis-ci.org/quantopian/zipline.png?branch=master" /></a>
<a class="reference external" href="https://coveralls.io/r/quantopian/zipline"><img alt="Coverage Status" src="https://coveralls.io/repos/quantopian/zipline/badge.png" /></a>
<a class="reference external" href="https://scrutinizer-ci.com/g/quantopian/zipline/"><img alt="Code quality" src="https://scrutinizer-ci.com/g/quantopian/zipline/badges/quality-score.png?b=master" /></a></p>
<p>Zipline is a Pythonic algorithmic trading library. It is an event-driven
system that supports both backtesting and live-trading.</p>
<p>Zipline is currently used in production as the backtesting and live-trading
engine powering <a class="reference external" href="https://www.quantopian.com">Quantopian</a> &#8211; a free,
community-centered, hosted platform for building and executing trading
strategies.</p>
<p><a class="reference external" href="https://groups.google.com/forum/#!forum/zipline">Join our
community!</a></p>
<p><a class="reference external" href="http://www.zipline.io">Documentation</a></p>
<p>Want to contribute? See our <a class="reference external" href="https://github.com/quantopian/zipline/wiki/Contribution-Requests">open
requests</a>
and our <a class="reference external" href="https://github.com/quantopian/zipline#contributions">general
guidelines</a>
below.</p>
</div>
<div class="section" id="features">
<h1>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>Ease of use: Zipline tries to get out of your way so that you can
focus on algorithm development. See below for a code example.</li>
<li>Zipline comes &#8220;batteries included&#8221; as many common statistics like
moving average and linear regression can be readily accessed from
within a user-written algorithm.</li>
<li>Input of historical data and output of performance statistics are
based on Pandas DataFrames to integrate nicely into the existing
PyData eco-system.</li>
<li>Statistic and machine learning libraries like matplotlib, scipy,
statsmodels, and sklearn support development, analysis, and
visualization of state-of-the-art trading systems.</li>
</ul>
</div>
<div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installing-with-pip">
<h2>Installing With <code class="docutils literal"><span class="pre">pip</span></code><a class="headerlink" href="#installing-with-pip" title="Permalink to this headline">¶</a></h2>
<p>Assuming you have all required (see note below) non-Python dependencies, you
can install Zipline with <code class="docutils literal"><span class="pre">pip</span></code> via:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>pip install zipline
</pre></div>
</div>
<p><strong>Note:</strong> Installing Zipline via <code class="docutils literal"><span class="pre">pip</span></code> is slightly more involved than the
average Python package.  Simply running <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">zipline</span></code> will likely
fail if you&#8217;ve never installed any scientific Python packages before.</p>
<p>There are two reasons for the additional complexity:</p>
<ol class="arabic simple">
<li>Zipline ships several C extensions that require access to the CPython C API.
In order to build the C extensions, <code class="docutils literal"><span class="pre">pip</span></code> needs access to the CPython
header files for your Python installation.</li>
<li>Zipline depends on <a class="reference external" href="http://www.numpy.org/">numpy</a>, the core library for
numerical array computing in Python.  Numpy depends on having the <a class="reference external" href="http://www.netlib.org/lapack">LAPACK</a> linear algebra routines available.</li>
</ol>
<p>Because LAPACK and the CPython headers are binary dependencies, the correct way
to install them varies from platform to platform.  On Linux, users generally
acquire these dependencies via a package manager like <code class="docutils literal"><span class="pre">apt</span></code>, <code class="docutils literal"><span class="pre">yum</span></code>, or
<code class="docutils literal"><span class="pre">pacman</span></code>.  On OSX, <a class="reference external" href="http://www.brew.sh">Homebrew</a> is a popular choice
providing similar functionality.</p>
<p>See the full <a class="reference external" href="http://www.zipline.io/install.html">Zipline Install Documentation</a> for more information on acquiring
binary dependencies for your specific platform.</p>
</div>
<div class="section" id="conda">
<h2>conda<a class="headerlink" href="#conda" title="Permalink to this headline">¶</a></h2>
<p>Another way to install Zipline is via the <code class="docutils literal"><span class="pre">conda</span></code> package manager, which
comes as part of <a class="reference external" href="http://continuum.io/downloads">Anaconda</a> or can be
installed via <code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">conda</span></code>.</p>
<p>Once set up, you can install Zipline from our <code class="docutils literal"><span class="pre">Quantopian</span></code> channel:</p>
<div class="highlight-bash"><div class="highlight"><pre>conda install -c Quantopian zipline
</pre></div>
</div>
<p>Currently supported platforms include:</p>
<ul class="simple">
<li>GNU/Linux 64-bit</li>
<li>OSX 64-bit</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Windows may work; however, it is currently untested.</p>
</div>
</div>
</div>
<div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<p>See our <a class="reference external" href="http://www.zipline.io/#quickstart">getting started
tutorial</a>.</p>
<p>The following code implements a simple dual moving average algorithm.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">zipline.api</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">add_history</span><span class="p">,</span>
    <span class="n">history</span><span class="p">,</span>
    <span class="n">order_target</span><span class="p">,</span>
    <span class="n">record</span><span class="p">,</span>
    <span class="n">symbol</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="c"># Register 2 histories that track daily prices,</span>
    <span class="c"># one with a 100 window and one with a 300 day window</span>
    <span class="n">add_history</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s">&#39;1d&#39;</span><span class="p">,</span> <span class="s">&#39;price&#39;</span><span class="p">)</span>
    <span class="n">add_history</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="s">&#39;1d&#39;</span><span class="p">,</span> <span class="s">&#39;price&#39;</span><span class="p">)</span>
    <span class="n">context</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">handle_data</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="c"># Skip first 300 days to get full windows</span>
    <span class="n">context</span><span class="o">.</span><span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="c"># Compute averages</span>
    <span class="c"># history() has to be called with the same params</span>
    <span class="c"># from above and returns a pandas dataframe.</span>
    <span class="n">short_mavg</span> <span class="o">=</span> <span class="n">history</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s">&#39;1d&#39;</span><span class="p">,</span> <span class="s">&#39;price&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">long_mavg</span> <span class="o">=</span> <span class="n">history</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="s">&#39;1d&#39;</span><span class="p">,</span> <span class="s">&#39;price&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

    <span class="n">sym</span> <span class="o">=</span> <span class="n">symbol</span><span class="p">(</span><span class="s">&#39;AAPL&#39;</span><span class="p">)</span>

    <span class="c"># Trading logic</span>
    <span class="k">if</span> <span class="n">short_mavg</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">long_mavg</span><span class="p">[</span><span class="n">sym</span><span class="p">]:</span>
        <span class="c"># order_target orders as many shares as needed to</span>
        <span class="c"># achieve the desired number of shares.</span>
        <span class="n">order_target</span><span class="p">(</span><span class="n">sym</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">short_mavg</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">long_mavg</span><span class="p">[</span><span class="n">sym</span><span class="p">]:</span>
        <span class="n">order_target</span><span class="p">(</span><span class="n">sym</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c"># Save values for later inspection</span>
    <span class="n">record</span><span class="p">(</span><span class="n">AAPL</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span><span class="o">.</span><span class="n">price</span><span class="p">,</span>
           <span class="n">short_mavg</span><span class="o">=</span><span class="n">short_mavg</span><span class="p">[</span><span class="n">sym</span><span class="p">],</span>
           <span class="n">long_mavg</span><span class="o">=</span><span class="n">long_mavg</span><span class="p">[</span><span class="n">sym</span><span class="p">])</span>
</pre></div>
</div>
<p>You can then run this algorithm using the Zipline CLI. From the command
line, run:</p>
<div class="code bash highlight-python"><div class="highlight"><pre>python run_algo.py -f dual_moving_average.py --symbols AAPL --start 2011-1-1 --end 2012-1-1 -o dma.pickle
</pre></div>
</div>
<p>This will download the AAPL price data from Yahoo! Finance in the
specified time range and stream it through the algorithm and save the
resulting performance dataframe to dma.pickle which you can then load
and analyze from within python.</p>
<p>You can find other examples in the zipline/examples directory.</p>
</div>
<div class="section" id="contributions">
<h1>Contributions<a class="headerlink" href="#contributions" title="Permalink to this headline">¶</a></h1>
<p>If you would like to contribute, please see our Contribution Requests:
<a class="reference external" href="https://github.com/quantopian/zipline/wiki/Contribution-Requests">https://github.com/quantopian/zipline/wiki/Contribution-Requests</a></p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="beginner-tutorial.html">Zipline beginner tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-process.html">Zipline Release Process</a></li>
</ul>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="install.html" class="btn btn-neutral float-right" title="Install" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Quantopian Inc..
    </p>
  </div>

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'v0.8.3+126.g1a595c0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>