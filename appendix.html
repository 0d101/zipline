

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API Reference &mdash; Zipline 1.2.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Zipline 1.2.0 documentation" href="index.html"/>
        <link rel="next" title="Release Process" href="release-process.html"/>
        <link rel="prev" title="Development Guidelines" href="development-guidelines.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home"> Zipline
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#installing-with-pip">Installing with <code class="docutils literal"><span class="pre">pip</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="install.html#gnu-linux">GNU/Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#osx">OSX</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="install.html#installing-with-conda">Installing with <code class="docutils literal"><span class="pre">conda</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="install.html#managing-conda-environments">Managing <code class="docutils literal"><span class="pre">conda</span></code> environments</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="beginner-tutorial.html">Zipline Beginner Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="beginner-tutorial.html#basics">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="beginner-tutorial.html#my-first-algorithm">My First Algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="beginner-tutorial.html#running-the-algorithm">Running the Algorithm</a><ul>
<li class="toctree-l3"><a class="reference internal" href="beginner-tutorial.html#ingesting-data">Ingesting Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="beginner-tutorial.html#command-line-interface">Command Line Interface</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="beginner-tutorial.html#ipython-notebook">IPython Notebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="beginner-tutorial.html#access-to-previous-prices-using-history">Access to Previous Prices Using <code class="docutils literal"><span class="pre">history</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="beginner-tutorial.html#working-example-dual-moving-average-cross-over">Working example: Dual Moving Average Cross-Over</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="beginner-tutorial.html#conclusions">Conclusions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bundles.html">Data Bundles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="bundles.html#discovering-available-bundles">Discovering Available Bundles</a></li>
<li class="toctree-l2"><a class="reference internal" href="bundles.html#ingesting-data">Ingesting Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="bundles.html#old-data">Old Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="bundles.html#running-backtests-with-data-bundles">Running Backtests with Data Bundles</a></li>
<li class="toctree-l2"><a class="reference internal" href="bundles.html#default-data-bundles">Default Data Bundles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="bundles.html#quandl-wiki-bundle">Quandl WIKI Bundle</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="bundles.html#writing-a-new-bundle">Writing a New Bundle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="bundles.html#environ"><code class="docutils literal"><span class="pre">environ</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="bundles.html#asset-db-writer"><code class="docutils literal"><span class="pre">asset_db_writer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="bundles.html#minute-bar-writer"><code class="docutils literal"><span class="pre">minute_bar_writer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="bundles.html#daily-bar-writer"><code class="docutils literal"><span class="pre">daily_bar_writer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="bundles.html#adjustment-writer"><code class="docutils literal"><span class="pre">adjustment_writer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="bundles.html#calendar"><code class="docutils literal"><span class="pre">calendar</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="bundles.html#start-session"><code class="docutils literal"><span class="pre">start_session</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="bundles.html#end-session"><code class="docutils literal"><span class="pre">end_session</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="bundles.html#cache"><code class="docutils literal"><span class="pre">cache</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="bundles.html#show-progress"><code class="docutils literal"><span class="pre">show_progress</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="bundles.html#output-dir"><code class="docutils literal"><span class="pre">output_dir</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="bundles.html#ingesting-data-from-csv-files">Ingesting Data from .csv Files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="trading-calendars.html">Trading Calendars</a><ul>
<li class="toctree-l2"><a class="reference internal" href="trading-calendars.html#what-is-a-trading-calendar">What is a Trading Calendar?</a></li>
<li class="toctree-l2"><a class="reference internal" href="trading-calendars.html#why-should-you-care-about-trading-calendars">Why Should You Care About Trading Calendars?</a></li>
<li class="toctree-l2"><a class="reference internal" href="trading-calendars.html#the-tradingcalendar-class">The TradingCalendar Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="trading-calendars.html#building-a-custom-trading-calendar">Building a Custom Trading Calendar</a></li>
<li class="toctree-l2"><a class="reference internal" href="trading-calendars.html#conclusions">Conclusions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="risk-and-perf-metrics.html">Risk and Performance Metrics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="risk-and-perf-metrics.html#metrics-sets">Metrics Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="risk-and-perf-metrics.html#selecting-the-metrics-set">Selecting the Metrics Set</a><ul>
<li class="toctree-l3"><a class="reference internal" href="risk-and-perf-metrics.html#command-line-and-ipython-magic">Command Line and IPython Magic</a></li>
<li class="toctree-l3"><a class="reference internal" href="risk-and-perf-metrics.html#run-algorithm"><code class="docutils literal"><span class="pre">run_algorithm</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="risk-and-perf-metrics.html#running-without-metrics">Running Without Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="risk-and-perf-metrics.html#defining-new-metrics">Defining New Metrics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="risk-and-perf-metrics.html#start-of-simulation"><code class="docutils literal"><span class="pre">start_of_simulation</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="risk-and-perf-metrics.html#end-of-simulation"><code class="docutils literal"><span class="pre">end_of_simulation</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="risk-and-perf-metrics.html#start-of-session"><code class="docutils literal"><span class="pre">start_of_session</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="risk-and-perf-metrics.html#end-of-session"><code class="docutils literal"><span class="pre">end_of_session</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="risk-and-perf-metrics.html#end-of-bar"><code class="docutils literal"><span class="pre">end_of_bar</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="risk-and-perf-metrics.html#defining-new-metrics-sets">Defining New Metrics Sets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development-guidelines.html">Development Guidelines</a><ul>
<li class="toctree-l2"><a class="reference internal" href="development-guidelines.html#creating-a-development-environment">Creating a Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="development-guidelines.html#development-with-docker">Development with Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="development-guidelines.html#style-guide-running-tests">Style Guide &amp; Running Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="development-guidelines.html#continuous-integration">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="development-guidelines.html#packaging">Packaging</a></li>
<li class="toctree-l2"><a class="reference internal" href="development-guidelines.html#contributing-to-the-docs">Contributing to the Docs</a></li>
<li class="toctree-l2"><a class="reference internal" href="development-guidelines.html#commit-messages">Commit messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="development-guidelines.html#formatting-docstrings">Formatting Docstrings</a></li>
<li class="toctree-l2"><a class="reference internal" href="development-guidelines.html#updating-the-whatsnew">Updating the Whatsnew</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#running-a-backtest">Running a Backtest</a></li>
<li class="toctree-l2"><a class="reference internal" href="#algorithm-api">Algorithm API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-object">Data Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scheduling-functions">Scheduling Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#orders">Orders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#order-cancellation-policies">Order Cancellation Policies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#assets">Assets</a></li>
<li class="toctree-l3"><a class="reference internal" href="#trading-controls">Trading Controls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simulation-parameters">Simulation Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#commission-models">Commission Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="#slippage-models">Slippage Models</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pipeline">Pipeline</a></li>
<li class="toctree-l3"><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pipeline-api">Pipeline API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#built-in-factors">Built-in Factors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#built-in-filters">Built-in Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pipeline-engine">Pipeline Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-loaders">Data Loaders</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#asset-metadata">Asset Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="#trading-calendar-api">Trading Calendar API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-api">Data API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#writers">Writers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#readers">Readers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bundles">Bundles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#risk-metrics">Risk Metrics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#algorithm-state">Algorithm State</a></li>
<li class="toctree-l3"><a class="reference internal" href="#built-in-metrics">Built-in Metrics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#metrics-sets">Metrics Sets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#utilities">Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#caching">Caching</a></li>
<li class="toctree-l3"><a class="reference internal" href="#command-line">Command Line</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release-process.html">Release Process</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release-process.html#updating-the-release-notes">Updating the Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-process.html#updating-the-python-stub-files">Updating the Python stub files</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-process.html#updating-the-version">Updating the <code class="docutils literal"><span class="pre">__version__</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="release-process.html#uploading-pypi-packages">Uploading PyPI packages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="release-process.html#sdist"><code class="docutils literal"><span class="pre">sdist</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="release-process.html#bdist"><code class="docutils literal"><span class="pre">bdist</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release-process.html#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-process.html#uploading-conda-packages">Uploading conda packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="release-process.html#next-commit">Next Commit</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-1-2-0">Release 1.2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#extensible-risk-and-performance-metrics-2081">Extensible Risk and Performance Metrics (#2081)</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#docs-trading-calendars-and-benchmarks">Docs, Trading Calendars, and Benchmarks</a><ul>
<li class="toctree-l4"><a class="reference internal" href="releases.html#enhancements">Enhancements</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#experimental-features">Experimental Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#bug-fixes">Bug Fixes</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#performance">Performance</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#maintenance-and-refactorings">Maintenance and Refactorings</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#build">Build</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#documentation">Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-1-1-1">Release 1.1.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-1-1-0">Release 1.1.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-1-0-2">Release 1.0.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-1-0-1">Release 1.0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-1-0-0">Release 1.0.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="releases.html#zipline-1-0-rewrite-1105">Zipline 1.0 Rewrite (#1105)</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#new-entry-points-1173-and-1178">New Entry Points (#1173 and #1178)</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#data-bundles-1173-and-1178">Data Bundles (#1173 and #1178)</a></li>
<li class="toctree-l3"><a class="reference internal" href="releases.html#string-support-in-pipeline-1174">String Support in Pipeline (#1174)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="releases.html#id3">Enhancements</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#id4">Experimental Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#id5">Bug Fixes</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#id6">Performance</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#id7">Maintenance and Refactorings</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#id8">Build</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#id9">Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="releases.html#id10">Miscellaneous</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-0-9-0">Release 0.9.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-0-8-4">Release 0.8.4</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-0-8-3">Release 0.8.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-0-8-0">Release 0.8.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-0-7-0">Release 0.7.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="releases.html#release-0-6-1">Release 0.6.1</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Zipline</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>API Reference</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/appendix.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="running-a-backtest">
<h2>Running a Backtest<a class="headerlink" href="#running-a-backtest" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="zipline.run_algorithm">
<code class="descclassname">zipline.</code><code class="descname">run_algorithm</code><span class="sig-paren">(</span><em>...</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/run_algo.html#run_algorithm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.run_algorithm" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a trading algorithm.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>start</strong> (<a class="reference external" href="http://docs.python.org/dev/library/datetime.html#module-datetime" title="(in Python v3.8)"><em>datetime</em></a>) &#8211; The start date of the backtest.</li>
<li><strong>end</strong> (<a class="reference external" href="http://docs.python.org/dev/library/datetime.html#module-datetime" title="(in Python v3.8)"><em>datetime</em></a>) &#8211; The end date of the backtest..</li>
<li><strong>initialize</strong> (<em>callable[context -&gt; None]</em>) &#8211; The initialize function to use for the algorithm. This is called once
at the very begining of the backtest and should be used to set up
any state needed by the algorithm.</li>
<li><strong>capital_base</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) &#8211; The starting capital for the backtest.</li>
<li><strong>handle_data</strong> (<em>callable[(context, BarData) -&gt; None], optional</em>) &#8211; The handle_data function to use for the algorithm. This is called
every minute when <code class="docutils literal"><span class="pre">data_frequency</span> <span class="pre">==</span> <span class="pre">'minute'</span></code> or every day
when <code class="docutils literal"><span class="pre">data_frequency</span> <span class="pre">==</span> <span class="pre">'daily'</span></code>.</li>
<li><strong>before_trading_start</strong> (<em>callable[(context, BarData) -&gt; None], optional</em>) &#8211; The before_trading_start function for the algorithm. This is called
once before each trading day (after initialize on the first day).</li>
<li><strong>analyze</strong> (<em>callable[(context, pd.DataFrame) -&gt; None], optional</em>) &#8211; The analyze function to use for the algorithm. This function is called
once at the end of the backtest and is passed the context and the
performance data.</li>
<li><strong>data_frequency</strong> (<em>{'daily', 'minute'}, optional</em>) &#8211; The data frequency to run the algorithm at.</li>
<li><strong>data</strong> (<em>pd.DataFrame, pd.Panel, or DataPortal, optional</em>) &#8211; The ohlcv data to run the backtest with.
This argument is mutually exclusive with:
<code class="docutils literal"><span class="pre">bundle</span></code>
<code class="docutils literal"><span class="pre">bundle_timestamp</span></code></li>
<li><strong>bundle</strong> (<em>str, optional</em>) &#8211; The name of the data bundle to use to load the data to run the backtest
with. This defaults to &#8216;quantopian-quandl&#8217;.
This argument is mutually exclusive with <code class="docutils literal"><span class="pre">data</span></code>.</li>
<li><strong>bundle_timestamp</strong> (<em>datetime, optional</em>) &#8211; The datetime to lookup the bundle data for. This defaults to the
current time.
This argument is mutually exclusive with <code class="docutils literal"><span class="pre">data</span></code>.</li>
<li><strong>trading_calendar</strong> (<em>TradingCalendar, optional</em>) &#8211; The trading calendar to use for your backtest.</li>
<li><strong>metrics_set</strong> (<em>iterable[Metric] or str, optional</em>) &#8211; The set of metrics to compute in the simulation. If a string is passed,
resolve the set with <a class="reference internal" href="#zipline.finance.metrics.load" title="zipline.finance.metrics.load"><code class="xref py py-func docutils literal"><span class="pre">zipline.finance.metrics.load()</span></code></a>.</li>
<li><strong>default_extension</strong> (<em>bool, optional</em>) &#8211; Should the default zipline extension be loaded. This is found at
<code class="docutils literal"><span class="pre">$ZIPLINE_ROOT/extension.py</span></code></li>
<li><strong>extensions</strong> (<em>iterable[str], optional</em>) &#8211; The names of any other extensions to load. Each element may either be
a dotted module path like <code class="docutils literal"><span class="pre">a.b.c</span></code> or a path to a python file ending
in <code class="docutils literal"><span class="pre">.py</span></code> like <code class="docutils literal"><span class="pre">a/b/c.py</span></code>.</li>
<li><strong>strict_extensions</strong> (<em>bool, optional</em>) &#8211; Should the run fail if any extensions fail to load. If this is false,
a warning will be raised instead.</li>
<li><strong>environ</strong> (<em>mapping[str -&gt; str], optional</em>) &#8211; The os environment to use. Many extensions use this to get parameters.
This defaults to <code class="docutils literal"><span class="pre">os.environ</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>perf</strong> &#8211;
The daily performance of the algorithm.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DataFrame</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#zipline.data.bundles.bundles" title="zipline.data.bundles.bundles"><code class="xref py py-func docutils literal"><span class="pre">zipline.data.bundles.bundles()</span></code></a></dt>
<dd>The available data bundles.</dd>
</dl>
</div>
</dd></dl>

</div>
<div class="section" id="algorithm-api">
<h2>Algorithm API<a class="headerlink" href="#algorithm-api" title="Permalink to this headline">¶</a></h2>
<p>The following methods are available for use in the <code class="docutils literal"><span class="pre">initialize</span></code>,
<code class="docutils literal"><span class="pre">handle_data</span></code>, and <code class="docutils literal"><span class="pre">before_trading_start</span></code> API functions.</p>
<p>In all listed functions, the <code class="docutils literal"><span class="pre">self</span></code> argument is implicitly the
currently-executing <code class="xref py py-class docutils literal"><span class="pre">TradingAlgorithm</span></code> instance.</p>
<div class="section" id="data-object">
<h3>Data Object<a class="headerlink" href="#data-object" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="zipline.protocol.BarData">
<em class="property">class </em><code class="descclassname">zipline.protocol.</code><code class="descname">BarData</code><a class="headerlink" href="#zipline.protocol.BarData" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides methods to access spot value or history windows of price data.
Also provides some utility methods to determine if an asset is alive,
has recent trade data, etc.</p>
<p>This is what is passed as <code class="docutils literal"><span class="pre">data</span></code> to the <code class="docutils literal"><span class="pre">handle_data</span></code> function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data_portal</strong> (<a class="reference internal" href="#zipline.data.data_portal.DataPortal" title="zipline.data.data_portal.DataPortal"><em>DataPortal</em></a>) &#8211; Provider for bar pricing data.</li>
<li><strong>simulation_dt_func</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) &#8211; Function which returns the current simulation time.
This is usually bound to a method of TradingSimulation.</li>
<li><strong>data_frequency</strong> (<em>{'minute', 'daily'}</em>) &#8211; The frequency of the bar data; i.e. whether the data is
daily or minute bars</li>
<li><strong>restrictions</strong> (<em>zipline.finance.asset_restrictions.Restrictions</em>) &#8211; Object that combines and returns restricted list information from
multiple sources</li>
<li><strong>universe_func</strong> (<em>callable, optional</em>) &#8211; Function which returns the current &#8216;universe&#8217;.  This is for
backwards compatibility with older API concepts.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="zipline.protocol.BarData.can_trade">
<code class="descname">can_trade</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zipline.protocol.BarData.can_trade" title="Permalink to this definition">¶</a></dt>
<dd><p>For the given asset or iterable of assets, returns true if all of the
following are true:
1) the asset is alive for the session of the current simulation time</p>
<blockquote>
<div>(if current simulation time is not a market minute, we use the next
session)</div></blockquote>
<ol class="arabic simple" start="2">
<li>(if we are in minute mode) the asset&#8217;s exchange is open at the</li>
</ol>
<blockquote>
<div>current simulation time or at the simulation calendar&#8217;s next market
minute</div></blockquote>
<ol class="arabic simple" start="3">
<li>there is a known last price for the asset.</li>
</ol>
<p class="rubric">Notes</p>
<p>The second condition above warrants some further explanation.
- If the asset&#8217;s exchange calendar is identical to the simulation
calendar, then this condition always returns True.
- If there are market minutes in the simulation calendar outside of
this asset&#8217;s exchange&#8217;s trading hours (for example, if the simulation
is running on the CME calendar but the asset is MSFT, which trades on
the NYSE), during those minutes, this condition will return false
(for example, 3:15 am Eastern on a weekday, during which the CME is
open but the NYSE is closed).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>assets</strong> (<em>Asset or iterable of assets</em>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>can_trade</strong></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">bool or pd.Series[bool] indexed by asset.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.protocol.BarData.current">
<code class="descname">current</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zipline.protocol.BarData.current" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current value of the given assets for the given fields
at the current simulation time.  Current values are the as-traded price
and are usually not adjusted for events like splits or dividends (see
notes for more information).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>assets</strong> (<em>Asset or iterable of Assets</em>) &#8211; </li>
<li><strong>fields</strong> (<em>str or iterable[str].</em>) &#8211; Valid values are: &#8220;price&#8221;,
&#8220;last_traded&#8221;, &#8220;open&#8221;, &#8220;high&#8221;, &#8220;low&#8221;, &#8220;close&#8221;, &#8220;volume&#8221;, or column
names in files read by <code class="docutils literal"><span class="pre">fetch_csv</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>current_value</strong> &#8211;
See notes below.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Scalar, pandas Series, or pandas DataFrame.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If a single asset and a single field are passed in, a scalar float
value is returned.</p>
<p>If a single asset and a list of fields are passed in, a pandas Series
is returned whose indices are the fields, and whose values are scalar
values for this asset for each field.</p>
<p>If a list of assets and a single field are passed in, a pandas Series
is returned whose indices are the assets, and whose values are scalar
values for each asset for the given field.</p>
<p>If a list of assets and a list of fields are passed in, a pandas
DataFrame is returned, indexed by asset.  The columns are the requested
fields, filled with the scalar values for each asset for each field.</p>
<p>If the current simulation time is not a valid market time, we use the
last market close instead.</p>
<p>&#8220;price&#8221; returns the last known close price of the asset.  If there is
no last known value (either because the asset has never traded, or
because it has delisted) NaN is returned.  If a value is found, and we
had to cross an adjustment boundary (split, dividend, etc) to get it,
the value is adjusted before being returned.</p>
<p>&#8220;last_traded&#8221; returns the date of the last trade event of the asset,
even if the asset has stopped trading. If there is no last known value,
pd.NaT is returned.</p>
<p>&#8220;volume&#8221; returns the trade volume for the current simulation time.  If
there is no trade this minute, 0 is returned.</p>
<p>&#8220;open&#8221;, &#8220;high&#8221;, &#8220;low&#8221;, and &#8220;close&#8221; return the relevant information for
the current trade bar.  If there is no current trade bar, NaN is
returned.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.protocol.BarData.history">
<code class="descname">history</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zipline.protocol.BarData.history" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a window of data for the given assets and fields.</p>
<p>This data is adjusted for splits, dividends, and mergers as of the
current algorithm time.</p>
<p>The semantics of missing data are identical to the ones described in
the notes for <cite>get_spot_value</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>assets</strong> (<em>Asset or iterable of Asset</em>) &#8211; </li>
<li><strong>fields</strong> (<em>string or iterable of string.  Valid values are &quot;open&quot;, &quot;high&quot;,</em>) &#8211; &#8220;low&#8221;, &#8220;close&#8221;, &#8220;volume&#8221;, &#8220;price&#8221;, and &#8220;last_traded&#8221;.</li>
<li><strong>bar_count</strong> (<em>integer number of bars of trade data</em>) &#8211; </li>
<li><strong>frequency</strong> (<em>string. &quot;1m&quot; for minutely data or &quot;1d&quot; for daily date</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p><strong>history</strong> &#8211;
Return type depends on the dimensionality of the &#8216;assets&#8217; and
&#8216;fields&#8217; parameters.</p>
<p>If single asset and field are passed in, the returned Series is
indexed by dt.</p>
<p>If multiple assets and single field are passed in, the returned
DataFrame is indexed by dt, and has assets as columns.</p>
<p>If a single asset and multiple fields are passed in, the returned
DataFrame is indexed by dt, and has fields as columns.</p>
<p>If multiple assets and multiple fields are passed in, the returned
Panel is indexed by field, has dt as the major axis, and assets
as the minor axis.</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Series or DataFrame or Panel</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If the current simulation time is not a valid market time, we use the
last market close instead.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.protocol.BarData.is_stale">
<code class="descname">is_stale</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zipline.protocol.BarData.is_stale" title="Permalink to this definition">¶</a></dt>
<dd><p>For the given asset or iterable of assets, returns true if the asset
is alive and there is no trade data for the current simulation time.</p>
<p>If the asset has never traded, returns False.</p>
<p>If the current simulation time is not a valid market time, we use the
current time to check if the asset is alive, but we use the last
market minute/day for the trade data check.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>assets</strong> (<em>Asset or iterable of assets</em>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">boolean or Series of booleans, indexed by asset.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="scheduling-functions">
<h3>Scheduling Functions<a class="headerlink" href="#scheduling-functions" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="zipline.api.schedule_function">
<code class="descclassname">zipline.api.</code><code class="descname">schedule_function</code><span class="sig-paren">(</span><em>self</em>, <em>func</em>, <em>date_rule=None</em>, <em>time_rule=None</em>, <em>half_days=True</em>, <em>calendar=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.schedule_function" title="Permalink to this definition">¶</a></dt>
<dd><p>Schedules a function to be called according to some timed rules.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>func</strong> (<em>callable[(context, data) -&gt; None]</em>) &#8211; The function to execute when the rule is triggered.</li>
<li><strong>date_rule</strong> (<em>EventRule, optional</em>) &#8211; The rule for the dates to execute this function.</li>
<li><strong>time_rule</strong> (<em>EventRule, optional</em>) &#8211; The rule for the times to execute this function.</li>
<li><strong>half_days</strong> (<em>bool, optional</em>) &#8211; Should this rule fire on half days?</li>
<li><strong>calendar</strong> (<em>Sentinel, optional</em>) &#8211; Calendar used to reconcile date and time rules.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.api.date_rules" title="zipline.api.date_rules"><code class="xref py py-class docutils literal"><span class="pre">zipline.api.date_rules</span></code></a>, <a class="reference internal" href="#zipline.api.time_rules" title="zipline.api.time_rules"><code class="xref py py-class docutils literal"><span class="pre">zipline.api.time_rules</span></code></a></p>
</div>
</dd></dl>

<dl class="class">
<dt id="zipline.api.date_rules">
<em class="property">class </em><code class="descclassname">zipline.api.</code><code class="descname">date_rules</code><a class="reference internal" href="_modules/zipline/utils/events.html#date_rules"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.api.date_rules" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="zipline.api.date_rules.every_day">
<code class="descname">every_day</code><a class="headerlink" href="#zipline.api.date_rules.every_day" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">Always</span></code></p>
</dd></dl>

<dl class="staticmethod">
<dt id="zipline.api.date_rules.month_end">
<em class="property">static </em><code class="descname">month_end</code><span class="sig-paren">(</span><em>days_offset=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/events.html#date_rules.month_end"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.api.date_rules.month_end" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="zipline.api.date_rules.month_start">
<em class="property">static </em><code class="descname">month_start</code><span class="sig-paren">(</span><em>days_offset=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/events.html#date_rules.month_start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.api.date_rules.month_start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="zipline.api.date_rules.week_end">
<em class="property">static </em><code class="descname">week_end</code><span class="sig-paren">(</span><em>days_offset=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/events.html#date_rules.week_end"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.api.date_rules.week_end" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="zipline.api.date_rules.week_start">
<em class="property">static </em><code class="descname">week_start</code><span class="sig-paren">(</span><em>days_offset=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/events.html#date_rules.week_start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.api.date_rules.week_start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.api.time_rules">
<em class="property">class </em><code class="descclassname">zipline.api.</code><code class="descname">time_rules</code><a class="reference internal" href="_modules/zipline/utils/events.html#time_rules"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.api.time_rules" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="zipline.api.time_rules.every_minute">
<code class="descname">every_minute</code><a class="headerlink" href="#zipline.api.time_rules.every_minute" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">Always</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="zipline.api.time_rules.market_close">
<code class="descname">market_close</code><a class="headerlink" href="#zipline.api.time_rules.market_close" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">BeforeClose</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="zipline.api.time_rules.market_open">
<code class="descname">market_open</code><a class="headerlink" href="#zipline.api.time_rules.market_open" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">AfterOpen</span></code></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="orders">
<h3>Orders<a class="headerlink" href="#orders" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="zipline.api.order">
<code class="descclassname">zipline.api.</code><code class="descname">order</code><span class="sig-paren">(</span><em>self</em>, <em>asset</em>, <em>amount</em>, <em>limit_price=None</em>, <em>stop_price=None</em>, <em>style=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.order" title="Permalink to this definition">¶</a></dt>
<dd><p>Place an order.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) &#8211; The asset that this order is for.</li>
<li><strong>amount</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The amount of shares to order. If <code class="docutils literal"><span class="pre">amount</span></code> is positive, this is
the number of shares to buy or cover. If <code class="docutils literal"><span class="pre">amount</span></code> is negative,
this is the number of shares to sell or short.</li>
<li><strong>limit_price</strong> (<em>float, optional</em>) &#8211; The limit price for the order.</li>
<li><strong>stop_price</strong> (<em>float, optional</em>) &#8211; The stop price for the order.</li>
<li><strong>style</strong> (<em>ExecutionStyle, optional</em>) &#8211; The execution style for the order.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>order_id</strong> &#8211;
The unique identifier for this order, or None if no order was
placed.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">str or None</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The <code class="docutils literal"><span class="pre">limit_price</span></code> and <code class="docutils literal"><span class="pre">stop_price</span></code> arguments provide shorthands for
passing common execution styles. Passing <code class="docutils literal"><span class="pre">limit_price=N</span></code> is
equivalent to <code class="docutils literal"><span class="pre">style=LimitOrder(N)</span></code>. Similarly, passing
<code class="docutils literal"><span class="pre">stop_price=M</span></code> is equivalent to <code class="docutils literal"><span class="pre">style=StopOrder(M)</span></code>, and passing
<code class="docutils literal"><span class="pre">limit_price=N</span></code> and <code class="docutils literal"><span class="pre">stop_price=M</span></code> is equivalent to
<code class="docutils literal"><span class="pre">style=StopLimitOrder(N,</span> <span class="pre">M)</span></code>. It is an error to pass both a <code class="docutils literal"><span class="pre">style</span></code>
and <code class="docutils literal"><span class="pre">limit_price</span></code> or <code class="docutils literal"><span class="pre">stop_price</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><code class="xref py py-class docutils literal"><span class="pre">zipline.finance.execution.ExecutionStyle</span></code></a>, <a class="reference internal" href="#zipline.api.order_value" title="zipline.api.order_value"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order_value()</span></code></a>, <a class="reference internal" href="#zipline.api.order_percent" title="zipline.api.order_percent"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order_percent()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="zipline.api.order_value">
<code class="descclassname">zipline.api.</code><code class="descname">order_value</code><span class="sig-paren">(</span><em>self</em>, <em>asset</em>, <em>value</em>, <em>limit_price=None</em>, <em>stop_price=None</em>, <em>style=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.order_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Place an order by desired value rather than desired number of
shares.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) &#8211; The asset that this order is for.</li>
<li><strong>value</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) &#8211; <p>If the requested asset exists, the requested value is
divided by its price to imply the number of shares to transact.
If the Asset being ordered is a Future, the &#8216;value&#8217; calculated
is actually the exposure, as Futures have no &#8216;value&#8217;.</p>
<p>value &gt; 0 :: Buy/Cover
value &lt; 0 :: Sell/Short</p>
</li>
<li><strong>limit_price</strong> (<em>float, optional</em>) &#8211; The limit price for the order.</li>
<li><strong>stop_price</strong> (<em>float, optional</em>) &#8211; The stop price for the order.</li>
<li><strong>style</strong> (<a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><em>ExecutionStyle</em></a>) &#8211; The execution style for the order.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>order_id</strong> &#8211;
The unique identifier for this order.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>See <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order()</span></code></a> for more information about
<code class="docutils literal"><span class="pre">limit_price</span></code>, <code class="docutils literal"><span class="pre">stop_price</span></code>, and <code class="docutils literal"><span class="pre">style</span></code></p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><code class="xref py py-class docutils literal"><span class="pre">zipline.finance.execution.ExecutionStyle</span></code></a>, <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order()</span></code></a>, <a class="reference internal" href="#zipline.api.order_percent" title="zipline.api.order_percent"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order_percent()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="zipline.api.order_percent">
<code class="descclassname">zipline.api.</code><code class="descname">order_percent</code><span class="sig-paren">(</span><em>self</em>, <em>asset</em>, <em>percent</em>, <em>limit_price=None</em>, <em>stop_price=None</em>, <em>style=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.order_percent" title="Permalink to this definition">¶</a></dt>
<dd><p>Place an order in the specified asset corresponding to the given
percent of the current portfolio value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) &#8211; The asset that this order is for.</li>
<li><strong>percent</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) &#8211; The percentage of the portfolio value to allocate to <code class="docutils literal"><span class="pre">asset</span></code>.
This is specified as a decimal, for example: 0.50 means 50%.</li>
<li><strong>limit_price</strong> (<em>float, optional</em>) &#8211; The limit price for the order.</li>
<li><strong>stop_price</strong> (<em>float, optional</em>) &#8211; The stop price for the order.</li>
<li><strong>style</strong> (<a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><em>ExecutionStyle</em></a>) &#8211; The execution style for the order.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>order_id</strong> &#8211;
The unique identifier for this order.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>See <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order()</span></code></a> for more information about
<code class="docutils literal"><span class="pre">limit_price</span></code>, <code class="docutils literal"><span class="pre">stop_price</span></code>, and <code class="docutils literal"><span class="pre">style</span></code></p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><code class="xref py py-class docutils literal"><span class="pre">zipline.finance.execution.ExecutionStyle</span></code></a>, <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order()</span></code></a>, <a class="reference internal" href="#zipline.api.order_value" title="zipline.api.order_value"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order_value()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="zipline.api.order_target">
<code class="descclassname">zipline.api.</code><code class="descname">order_target</code><span class="sig-paren">(</span><em>self</em>, <em>asset</em>, <em>target</em>, <em>limit_price=None</em>, <em>stop_price=None</em>, <em>style=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.order_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Place an order to adjust a position to a target number of shares. If
the position doesn&#8217;t already exist, this is equivalent to placing a new
order. If the position does exist, this is equivalent to placing an
order for the difference between the target number of shares and the
current number of shares.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) &#8211; The asset that this order is for.</li>
<li><strong>target</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The desired number of shares of <code class="docutils literal"><span class="pre">asset</span></code>.</li>
<li><strong>limit_price</strong> (<em>float, optional</em>) &#8211; The limit price for the order.</li>
<li><strong>stop_price</strong> (<em>float, optional</em>) &#8211; The stop price for the order.</li>
<li><strong>style</strong> (<a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><em>ExecutionStyle</em></a>) &#8211; The execution style for the order.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>order_id</strong> &#8211;
The unique identifier for this order.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p><code class="docutils literal"><span class="pre">order_target</span></code> does not take into account any open orders. For
example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">order_target</span><span class="p">(</span><span class="n">sid</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">order_target</span><span class="p">(</span><span class="n">sid</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>This code will result in 20 shares of <code class="docutils literal"><span class="pre">sid(0)</span></code> because the first
call to <code class="docutils literal"><span class="pre">order_target</span></code> will not have been filled when the second
<code class="docutils literal"><span class="pre">order_target</span></code> call is made.</p>
<p>See <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order()</span></code></a> for more information about
<code class="docutils literal"><span class="pre">limit_price</span></code>, <code class="docutils literal"><span class="pre">stop_price</span></code>, and <code class="docutils literal"><span class="pre">style</span></code></p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><code class="xref py py-class docutils literal"><span class="pre">zipline.finance.execution.ExecutionStyle</span></code></a>, <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order()</span></code></a>, <a class="reference internal" href="#zipline.api.order_target_percent" title="zipline.api.order_target_percent"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order_target_percent()</span></code></a>, <a class="reference internal" href="#zipline.api.order_target_value" title="zipline.api.order_target_value"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order_target_value()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="zipline.api.order_target_value">
<code class="descclassname">zipline.api.</code><code class="descname">order_target_value</code><span class="sig-paren">(</span><em>self</em>, <em>asset</em>, <em>target</em>, <em>limit_price=None</em>, <em>stop_price=None</em>, <em>style=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.order_target_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Place an order to adjust a position to a target value. If
the position doesn&#8217;t already exist, this is equivalent to placing a new
order. If the position does exist, this is equivalent to placing an
order for the difference between the target value and the
current value.
If the Asset being ordered is a Future, the &#8216;target value&#8217; calculated
is actually the target exposure, as Futures have no &#8216;value&#8217;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) &#8211; The asset that this order is for.</li>
<li><strong>target</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) &#8211; The desired total value of <code class="docutils literal"><span class="pre">asset</span></code>.</li>
<li><strong>limit_price</strong> (<em>float, optional</em>) &#8211; The limit price for the order.</li>
<li><strong>stop_price</strong> (<em>float, optional</em>) &#8211; The stop price for the order.</li>
<li><strong>style</strong> (<a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><em>ExecutionStyle</em></a>) &#8211; The execution style for the order.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>order_id</strong> &#8211;
The unique identifier for this order.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p><code class="docutils literal"><span class="pre">order_target_value</span></code> does not take into account any open orders. For
example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">order_target_value</span><span class="p">(</span><span class="n">sid</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">order_target_value</span><span class="p">(</span><span class="n">sid</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>This code will result in 20 dollars of <code class="docutils literal"><span class="pre">sid(0)</span></code> because the first
call to <code class="docutils literal"><span class="pre">order_target_value</span></code> will not have been filled when the
second <code class="docutils literal"><span class="pre">order_target_value</span></code> call is made.</p>
<p>See <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order()</span></code></a> for more information about
<code class="docutils literal"><span class="pre">limit_price</span></code>, <code class="docutils literal"><span class="pre">stop_price</span></code>, and <code class="docutils literal"><span class="pre">style</span></code></p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><code class="xref py py-class docutils literal"><span class="pre">zipline.finance.execution.ExecutionStyle</span></code></a>, <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order()</span></code></a>, <a class="reference internal" href="#zipline.api.order_target" title="zipline.api.order_target"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order_target()</span></code></a>, <a class="reference internal" href="#zipline.api.order_target_percent" title="zipline.api.order_target_percent"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order_target_percent()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="zipline.api.order_target_percent">
<code class="descclassname">zipline.api.</code><code class="descname">order_target_percent</code><span class="sig-paren">(</span><em>self</em>, <em>asset</em>, <em>target</em>, <em>limit_price=None</em>, <em>stop_price=None</em>, <em>style=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.order_target_percent" title="Permalink to this definition">¶</a></dt>
<dd><p>Place an order to adjust a position to a target percent of the
current portfolio value. If the position doesn&#8217;t already exist, this is
equivalent to placing a new order. If the position does exist, this is
equivalent to placing an order for the difference between the target
percent and the current percent.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) &#8211; The asset that this order is for.</li>
<li><strong>target</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) &#8211; The desired percentage of the portfolio value to allocate to
<code class="docutils literal"><span class="pre">asset</span></code>. This is specified as a decimal, for example:
0.50 means 50%.</li>
<li><strong>limit_price</strong> (<em>float, optional</em>) &#8211; The limit price for the order.</li>
<li><strong>stop_price</strong> (<em>float, optional</em>) &#8211; The stop price for the order.</li>
<li><strong>style</strong> (<a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><em>ExecutionStyle</em></a>) &#8211; The execution style for the order.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>order_id</strong> &#8211;
The unique identifier for this order.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p><code class="docutils literal"><span class="pre">order_target_value</span></code> does not take into account any open orders. For
example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">order_target_percent</span><span class="p">(</span><span class="n">sid</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">order_target_percent</span><span class="p">(</span><span class="n">sid</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>This code will result in 20% of the portfolio being allocated to sid(0)
because the first call to <code class="docutils literal"><span class="pre">order_target_percent</span></code> will not have been
filled when the second <code class="docutils literal"><span class="pre">order_target_percent</span></code> call is made.</p>
<p>See <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order()</span></code></a> for more information about
<code class="docutils literal"><span class="pre">limit_price</span></code>, <code class="docutils literal"><span class="pre">stop_price</span></code>, and <code class="docutils literal"><span class="pre">style</span></code></p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.finance.execution.ExecutionStyle" title="zipline.finance.execution.ExecutionStyle"><code class="xref py py-class docutils literal"><span class="pre">zipline.finance.execution.ExecutionStyle</span></code></a>, <a class="reference internal" href="#zipline.api.order" title="zipline.api.order"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order()</span></code></a>, <a class="reference internal" href="#zipline.api.order_target" title="zipline.api.order_target"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order_target()</span></code></a>, <a class="reference internal" href="#zipline.api.order_target_value" title="zipline.api.order_target_value"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.order_target_value()</span></code></a></p>
</div>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.execution.ExecutionStyle">
<em class="property">class </em><code class="descclassname">zipline.finance.execution.</code><code class="descname">ExecutionStyle</code><a class="reference internal" href="_modules/zipline/finance/execution.html#ExecutionStyle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.execution.ExecutionStyle" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract base class representing a modification to a standard order.</p>
<dl class="attribute">
<dt id="zipline.finance.execution.ExecutionStyle.exchange">
<code class="descname">exchange</code><a class="headerlink" href="#zipline.finance.execution.ExecutionStyle.exchange" title="Permalink to this definition">¶</a></dt>
<dd><p>The exchange to which this order should be routed.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.finance.execution.ExecutionStyle.get_limit_price">
<code class="descname">get_limit_price</code><span class="sig-paren">(</span><em>is_buy</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/execution.html#ExecutionStyle.get_limit_price"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.execution.ExecutionStyle.get_limit_price" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the limit price for this order.
Returns either None or a numerical value &gt;= 0.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.finance.execution.ExecutionStyle.get_stop_price">
<code class="descname">get_stop_price</code><span class="sig-paren">(</span><em>is_buy</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/execution.html#ExecutionStyle.get_stop_price"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.execution.ExecutionStyle.get_stop_price" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the stop price for this order.
Returns either None or a numerical value &gt;= 0.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.finance.execution.MarketOrder">
<em class="property">class </em><code class="descclassname">zipline.finance.execution.</code><code class="descname">MarketOrder</code><span class="sig-paren">(</span><em>exchange=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/execution.html#MarketOrder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.execution.MarketOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Class encapsulating an order to be placed at the current market price.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.execution.LimitOrder">
<em class="property">class </em><code class="descclassname">zipline.finance.execution.</code><code class="descname">LimitOrder</code><span class="sig-paren">(</span><em>limit_price</em>, <em>exchange=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/execution.html#LimitOrder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.execution.LimitOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Execution style representing an order to be executed at a price equal to or
better than a specified limit price.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.execution.StopOrder">
<em class="property">class </em><code class="descclassname">zipline.finance.execution.</code><code class="descname">StopOrder</code><span class="sig-paren">(</span><em>stop_price</em>, <em>exchange=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/execution.html#StopOrder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.execution.StopOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Execution style representing an order to be placed once the market price
reaches a specified stop price.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.execution.StopLimitOrder">
<em class="property">class </em><code class="descclassname">zipline.finance.execution.</code><code class="descname">StopLimitOrder</code><span class="sig-paren">(</span><em>limit_price</em>, <em>stop_price</em>, <em>exchange=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/execution.html#StopLimitOrder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.execution.StopLimitOrder" title="Permalink to this definition">¶</a></dt>
<dd><p>Execution style representing a limit order to be placed with a specified
limit price once the market reaches a specified stop price.</p>
</dd></dl>

<dl class="function">
<dt id="zipline.api.get_order">
<code class="descclassname">zipline.api.</code><code class="descname">get_order</code><span class="sig-paren">(</span><em>self</em>, <em>order_id</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.get_order" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup an order based on the order id returned from one of the
order functions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>order_id</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The unique identifier for the order.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>order</strong> &#8211;
The order object.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Order</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.api.get_open_orders">
<code class="descclassname">zipline.api.</code><code class="descname">get_open_orders</code><span class="sig-paren">(</span><em>self</em>, <em>asset=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.get_open_orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve all of the current open orders.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) &#8211; If passed and not None, return only the open orders for the given
asset instead of all open orders.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>open_orders</strong> &#8211;
If no asset is passed this will return a dict mapping Assets
to a list containing all the open orders for the asset.
If an asset is passed then this will return a list of the open
orders for this asset.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict[list[Order]] or list[Order]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.api.cancel_order">
<code class="descclassname">zipline.api.</code><code class="descname">cancel_order</code><span class="sig-paren">(</span><em>self</em>, <em>order_param</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.cancel_order" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel an open order.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>order_param</strong> (<em>str or Order</em>) &#8211; The order_id or order object to cancel.</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="order-cancellation-policies">
<h4>Order Cancellation Policies<a class="headerlink" href="#order-cancellation-policies" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="zipline.api.set_cancel_policy">
<code class="descclassname">zipline.api.</code><code class="descname">set_cancel_policy</code><span class="sig-paren">(</span><em>self</em>, <em>cancel_policy</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_cancel_policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the order cancellation policy for the simulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cancel_policy</strong> (<a class="reference internal" href="#zipline.finance.cancel_policy.CancelPolicy" title="zipline.finance.cancel_policy.CancelPolicy"><em>CancelPolicy</em></a>) &#8211; The cancellation policy to use.</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.api.EODCancel" title="zipline.api.EODCancel"><code class="xref py py-class docutils literal"><span class="pre">zipline.api.EODCancel</span></code></a>, <a class="reference internal" href="#zipline.api.NeverCancel" title="zipline.api.NeverCancel"><code class="xref py py-class docutils literal"><span class="pre">zipline.api.NeverCancel</span></code></a></p>
</div>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.cancel_policy.CancelPolicy">
<em class="property">class </em><code class="descclassname">zipline.finance.cancel_policy.</code><code class="descname">CancelPolicy</code><a class="reference internal" href="_modules/zipline/finance/cancel_policy.html#CancelPolicy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.cancel_policy.CancelPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract cancellation policy interface.</p>
<dl class="method">
<dt id="zipline.finance.cancel_policy.CancelPolicy.should_cancel">
<code class="descname">should_cancel</code><span class="sig-paren">(</span><em>event</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/cancel_policy.html#CancelPolicy.should_cancel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.cancel_policy.CancelPolicy.should_cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Should all open orders be cancelled?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>event</strong> (<em>enum-value</em>) &#8211; An event type, one of:
- <code class="xref py py-data docutils literal"><span class="pre">zipline.gens.sim_engine.BAR</span></code>
- <code class="xref py py-data docutils literal"><span class="pre">zipline.gens.sim_engine.DAY_START</span></code>
- <code class="xref py py-data docutils literal"><span class="pre">zipline.gens.sim_engine.DAY_END</span></code>
- <code class="xref py py-data docutils literal"><span class="pre">zipline.gens.sim_engine.MINUTE_END</span></code></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>should_cancel</strong> &#8211;
Should all open orders be cancelled?</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/dev/library/functions.html#bool" title="(in Python v3.8)">bool</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="zipline.api.EODCancel">
<code class="descclassname">zipline.api.</code><code class="descname">EODCancel</code><span class="sig-paren">(</span><em>warn_on_cancel=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/cancel_policy.html#EODCancel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.api.EODCancel" title="Permalink to this definition">¶</a></dt>
<dd><p>This policy cancels open orders at the end of the day.  For now,
Zipline will only apply this policy to minutely simulations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>warn_on_cancel</strong> (<em>bool, optional</em>) &#8211; Should a warning be raised if this causes an order to be cancelled?</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.api.NeverCancel">
<code class="descclassname">zipline.api.</code><code class="descname">NeverCancel</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/cancel_policy.html#NeverCancel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.api.NeverCancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Orders are never automatically canceled.</p>
</dd></dl>

</div>
</div>
<div class="section" id="assets">
<h3>Assets<a class="headerlink" href="#assets" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="zipline.api.symbol">
<code class="descclassname">zipline.api.</code><code class="descname">symbol</code><span class="sig-paren">(</span><em>self</em>, <em>symbol_str</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.symbol" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup an Equity by its ticker symbol.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>symbol_str</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The ticker symbol for the equity to lookup.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>equity</strong> &#8211;
The equity that held the ticker symbol on the current
symbol lookup date.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#zipline.assets.Equity" title="zipline.assets.Equity">Equity</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">SymbolNotFound</span></code> &#8211;
Raised when the symbols was not held on the current lookup date.</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.api.set_symbol_lookup_date" title="zipline.api.set_symbol_lookup_date"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.set_symbol_lookup_date()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="zipline.api.symbols">
<code class="descclassname">zipline.api.</code><code class="descname">symbols</code><span class="sig-paren">(</span><em>self</em>, <em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.symbols" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup multuple Equities as a list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>*args</strong> &#8211; <p>The ticker symbols to lookup.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>equities</strong> &#8211;
The equities that held the given ticker symbols on the current
symbol lookup date.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list[Equity]</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">SymbolNotFound</span></code> &#8211;
Raised when one of the symbols was not held on the current
lookup date.</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.api.set_symbol_lookup_date" title="zipline.api.set_symbol_lookup_date"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.set_symbol_lookup_date()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="zipline.api.future_symbol">
<code class="descclassname">zipline.api.</code><code class="descname">future_symbol</code><span class="sig-paren">(</span><em>self</em>, <em>symbol</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.future_symbol" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup a futures contract with a given symbol.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>symbol</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The symbol of the desired contract.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>future</strong> &#8211;
The future that trades with the name <code class="docutils literal"><span class="pre">symbol</span></code>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#zipline.assets.Future" title="zipline.assets.Future">Future</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">SymbolNotFound</span></code> &#8211;
Raised when no contract named &#8216;symbol&#8217; is found.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.api.set_symbol_lookup_date">
<code class="descclassname">zipline.api.</code><code class="descname">set_symbol_lookup_date</code><span class="sig-paren">(</span><em>self</em>, <em>dt</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_symbol_lookup_date" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the date for which symbols will be resolved to their assets
(symbols may map to different firms or underlying assets at
different times)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dt</strong> (<a class="reference external" href="http://docs.python.org/dev/library/datetime.html#module-datetime" title="(in Python v3.8)"><em>datetime</em></a>) &#8211; The new symbol lookup date.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.api.sid">
<code class="descclassname">zipline.api.</code><code class="descname">sid</code><span class="sig-paren">(</span><em>self</em>, <em>sid</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.sid" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup an Asset by its unique asset identifier.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sid</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The unique integer that identifies an asset.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>asset</strong> &#8211;
The asset with the given <code class="docutils literal"><span class="pre">sid</span></code>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset">Asset</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">SidsNotFound</span></code> &#8211;
When a requested <code class="docutils literal"><span class="pre">sid</span></code> does not map to any asset.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="trading-controls">
<h3>Trading Controls<a class="headerlink" href="#trading-controls" title="Permalink to this headline">¶</a></h3>
<p>Zipline provides trading controls to help ensure that the algorithm is
performing as expected. The functions help protect the algorithm from certian
bugs that could cause undesirable behavior when trading with real money.</p>
<dl class="function">
<dt id="zipline.api.set_do_not_order_list">
<code class="descclassname">zipline.api.</code><code class="descname">set_do_not_order_list</code><span class="sig-paren">(</span><em>self</em>, <em>restricted_list</em>, <em>on_error='fail'</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_do_not_order_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a restriction on which assets can be ordered.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>restricted_list</strong> (<em>container[Asset], SecurityList</em>) &#8211; The assets that cannot be ordered.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.api.set_long_only">
<code class="descclassname">zipline.api.</code><code class="descname">set_long_only</code><span class="sig-paren">(</span><em>self</em>, <em>on_error='fail'</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_long_only" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a rule specifying that this algorithm cannot take short
positions.</p>
</dd></dl>

<dl class="function">
<dt id="zipline.api.set_max_leverage">
<code class="descclassname">zipline.api.</code><code class="descname">set_max_leverage</code><span class="sig-paren">(</span><em>self</em>, <em>max_leverage</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_max_leverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a limit on the maximum leverage of the algorithm.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>max_leverage</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) &#8211; The maximum leverage for the algorithm. If not provided there will
be no maximum.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.api.set_max_order_count">
<code class="descclassname">zipline.api.</code><code class="descname">set_max_order_count</code><span class="sig-paren">(</span><em>self</em>, <em>max_count</em>, <em>on_error='fail'</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_max_order_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a limit on the number of orders that can be placed in a single
day.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>max_count</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The maximum number of orders that can be placed on any single day.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.api.set_max_order_size">
<code class="descclassname">zipline.api.</code><code class="descname">set_max_order_size</code><span class="sig-paren">(</span><em>self</em>, <em>asset=None</em>, <em>max_shares=None</em>, <em>max_notional=None</em>, <em>on_error='fail'</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_max_order_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a limit on the number of shares and/or dollar value of any single
order placed for sid.  Limits are treated as absolute values and are
enforced at the time that the algo attempts to place an order for sid.</p>
<p>If an algorithm attempts to place an order that would result in
exceeding one of these limits, raise a TradingControlException.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>asset</strong> (<em>Asset, optional</em>) &#8211; If provided, this sets the guard only on positions in the given
asset.</li>
<li><strong>max_shares</strong> (<em>int, optional</em>) &#8211; The maximum number of shares that can be ordered at one time.</li>
<li><strong>max_notional</strong> (<em>float, optional</em>) &#8211; The maximum value that can be ordered at one time.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.api.set_max_position_size">
<code class="descclassname">zipline.api.</code><code class="descname">set_max_position_size</code><span class="sig-paren">(</span><em>self</em>, <em>asset=None</em>, <em>max_shares=None</em>, <em>max_notional=None</em>, <em>on_error='fail'</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_max_position_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a limit on the number of shares and/or dollar value held for the
given sid. Limits are treated as absolute values and are enforced at
the time that the algo attempts to place an order for sid. This means
that it&#8217;s possible to end up with more than the max number of shares
due to splits/dividends, and more than the max notional due to price
improvement.</p>
<p>If an algorithm attempts to place an order that would result in
increasing the absolute value of shares/dollar value exceeding one of
these limits, raise a TradingControlException.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>asset</strong> (<em>Asset, optional</em>) &#8211; If provided, this sets the guard only on positions in the given
asset.</li>
<li><strong>max_shares</strong> (<em>int, optional</em>) &#8211; The maximum number of shares to hold for an asset.</li>
<li><strong>max_notional</strong> (<em>float, optional</em>) &#8211; The maximum value to hold for an asset.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="simulation-parameters">
<h3>Simulation Parameters<a class="headerlink" href="#simulation-parameters" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="zipline.api.set_benchmark">
<code class="descclassname">zipline.api.</code><code class="descname">set_benchmark</code><span class="sig-paren">(</span><em>self</em>, <em>benchmark</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_benchmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the benchmark asset.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>benchmark</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) &#8211; The asset to set as the new benchmark.</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Any dividends payed out for that new benchmark asset will be
automatically reinvested.</p>
</dd></dl>

<div class="section" id="commission-models">
<h4>Commission Models<a class="headerlink" href="#commission-models" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="zipline.api.set_commission">
<code class="descclassname">zipline.api.</code><code class="descname">set_commission</code><span class="sig-paren">(</span><em>self</em>, <em>us_equities=None</em>, <em>us_futures=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_commission" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the commission models for the simulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>us_equities</strong> (<em>EquityCommissionModel</em>) &#8211; The commission model to use for trading US equities.</li>
<li><strong>us_futures</strong> (<em>FutureCommissionModel</em>) &#8211; The commission model to use for trading US futures.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.finance.commission.PerShare" title="zipline.finance.commission.PerShare"><code class="xref py py-class docutils literal"><span class="pre">zipline.finance.commission.PerShare</span></code></a>, <a class="reference internal" href="#zipline.finance.commission.PerTrade" title="zipline.finance.commission.PerTrade"><code class="xref py py-class docutils literal"><span class="pre">zipline.finance.commission.PerTrade</span></code></a>, <a class="reference internal" href="#zipline.finance.commission.PerDollar" title="zipline.finance.commission.PerDollar"><code class="xref py py-class docutils literal"><span class="pre">zipline.finance.commission.PerDollar</span></code></a></p>
</div>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.commission.CommissionModel">
<em class="property">class </em><code class="descclassname">zipline.finance.commission.</code><code class="descname">CommissionModel</code><a class="reference internal" href="_modules/zipline/finance/commission.html#CommissionModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.commission.CommissionModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract commission model interface.</p>
<p>Commission models are responsible for accepting order/transaction pairs and
calculating how much commission should be charged to an algorithm&#8217;s account
on each transaction.</p>
<dl class="method">
<dt id="zipline.finance.commission.CommissionModel.calculate">
<code class="descname">calculate</code><span class="sig-paren">(</span><em>order</em>, <em>transaction</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/commission.html#CommissionModel.calculate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.commission.CommissionModel.calculate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the amount of commission to charge on <code class="docutils literal"><span class="pre">order</span></code> as a result
of <code class="docutils literal"><span class="pre">transaction</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>order</strong> (<em>zipline.finance.order.Order</em>) &#8211; <p>The order being processed.</p>
<p>The <code class="docutils literal"><span class="pre">commission</span></code> field of <code class="docutils literal"><span class="pre">order</span></code> is a float indicating the
amount of commission already charged on this order.</p>
</li>
<li><strong>transaction</strong> (<em>zipline.finance.transaction.Transaction</em>) &#8211; The transaction being processed. A single order may generate
multiple transactions if there isn&#8217;t enough volume in a given bar
to fill the full amount requested in the order.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>amount_charged</strong> &#8211;
The additional commission, in dollars, that we should attribute to
this order.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/dev/library/functions.html#float" title="(in Python v3.8)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.finance.commission.PerShare">
<em class="property">class </em><code class="descclassname">zipline.finance.commission.</code><code class="descname">PerShare</code><span class="sig-paren">(</span><em>cost=0.001</em>, <em>min_trade_cost=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/commission.html#PerShare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.commission.PerShare" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates a commission for a transaction based on a per share cost with
an optional minimum cost per trade.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cost</strong> (<em>float, optional</em>) &#8211; The amount of commissions paid per share traded.</li>
<li><strong>min_trade_cost</strong> (<em>float, optional</em>) &#8211; The minimum amount of commissions paid per trade.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.commission.PerTrade">
<em class="property">class </em><code class="descclassname">zipline.finance.commission.</code><code class="descname">PerTrade</code><span class="sig-paren">(</span><em>cost=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/commission.html#PerTrade"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.commission.PerTrade" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates a commission for a transaction based on a per trade cost.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cost</strong> (<em>float, optional</em>) &#8211; The flat amount of commissions paid per equity trade.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.commission.PerDollar">
<em class="property">class </em><code class="descclassname">zipline.finance.commission.</code><code class="descname">PerDollar</code><span class="sig-paren">(</span><em>cost=0.0015</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/commission.html#PerDollar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.commission.PerDollar" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates a commission for a transaction based on a per dollar cost.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cost</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) &#8211; The flat amount of commissions paid per dollar of equities traded.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="slippage-models">
<h4>Slippage Models<a class="headerlink" href="#slippage-models" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="zipline.api.set_slippage">
<code class="descclassname">zipline.api.</code><code class="descname">set_slippage</code><span class="sig-paren">(</span><em>self</em>, <em>us_equities=None</em>, <em>us_futures=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.set_slippage" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the slippage models for the simulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>us_equities</strong> (<em>EquitySlippageModel</em>) &#8211; The slippage model to use for trading US equities.</li>
<li><strong>us_futures</strong> (<em>FutureSlippageModel</em>) &#8211; The slippage model to use for trading US futures.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.finance.slippage.SlippageModel" title="zipline.finance.slippage.SlippageModel"><code class="xref py py-class docutils literal"><span class="pre">zipline.finance.slippage.SlippageModel</span></code></a></p>
</div>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.slippage.SlippageModel">
<em class="property">class </em><code class="descclassname">zipline.finance.slippage.</code><code class="descname">SlippageModel</code><a class="reference internal" href="_modules/zipline/finance/slippage.html#SlippageModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.slippage.SlippageModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract interface for defining a slippage model.</p>
<dl class="method">
<dt id="zipline.finance.slippage.SlippageModel.process_order">
<code class="descname">process_order</code><span class="sig-paren">(</span><em>data</em>, <em>order</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/slippage.html#SlippageModel.process_order"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.slippage.SlippageModel.process_order" title="Permalink to this definition">¶</a></dt>
<dd><p>Process how orders get filled.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<a class="reference internal" href="#zipline.protocol.BarData" title="zipline.protocol.BarData"><em>BarData</em></a>) &#8211; The data for the given bar.</li>
<li><strong>order</strong> (<em>Order</em>) &#8211; The order to simulate.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>execution_price</strong> (<em>float</em>) &#8211;
The price to execute the trade at.</li>
<li><strong>execution_volume</strong> (<em>int</em>) &#8211;
The number of shares that could be filled. This may not be all
the shares ordered in which case the order will be filled over
multiple bars.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.finance.slippage.FixedSlippage">
<em class="property">class </em><code class="descclassname">zipline.finance.slippage.</code><code class="descname">FixedSlippage</code><span class="sig-paren">(</span><em>spread=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/slippage.html#FixedSlippage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.slippage.FixedSlippage" title="Permalink to this definition">¶</a></dt>
<dd><p>Model slippage as a fixed spread.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>spread</strong> (<em>float, optional</em>) &#8211; spread / 2 will be added to buys and subtracted from sells.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.slippage.VolumeShareSlippage">
<em class="property">class </em><code class="descclassname">zipline.finance.slippage.</code><code class="descname">VolumeShareSlippage</code><span class="sig-paren">(</span><em>volume_limit=0.025</em>, <em>price_impact=0.1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/slippage.html#VolumeShareSlippage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.slippage.VolumeShareSlippage" title="Permalink to this definition">¶</a></dt>
<dd><p>Model slippage as a function of the volume of contracts traded.</p>
</dd></dl>

</div>
</div>
<div class="section" id="pipeline">
<h3>Pipeline<a class="headerlink" href="#pipeline" title="Permalink to this headline">¶</a></h3>
<p>For more information, see <a class="reference internal" href="#pipeline-api"><span>Pipeline API</span></a></p>
<dl class="function">
<dt id="zipline.api.attach_pipeline">
<code class="descclassname">zipline.api.</code><code class="descname">attach_pipeline</code><span class="sig-paren">(</span><em>self</em>, <em>pipeline</em>, <em>name</em>, <em>chunks=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.attach_pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a pipeline to be computed at the start of each day.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pipeline</strong> (<a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline"><em>Pipeline</em></a>) &#8211; The pipeline to have computed.</li>
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The name of the pipeline.</li>
<li><strong>chunks</strong> (<em>int or iterator, optional</em>) &#8211; The number of days to compute pipeline results for. Increasing
this number will make it longer to get the first results but
may improve the total runtime of the simulation. If an iterator
is passed, we will run in chunks based on values of the itereator.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>pipeline</strong> &#8211;
Returns the pipeline that was attached unchanged.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline">Pipeline</a></p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.api.pipeline_output" title="zipline.api.pipeline_output"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.pipeline_output()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="zipline.api.pipeline_output">
<code class="descclassname">zipline.api.</code><code class="descname">pipeline_output</code><span class="sig-paren">(</span><em>self</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.pipeline_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the results of the pipeline that was attached with the name:
<code class="docutils literal"><span class="pre">name</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; Name of the pipeline for which results are requested.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>results</strong> &#8211;
DataFrame containing the results of the requested pipeline for
the current simulation date.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pd.DataFrame</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">NoSuchPipeline</span></code> &#8211;
Raised when no pipeline with the name <cite>name</cite> has been registered.</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.api.attach_pipeline" title="zipline.api.attach_pipeline"><code class="xref py py-func docutils literal"><span class="pre">zipline.api.attach_pipeline()</span></code></a>, <a class="reference internal" href="#zipline.pipeline.engine.PipelineEngine.run_pipeline" title="zipline.pipeline.engine.PipelineEngine.run_pipeline"><code class="xref py py-meth docutils literal"><span class="pre">zipline.pipeline.engine.PipelineEngine.run_pipeline()</span></code></a></p>
</div>
</dd></dl>

</div>
<div class="section" id="miscellaneous">
<h3>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="zipline.api.record">
<code class="descclassname">zipline.api.</code><code class="descname">record</code><span class="sig-paren">(</span><em>self</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.record" title="Permalink to this definition">¶</a></dt>
<dd><p>Track and record values each day.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>**kwargs</strong> &#8211; <p>The names and values to record.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>These values will appear in the performance packets and the performance
dataframe passed to <code class="docutils literal"><span class="pre">analyze</span></code> and returned from
<a class="reference internal" href="#zipline.run_algorithm" title="zipline.run_algorithm"><code class="xref py py-func docutils literal"><span class="pre">run_algorithm()</span></code></a>.</p>
</dd></dl>

<dl class="function">
<dt id="zipline.api.get_environment">
<code class="descclassname">zipline.api.</code><code class="descname">get_environment</code><span class="sig-paren">(</span><em>self</em>, <em>field='platform'</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.get_environment" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the execution environment.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>field</strong> (<em>{'platform', 'arena', 'data_frequency',</em>) &#8211; <p>&#8216;start&#8217;, &#8216;end&#8217;, &#8216;capital_base&#8217;, &#8216;platform&#8217;, &#8216;*&#8217;}
The field to query. The options have the following meanings:</p>
<blockquote>
<div><dl class="docutils">
<dt>arena <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The arena from the simulation parameters. This will normally
be <code class="docutils literal"><span class="pre">'backtest'</span></code> but some systems may use this distinguish
live trading from backtesting.</dd>
<dt>data_frequency <span class="classifier-delimiter">:</span> <span class="classifier">{&#8216;daily&#8217;, &#8216;minute&#8217;}</span></dt>
<dd>data_frequency tells the algorithm if it is running with
daily data or minute data.</dd>
<dt>start <span class="classifier-delimiter">:</span> <span class="classifier">datetime</span></dt>
<dd>The start date for the simulation.</dd>
<dt>end <span class="classifier-delimiter">:</span> <span class="classifier">datetime</span></dt>
<dd>The end date for the simulation.</dd>
<dt>capital_base <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The starting capital for the simulation.</dd>
<dt>platform <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The platform that the code is running on. By default this
will be the string &#8216;zipline&#8217;. This can allow algorithms to
know if they are running on the Quantopian platform instead.</dd>
</dl>
<ul>
<li><dl class="first docutils">
<dt>: dict[str -&gt; any]</dt>
<dd>Returns all of the fields in a dictionary.</dd>
</dl>
</li>
</ul>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>val</strong> &#8211;
The value for the field queried. See above for more information.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/dev/library/functions.html#any" title="(in Python v3.8)">any</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/dev/library/exceptions.html#ValueError" title="(in Python v3.8)"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code></a> &#8211;
Raised when <code class="docutils literal"><span class="pre">field</span></code> is not a valid option.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.api.fetch_csv">
<code class="descclassname">zipline.api.</code><code class="descname">fetch_csv</code><span class="sig-paren">(</span><em>self</em>, <em>url</em>, <em>pre_func=None</em>, <em>post_func=None</em>, <em>date_column='date'</em>, <em>date_format=None</em>, <em>timezone='UTC'</em>, <em>symbol=None</em>, <em>mask=True</em>, <em>symbol_column=None</em>, <em>special_params_checker=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.api.fetch_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch a csv from a remote url and register the data so that it is
queryable from the <code class="docutils literal"><span class="pre">data</span></code> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>url</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The url of the csv file to load.</li>
<li><strong>pre_func</strong> (<em>callable[pd.DataFrame -&gt; pd.DataFrame], optional</em>) &#8211; A callback to allow preprocessing the raw data returned from
fetch_csv before dates are paresed or symbols are mapped.</li>
<li><strong>post_func</strong> (<em>callable[pd.DataFrame -&gt; pd.DataFrame], optional</em>) &#8211; A callback to allow postprocessing of the data after dates and
symbols have been mapped.</li>
<li><strong>date_column</strong> (<em>str, optional</em>) &#8211; The name of the column in the preprocessed dataframe containing
datetime information to map the data.</li>
<li><strong>date_format</strong> (<em>str, optional</em>) &#8211; The format of the dates in the <code class="docutils literal"><span class="pre">date_column</span></code>. If not provided
<code class="docutils literal"><span class="pre">fetch_csv</span></code> will attempt to infer the format. For information
about the format of this string, see <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html#pandas.read_csv" title="(in pandas v0.22.0)"><code class="xref py py-func docutils literal"><span class="pre">pandas.read_csv()</span></code></a>.</li>
<li><strong>timezone</strong> (<em>tzinfo or str, optional</em>) &#8211; The timezone for the datetime in the <code class="docutils literal"><span class="pre">date_column</span></code>.</li>
<li><strong>symbol</strong> (<em>str, optional</em>) &#8211; If the data is about a new asset or index then this string will
be the name used to identify the values in <code class="docutils literal"><span class="pre">data</span></code>. For example,
one may use <code class="docutils literal"><span class="pre">fetch_csv</span></code> to load data for VIX, then this field
could be the string <code class="docutils literal"><span class="pre">'VIX'</span></code>.</li>
<li><strong>mask</strong> (<em>bool, optional</em>) &#8211; Drop any rows which cannot be symbol mapped.</li>
<li><strong>symbol_column</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; If the data is attaching some new attribute to each asset then this
argument is the name of the column in the preprocessed dataframe
containing the symbols. This will be used along with the date
information to map the sids in the asset finder.</li>
<li><strong>**kwargs</strong> &#8211; <p>Forwarded to <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html#pandas.read_csv" title="(in pandas v0.22.0)"><code class="xref py py-func docutils literal"><span class="pre">pandas.read_csv()</span></code></a>.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>csv_data_source</strong> &#8211;
A requests source that will pull data from the url specified.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">zipline.sources.requests_csv.PandasRequestsCSV</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="pipeline-api">
<span id="id9"></span><h2>Pipeline API<a class="headerlink" href="#pipeline-api" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="zipline.pipeline.Pipeline">
<em class="property">class </em><code class="descclassname">zipline.pipeline.</code><code class="descname">Pipeline</code><span class="sig-paren">(</span><em>columns=None</em>, <em>screen=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/pipeline.html#Pipeline"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.Pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>A Pipeline object represents a collection of named expressions to be
compiled and executed by a PipelineEngine.</p>
<p>A Pipeline has two important attributes: &#8216;columns&#8217;, a dictionary of named
<cite>Term</cite> instances, and &#8216;screen&#8217;, a Filter representing criteria for
including an asset in the results of a Pipeline.</p>
<p>To compute a pipeline in the context of a TradingAlgorithm, users must call
<code class="docutils literal"><span class="pre">attach_pipeline</span></code> in their <code class="docutils literal"><span class="pre">initialize</span></code> function to register that the
pipeline should be computed each trading day.  The outputs of a pipeline on
a given day can be accessed by calling <code class="docutils literal"><span class="pre">pipeline_output</span></code> in
<code class="docutils literal"><span class="pre">handle_data</span></code> or <code class="docutils literal"><span class="pre">before_trading_start</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>columns</strong> (<em>dict, optional</em>) &#8211; Initial columns.</li>
<li><strong>screen</strong> (<em>zipline.pipeline.term.Filter, optional</em>) &#8211; Initial screen.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="zipline.pipeline.Pipeline.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>term</em>, <em>name</em>, <em>overwrite=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/pipeline.html#Pipeline.add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.Pipeline.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a column.</p>
<p>The results of computing <cite>term</cite> will show up as a column in the
DataFrame produced by running this pipeline.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>column</strong> (<em>zipline.pipeline.Term</em>) &#8211; A Filter, Factor, or Classifier to add to the pipeline.</li>
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; Name of the column to add.</li>
<li><strong>overwrite</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) &#8211; Whether to overwrite the existing entry if we already have a column
named <cite>name</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.Pipeline.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/pipeline.html#Pipeline.remove"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.Pipeline.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a column.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The name of the column to remove.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/dev/library/exceptions.html#KeyError" title="(in Python v3.8)"><code class="xref py py-exc docutils literal"><span class="pre">KeyError</span></code></a> &#8211;
If <cite>name</cite> is not in self.columns.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>removed</strong> &#8211;
The removed term.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#zipline.pipeline.term.Term" title="zipline.pipeline.term.Term">zipline.pipeline.term.Term</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.Pipeline.set_screen">
<code class="descname">set_screen</code><span class="sig-paren">(</span><em>screen</em>, <em>overwrite=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/pipeline.html#Pipeline.set_screen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.Pipeline.set_screen" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a screen on this Pipeline.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filter</strong> (<em>zipline.pipeline.Filter</em>) &#8211; The filter to apply as a screen.</li>
<li><strong>overwrite</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) &#8211; Whether to overwrite any existing screen.  If overwrite is False
and self.screen is not None, we raise an error.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.Pipeline.show_graph">
<code class="descname">show_graph</code><span class="sig-paren">(</span><em>format='svg'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/pipeline.html#Pipeline.show_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.Pipeline.show_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Render this Pipeline as a DAG.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>format</strong> (<em>{'svg', 'png', 'jpeg'}</em>) &#8211; Image format to render with.  Default is &#8216;svg&#8217;.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.Pipeline.to_execution_plan">
<code class="descname">to_execution_plan</code><span class="sig-paren">(</span><em>screen_name</em>, <em>default_screen</em>, <em>all_dates</em>, <em>start_date</em>, <em>end_date</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/pipeline.html#Pipeline.to_execution_plan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.Pipeline.to_execution_plan" title="Permalink to this definition">¶</a></dt>
<dd><p>Compile into an ExecutionPlan.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>screen_name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; Name to supply for self.screen.</li>
<li><strong>default_screen</strong> (<a class="reference internal" href="#zipline.pipeline.term.Term" title="zipline.pipeline.term.Term"><em>zipline.pipeline.term.Term</em></a>) &#8211; Term to use as a screen if self.screen is None.</li>
<li><strong>all_dates</strong> (<em>pd.DatetimeIndex</em>) &#8211; A calendar of dates to use to calculate starts and ends for each
term.</li>
<li><strong>start_date</strong> (<em>pd.Timestamp</em>) &#8211; The first date of requested output.</li>
<li><strong>end_date</strong> (<em>pd.Timestamp</em>) &#8211; The last date of requested output.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.Pipeline.to_simple_graph">
<code class="descname">to_simple_graph</code><span class="sig-paren">(</span><em>screen_name</em>, <em>default_screen</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/pipeline.html#Pipeline.to_simple_graph"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.Pipeline.to_simple_graph" title="Permalink to this definition">¶</a></dt>
<dd><p>Compile into a simple TermGraph with no extra row metadata.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>screen_name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; Name to supply for self.screen.</li>
<li><strong>default_screen</strong> (<a class="reference internal" href="#zipline.pipeline.term.Term" title="zipline.pipeline.term.Term"><em>zipline.pipeline.term.Term</em></a>) &#8211; Term to use as a screen if self.screen is None.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="zipline.pipeline.Pipeline.columns">
<code class="descname">columns</code><a class="headerlink" href="#zipline.pipeline.Pipeline.columns" title="Permalink to this definition">¶</a></dt>
<dd><p>The columns registered with this pipeline.</p>
</dd></dl>

<dl class="attribute">
<dt id="zipline.pipeline.Pipeline.screen">
<code class="descname">screen</code><a class="headerlink" href="#zipline.pipeline.Pipeline.screen" title="Permalink to this definition">¶</a></dt>
<dd><p>The screen applied to the rows of this pipeline.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.CustomFactor">
<em class="property">class </em><code class="descclassname">zipline.pipeline.</code><code class="descname">CustomFactor</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#CustomFactor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.CustomFactor" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for user-defined Factors.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>inputs</strong> (<em>iterable, optional</em>) &#8211; An iterable of <cite>BoundColumn</cite> instances (e.g. USEquityPricing.close),
describing the data to load and pass to <cite>self.compute</cite>.  If this
argument is not passed to the CustomFactor constructor, we look for a
class-level attribute named <cite>inputs</cite>.</li>
<li><strong>outputs</strong> (<em>iterable[str], optional</em>) &#8211; An iterable of strings which represent the names of each output this
factor should compute and return. If this argument is not passed to the
CustomFactor constructor, we look for a class-level attribute named
<cite>outputs</cite>.</li>
<li><strong>window_length</strong> (<em>int, optional</em>) &#8211; Number of rows to pass for each input.  If this argument is not passed
to the CustomFactor constructor, we look for a class-level attribute
named <cite>window_length</cite>.</li>
<li><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; A Filter describing the assets on which we should compute each day.
Each call to <code class="docutils literal"><span class="pre">CustomFactor.compute</span></code> will only receive assets for
which <code class="docutils literal"><span class="pre">mask</span></code> produced True on the day for which compute is being
called.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Users implementing their own Factors should subclass CustomFactor and
implement a method named <cite>compute</cite> with the following signature:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">today</span><span class="p">,</span> <span class="n">assets</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="o">*</span><span class="n">inputs</span><span class="p">):</span>
   <span class="o">...</span>
</pre></div>
</div>
<p>On each simulation date, <code class="docutils literal"><span class="pre">compute</span></code> will be called with the current date,
an array of sids, an output array, and an input array for each expression
passed as inputs to the CustomFactor constructor.</p>
<p>The specific types of the values passed to <cite>compute</cite> are as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>today : np.datetime64[ns]
    Row label for the last row of all arrays passed as `inputs`.
assets : np.array[int64, ndim=1]
    Column labels for `out` and`inputs`.
out : np.array[self.dtype, ndim=1]
    Output array of the same shape as `assets`.  `compute` should write
    its desired return values into `out`. If multiple outputs are
    specified, `compute` should write its desired return values into
    `out.&lt;output_name&gt;` for each output name in `self.outputs`.
*inputs : tuple of np.array
    Raw data arrays corresponding to the values of `self.inputs`.
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">compute</span></code> functions should expect to be passed NaN values for dates on
which no data was available for an asset.  This may include dates on which
an asset did not yet exist.</p>
<p>For example, if a CustomFactor requires 10 rows of close price data, and
asset A started trading on Monday June 2nd, 2014, then on Tuesday, June
3rd, 2014, the column of input data for asset A will have 9 leading NaNs
for the preceding days on which data was not yet available.</p>
<p class="rubric">Examples</p>
<p>A CustomFactor with pre-declared defaults:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">TenDayRange</span><span class="p">(</span><span class="n">CustomFactor</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes the difference between the highest high in the last 10</span>
<span class="sd">    days and the lowest low.</span>

<span class="sd">    Pre-declares high and low as default inputs and `window_length` as</span>
<span class="sd">    10.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">USEquityPricing</span><span class="o">.</span><span class="n">high</span><span class="p">,</span> <span class="n">USEquityPricing</span><span class="o">.</span><span class="n">low</span><span class="p">]</span>
    <span class="n">window_length</span> <span class="o">=</span> <span class="mi">10</span>

    <span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">today</span><span class="p">,</span> <span class="n">assets</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">highs</span><span class="p">,</span> <span class="n">lows</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">nanmin</span><span class="p">,</span> <span class="n">nanmax</span>

        <span class="n">highest_highs</span> <span class="o">=</span> <span class="n">nanmax</span><span class="p">(</span><span class="n">highs</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">lowest_lows</span> <span class="o">=</span> <span class="n">nanmin</span><span class="p">(</span><span class="n">lows</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">out</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">highest_highs</span> <span class="o">-</span> <span class="n">lowest_lows</span>

<span class="c"># Doesn&#39;t require passing inputs or window_length because they&#39;re</span>
<span class="c"># pre-declared as defaults for the TenDayRange class.</span>
<span class="n">ten_day_range</span> <span class="o">=</span> <span class="n">TenDayRange</span><span class="p">()</span>
</pre></div>
</div>
<p>A CustomFactor without defaults:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MedianValue</span><span class="p">(</span><span class="n">CustomFactor</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes the median value of an arbitrary single input over an</span>
<span class="sd">    arbitrary window..</span>

<span class="sd">    Does not declare any defaults, so values for `window_length` and</span>
<span class="sd">    `inputs` must be passed explicitly on every construction.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">today</span><span class="p">,</span> <span class="n">assets</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">nanmedian</span>
        <span class="n">out</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">nanmedian</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c"># Values for `inputs` and `window_length` must be passed explicitly to</span>
<span class="c"># MedianValue.</span>
<span class="n">median_close10</span> <span class="o">=</span> <span class="n">MedianValue</span><span class="p">([</span><span class="n">USEquityPricing</span><span class="o">.</span><span class="n">close</span><span class="p">],</span> <span class="n">window_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">median_low15</span> <span class="o">=</span> <span class="n">MedianValue</span><span class="p">([</span><span class="n">USEquityPricing</span><span class="o">.</span><span class="n">low</span><span class="p">],</span> <span class="n">window_length</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
<p>A CustomFactor with multiple outputs:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MultipleOutputs</span><span class="p">(</span><span class="n">CustomFactor</span><span class="p">):</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">USEquityPricing</span><span class="o">.</span><span class="n">close</span><span class="p">]</span>
    <span class="n">outputs</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;alpha&#39;</span><span class="p">,</span> <span class="s">&#39;beta&#39;</span><span class="p">]</span>
    <span class="n">window_length</span> <span class="o">=</span> <span class="n">N</span>

    <span class="k">def</span> <span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">today</span><span class="p">,</span> <span class="n">assets</span><span class="p">,</span> <span class="n">out</span><span class="p">,</span> <span class="n">close</span><span class="p">):</span>
        <span class="n">computed_alpha</span><span class="p">,</span> <span class="n">computed_beta</span> <span class="o">=</span> <span class="n">some_function</span><span class="p">(</span><span class="n">close</span><span class="p">)</span>
        <span class="n">out</span><span class="o">.</span><span class="n">alpha</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">computed_alpha</span>
        <span class="n">out</span><span class="o">.</span><span class="n">beta</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">computed_beta</span>

<span class="c"># Each output is returned as its own Factor upon instantiation.</span>
<span class="n">alpha</span><span class="p">,</span> <span class="n">beta</span> <span class="o">=</span> <span class="n">MultipleOutputs</span><span class="p">()</span>

<span class="c"># Equivalently, we can create a single factor instance and access each</span>
<span class="c"># output as an attribute of that instance.</span>
<span class="n">multiple_outputs</span> <span class="o">=</span> <span class="n">MultipleOutputs</span><span class="p">()</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="n">multiple_outputs</span><span class="o">.</span><span class="n">alpha</span>
<span class="n">beta</span> <span class="o">=</span> <span class="n">multiple_outputs</span><span class="o">.</span><span class="n">beta</span>
</pre></div>
</div>
<p>Note: If a CustomFactor has multiple outputs, all outputs must have the
same dtype. For instance, in the example above, if alpha is a float then
beta must also be a float.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.filters.Filter">
<em class="property">class </em><code class="descclassname">zipline.pipeline.filters.</code><code class="descname">Filter</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/filter.html#Filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.filters.Filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipeline expression computing a boolean output.</p>
<p>Filters are most commonly useful for describing sets of assets to include
or exclude for some particular purpose. Many Pipeline API functions accept
a <code class="docutils literal"><span class="pre">mask</span></code> argument, which can be supplied a Filter indicating that only
values passing the Filter should be considered when performing the
requested computation. For example, <code class="xref py py-meth docutils literal"><span class="pre">zipline.pipeline.Factor.top()</span></code>
accepts a mask indicating that ranks should be computed only on assets that
passed the specified Filter.</p>
<p>The most common way to construct a Filter is via one of the comparison
operators (<code class="docutils literal"><span class="pre">&lt;</span></code>, <code class="docutils literal"><span class="pre">&lt;=</span></code>, <code class="docutils literal"><span class="pre">!=</span></code>, <code class="docutils literal"><span class="pre">eq</span></code>, <code class="docutils literal"><span class="pre">&gt;</span></code>, <code class="docutils literal"><span class="pre">&gt;=</span></code>) of
<code class="xref py py-class docutils literal"><span class="pre">Factor</span></code>. For example, a natural way to construct
a Filter for stocks with a 10-day VWAP less than $20.0 is to first
construct a Factor computing 10-day VWAP and compare it to the scalar value
20.0:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">zipline.pipeline.factors</span> <span class="kn">import</span> <span class="n">VWAP</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vwap_10</span> <span class="o">=</span> <span class="n">VWAP</span><span class="p">(</span><span class="n">window_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vwaps_under_20</span> <span class="o">=</span> <span class="p">(</span><span class="n">vwap_10</span> <span class="o">&lt;=</span> <span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
<p>Filters can also be constructed via comparisons between two Factors.  For
example, to construct a Filter producing True for asset/date pairs where
the asset&#8217;s 10-day VWAP was greater than it&#8217;s 30-day VWAP:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">short_vwap</span> <span class="o">=</span> <span class="n">VWAP</span><span class="p">(</span><span class="n">window_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">long_vwap</span> <span class="o">=</span> <span class="n">VWAP</span><span class="p">(</span><span class="n">window_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">higher_short_vwap</span> <span class="o">=</span> <span class="p">(</span><span class="n">short_vwap</span> <span class="o">&gt;</span> <span class="n">long_vwap</span><span class="p">)</span>
</pre></div>
</div>
<p>Filters can be combined via the <code class="docutils literal"><span class="pre">&amp;</span></code> (and) and <code class="docutils literal"><span class="pre">|</span></code> (or) operators.</p>
<p><code class="docutils literal"><span class="pre">&amp;</span></code>-ing together two filters produces a new Filter that produces True if
<strong>both</strong> of the inputs produced True.</p>
<p><code class="docutils literal"><span class="pre">|</span></code>-ing together two filters produces a new Filter that produces True if
<strong>either</strong> of its inputs produced True.</p>
<p>The <code class="docutils literal"><span class="pre">~</span></code> operator can be used to invert a Filter, swapping all True values
with Falses and vice-versa.</p>
<p>Filters may be set as the <code class="docutils literal"><span class="pre">screen</span></code> attribute of a Pipeline, indicating
asset/date pairs for which the filter produces False should be excluded
from the Pipeline&#8217;s output.  This is useful both for reducing noise in the
output of a Pipeline and for reducing memory consumption of Pipeline
results.</p>
<dl class="method">
<dt id="zipline.pipeline.filters.Filter.__and__">
<code class="descname">__and__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.filters.Filter.__and__" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary Operator: &#8216;&amp;&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.filters.Filter.__or__">
<code class="descname">__or__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.filters.Filter.__or__" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary Operator: &#8216;|&#8217;</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.Factor">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">Factor</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipeline API expression producing a numerical or date-valued output.</p>
<p>Factors are the most commonly-used Pipeline term, representing the result
of any computation producing a numerical result.</p>
<p>Factors can be combined, both with other Factors and with scalar values,
via any of the builtin mathematical operators (<code class="docutils literal"><span class="pre">+</span></code>, <code class="docutils literal"><span class="pre">-</span></code>, <code class="docutils literal"><span class="pre">*</span></code>, etc).
This makes it easy to write complex expressions that combine multiple
Factors.  For example, constructing a Factor that computes the average of
two other Factors is simply:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span> <span class="o">=</span> <span class="n">SomeFactor</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">f2</span> <span class="o">=</span> <span class="n">SomeOtherFactor</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">average</span> <span class="o">=</span> <span class="p">(</span><span class="n">f1</span> <span class="o">+</span> <span class="n">f2</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span>  
</pre></div>
</div>
<p>Factors can also be converted into <code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.Filter</span></code> objects
via comparison operators: (<code class="docutils literal"><span class="pre">&lt;</span></code>, <code class="docutils literal"><span class="pre">&lt;=</span></code>, <code class="docutils literal"><span class="pre">!=</span></code>, <code class="docutils literal"><span class="pre">eq</span></code>, <code class="docutils literal"><span class="pre">&gt;</span></code>, <code class="docutils literal"><span class="pre">&gt;=</span></code>).</p>
<p>There are many natural operators defined on Factors besides the basic
numerical operators. These include methods identifying missing or
extreme-valued outputs (isnull, notnull, isnan, notnan), methods for
normalizing outputs (rank, demean, zscore), and methods for constructing
Filters based on rank-order properties of results (top, bottom,
percentile_between).</p>
<dl class="method">
<dt id="zipline.pipeline.factors.Factor.eq">
<code class="descname">eq</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.factors.Factor.eq" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary Operator: &#8216;==&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.demean">
<code class="descname">demean</code><span class="sig-paren">(</span><em>mask=sentinel('NotSpecified')</em>, <em>groupby=sentinel('NotSpecified')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.demean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.demean" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a Factor that computes <code class="docutils literal"><span class="pre">self</span></code> and subtracts the mean from
row of the result.</p>
<p>If <code class="docutils literal"><span class="pre">mask</span></code> is supplied, ignore values where <code class="docutils literal"><span class="pre">mask</span></code> returns False
when computing row means, and output NaN anywhere the mask is False.</p>
<p>If <code class="docutils literal"><span class="pre">groupby</span></code> is supplied, compute by partitioning each row based on
the values produced by <code class="docutils literal"><span class="pre">groupby</span></code>, de-meaning the partitioned arrays,
and stitching the sub-results back together.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; A Filter defining values to ignore when computing means.</li>
<li><strong>groupby</strong> (<em>zipline.pipeline.Classifier, optional</em>) &#8211; A classifier defining partitions over which to compute means.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Let <code class="docutils literal"><span class="pre">f</span></code> be a Factor which would produce the following output:</p>
<div class="highlight-python"><div class="highlight"><pre>             AAPL   MSFT    MCD     BK
2017-03-13    1.0    2.0    3.0    4.0
2017-03-14    1.5    2.5    3.5    1.0
2017-03-15    2.0    3.0    4.0    1.5
2017-03-16    2.5    3.5    1.0    2.0
</pre></div>
</div>
<p>Let <code class="docutils literal"><span class="pre">c</span></code> be a Classifier producing the following output:</p>
<div class="highlight-python"><div class="highlight"><pre>             AAPL   MSFT    MCD     BK
2017-03-13      1      1      2      2
2017-03-14      1      1      2      2
2017-03-15      1      1      2      2
2017-03-16      1      1      2      2
</pre></div>
</div>
<p>Let <code class="docutils literal"><span class="pre">m</span></code> be a Filter producing the following output:</p>
<div class="highlight-python"><div class="highlight"><pre>             AAPL   MSFT    MCD     BK
2017-03-13  False   True   True   True
2017-03-14   True  False   True   True
2017-03-15   True   True  False   True
2017-03-16   True   True   True  False
</pre></div>
</div>
<p>Then <code class="docutils literal"><span class="pre">f.demean()</span></code> will subtract the mean from each row produced by
<code class="docutils literal"><span class="pre">f</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre>             AAPL   MSFT    MCD     BK
2017-03-13 -1.500 -0.500  0.500  1.500
2017-03-14 -0.625  0.375  1.375 -1.125
2017-03-15 -0.625  0.375  1.375 -1.125
2017-03-16  0.250  1.250 -1.250 -0.250
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">f.demean(mask=m)</span></code> will subtract the mean from each row, but means
will be calculated ignoring values on the diagonal, and NaNs will
written to the diagonal in the output. Diagonal values are ignored
because they are the locations where the mask <code class="docutils literal"><span class="pre">m</span></code> produced False.</p>
<div class="highlight-python"><div class="highlight"><pre>             AAPL   MSFT    MCD     BK
2017-03-13    NaN -1.000  0.000  1.000
2017-03-14 -0.500    NaN  1.500 -1.000
2017-03-15 -0.166  0.833    NaN -0.666
2017-03-16  0.166  1.166 -1.333    NaN
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">f.demean(groupby=c)</span></code> will subtract the group-mean of AAPL/MSFT and
MCD/BK from their respective entries.  The AAPL/MSFT are grouped
together because both assets always produce 1 in the output of the
classifier <code class="docutils literal"><span class="pre">c</span></code>.  Similarly, MCD/BK are grouped together because they
always produce 2.</p>
<div class="highlight-python"><div class="highlight"><pre>             AAPL   MSFT    MCD     BK
2017-03-13 -0.500  0.500 -0.500  0.500
2017-03-14 -0.500  0.500  1.250 -1.250
2017-03-15 -0.500  0.500  1.250 -1.250
2017-03-16 -0.500  0.500 -0.500  0.500
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">f.demean(mask=m,</span> <span class="pre">groupby=c)</span></code> will also subtract the group-mean of
AAPL/MSFT and MCD/BK, but means will be calculated ignoring values on
the diagonal , and NaNs will be written to the diagonal in the output.</p>
<div class="highlight-python"><div class="highlight"><pre>             AAPL   MSFT    MCD     BK
2017-03-13    NaN  0.000 -0.500  0.500
2017-03-14  0.000    NaN  1.250 -1.250
2017-03-15 -0.500  0.500    NaN  0.000
2017-03-16 -0.500  0.500  0.000    NaN
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>Mean is sensitive to the magnitudes of outliers. When working with
factor that can potentially produce large outliers, it is often useful
to use the <code class="docutils literal"><span class="pre">mask</span></code> parameter to discard values at the extremes of the
distribution:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">base</span> <span class="o">=</span> <span class="n">MyFactor</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">normalized</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">demean</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">mask</span><span class="o">=</span><span class="n">base</span><span class="o">.</span><span class="n">percentile_between</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">99</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>  
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">demean()</span></code> is only supported on Factors of dtype float64.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="(in pandas v0.22.0)"><code class="xref py py-meth docutils literal"><span class="pre">pandas.DataFrame.groupby()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.zscore">
<code class="descname">zscore</code><span class="sig-paren">(</span><em>mask=sentinel('NotSpecified')</em>, <em>groupby=sentinel('NotSpecified')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.zscore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.zscore" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a Factor that Z-Scores each day&#8217;s results.</p>
<p>The Z-Score of a row is defined as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(</span><span class="n">row</span> <span class="o">-</span> <span class="n">row</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span> <span class="o">/</span> <span class="n">row</span><span class="o">.</span><span class="n">stddev</span><span class="p">()</span>
</pre></div>
</div>
<p>If <code class="docutils literal"><span class="pre">mask</span></code> is supplied, ignore values where <code class="docutils literal"><span class="pre">mask</span></code> returns False
when computing row means and standard deviations, and output NaN
anywhere the mask is False.</p>
<p>If <code class="docutils literal"><span class="pre">groupby</span></code> is supplied, compute by partitioning each row based on
the values produced by <code class="docutils literal"><span class="pre">groupby</span></code>, z-scoring the partitioned arrays,
and stitching the sub-results back together.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; A Filter defining values to ignore when Z-Scoring.</li>
<li><strong>groupby</strong> (<em>zipline.pipeline.Classifier, optional</em>) &#8211; A classifier defining partitions over which to compute Z-Scores.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>zscored</strong> &#8211;
A Factor producing that z-scores the output of self.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">zipline.pipeline.Factor</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Mean and standard deviation are sensitive to the magnitudes of
outliers. When working with factor that can potentially produce large
outliers, it is often useful to use the <code class="docutils literal"><span class="pre">mask</span></code> parameter to discard
values at the extremes of the distribution:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">base</span> <span class="o">=</span> <span class="n">MyFactor</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">normalized</span> <span class="o">=</span> <span class="n">base</span><span class="o">.</span><span class="n">zscore</span><span class="p">(</span>
<span class="gp">... </span>   <span class="n">mask</span><span class="o">=</span><span class="n">base</span><span class="o">.</span><span class="n">percentile_between</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">99</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>  
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">zscore()</span></code> is only supported on Factors of dtype float64.</p>
<p class="rubric">Examples</p>
<p>See <a class="reference internal" href="#zipline.pipeline.factors.Factor.demean" title="zipline.pipeline.factors.Factor.demean"><code class="xref py py-meth docutils literal"><span class="pre">demean()</span></code></a> for an in-depth
example of the semantics for <code class="docutils literal"><span class="pre">mask</span></code> and <code class="docutils literal"><span class="pre">groupby</span></code>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="(in pandas v0.22.0)"><code class="xref py py-meth docutils literal"><span class="pre">pandas.DataFrame.groupby()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.rank">
<code class="descname">rank</code><span class="sig-paren">(</span><em>method='ordinal'</em>, <em>ascending=True</em>, <em>mask=sentinel('NotSpecified')</em>, <em>groupby=sentinel('NotSpecified')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.rank"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.rank" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new Factor representing the sorted rank of each column
within each row.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>method</strong> (<em>str, {'ordinal', 'min', 'max', 'dense', 'average'}</em>) &#8211; The method used to assign ranks to tied elements. See
<cite>scipy.stats.rankdata</cite> for a full description of the semantics for
each ranking method. Default is &#8216;ordinal&#8217;.</li>
<li><strong>ascending</strong> (<em>bool, optional</em>) &#8211; Whether to return sorted rank in ascending or descending order.
Default is True.</li>
<li><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; A Filter representing assets to consider when computing ranks.
If mask is supplied, ranks are computed ignoring any asset/date
pairs for which <cite>mask</cite> produces a value of False.</li>
<li><strong>groupby</strong> (<em>zipline.pipeline.Classifier, optional</em>) &#8211; A classifier defining partitions over which to perform ranking.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>ranks</strong> &#8211;
A new factor that will compute the ranking of the data produced by
<cite>self</cite>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">zipline.pipeline.factors.Rank</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The default value for <cite>method</cite> is different from the default for
<cite>scipy.stats.rankdata</cite>.  See that function&#8217;s documentation for a full
description of the valid inputs to <cite>method</cite>.</p>
<p>Missing or non-existent data on a given day will cause an asset to be
given a rank of NaN for that day.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.rankdata.html#scipy.stats.rankdata" title="(in SciPy v1.0.0)"><code class="xref py py-func docutils literal"><span class="pre">scipy.stats.rankdata()</span></code></a>, <code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.factors.factor.Rank</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.pearsonr">
<code class="descname">pearsonr</code><span class="sig-paren">(</span><em>target</em>, <em>correlation_length</em>, <em>mask=sentinel('NotSpecified')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.pearsonr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.pearsonr" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new Factor that computes rolling pearson correlation
coefficients between <cite>target</cite> and the columns of <cite>self</cite>.</p>
<p>This method can only be called on factors which are deemed safe for use
as inputs to other factors. This includes <cite>Returns</cite> and any factors
created from <cite>Factor.rank</cite> or <cite>Factor.zscore</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>target</strong> (<em>zipline.pipeline.Term with a numeric dtype</em>) &#8211; The term used to compute correlations against each column of data
produced by <cite>self</cite>. This may be a Factor, a BoundColumn or a Slice.
If <cite>target</cite> is two-dimensional, correlations are computed
asset-wise.</li>
<li><strong>correlation_length</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; Length of the lookback window over which to compute each
correlation coefficient.</li>
<li><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; A Filter describing which assets should have their correlation with
the target slice computed each day.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>correlations</strong> &#8211;
A new Factor that will compute correlations between <cite>target</cite> and
the columns of <cite>self</cite>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">zipline.pipeline.factors.RollingPearson</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Suppose we want to create a factor that computes the correlation
between AAPL&#8217;s 10-day returns and the 10-day returns of all other
assets, computing each correlation over 30 days. This can be achieved
by doing the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">returns</span> <span class="o">=</span> <span class="n">Returns</span><span class="p">(</span><span class="n">window_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">returns_slice</span> <span class="o">=</span> <span class="n">returns</span><span class="p">[</span><span class="n">sid</span><span class="p">(</span><span class="mi">24</span><span class="p">)]</span>
<span class="n">aapl_correlations</span> <span class="o">=</span> <span class="n">returns</span><span class="o">.</span><span class="n">pearsonr</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">returns_slice</span><span class="p">,</span> <span class="n">correlation_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This is equivalent to doing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">aapl_correlations</span> <span class="o">=</span> <span class="n">RollingPearsonOfReturns</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">sid</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span> <span class="n">returns_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">correlation_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.pearsonr.html#scipy.stats.pearsonr" title="(in SciPy v1.0.0)"><code class="xref py py-func docutils literal"><span class="pre">scipy.stats.pearsonr()</span></code></a>, <a class="reference internal" href="#zipline.pipeline.factors.RollingPearsonOfReturns" title="zipline.pipeline.factors.RollingPearsonOfReturns"><code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.factors.RollingPearsonOfReturns</span></code></a>, <code class="xref py py-meth docutils literal"><span class="pre">Factor.spearmanr()</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.spearmanr">
<code class="descname">spearmanr</code><span class="sig-paren">(</span><em>target</em>, <em>correlation_length</em>, <em>mask=sentinel('NotSpecified')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.spearmanr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.spearmanr" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new Factor that computes rolling spearman rank correlation
coefficients between <cite>target</cite> and the columns of <cite>self</cite>.</p>
<p>This method can only be called on factors which are deemed safe for use
as inputs to other factors. This includes <cite>Returns</cite> and any factors
created from <cite>Factor.rank</cite> or <cite>Factor.zscore</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>target</strong> (<em>zipline.pipeline.Term with a numeric dtype</em>) &#8211; The term used to compute correlations against each column of data
produced by <cite>self</cite>. This may be a Factor, a BoundColumn or a Slice.
If <cite>target</cite> is two-dimensional, correlations are computed
asset-wise.</li>
<li><strong>correlation_length</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; Length of the lookback window over which to compute each
correlation coefficient.</li>
<li><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; A Filter describing which assets should have their correlation with
the target slice computed each day.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>correlations</strong> &#8211;
A new Factor that will compute correlations between <cite>target</cite> and
the columns of <cite>self</cite>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">zipline.pipeline.factors.RollingSpearman</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Suppose we want to create a factor that computes the correlation
between AAPL&#8217;s 10-day returns and the 10-day returns of all other
assets, computing each correlation over 30 days. This can be achieved
by doing the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">returns</span> <span class="o">=</span> <span class="n">Returns</span><span class="p">(</span><span class="n">window_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">returns_slice</span> <span class="o">=</span> <span class="n">returns</span><span class="p">[</span><span class="n">sid</span><span class="p">(</span><span class="mi">24</span><span class="p">)]</span>
<span class="n">aapl_correlations</span> <span class="o">=</span> <span class="n">returns</span><span class="o">.</span><span class="n">spearmanr</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">returns_slice</span><span class="p">,</span> <span class="n">correlation_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This is equivalent to doing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">aapl_correlations</span> <span class="o">=</span> <span class="n">RollingSpearmanOfReturns</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">sid</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span> <span class="n">returns_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">correlation_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.spearmanr.html#scipy.stats.spearmanr" title="(in SciPy v1.0.0)"><code class="xref py py-func docutils literal"><span class="pre">scipy.stats.spearmanr()</span></code></a>, <a class="reference internal" href="#zipline.pipeline.factors.RollingSpearmanOfReturns" title="zipline.pipeline.factors.RollingSpearmanOfReturns"><code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.factors.RollingSpearmanOfReturns</span></code></a>, <code class="xref py py-meth docutils literal"><span class="pre">Factor.pearsonr()</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.linear_regression">
<code class="descname">linear_regression</code><span class="sig-paren">(</span><em>target</em>, <em>regression_length</em>, <em>mask=sentinel('NotSpecified')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.linear_regression"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.linear_regression" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new Factor that performs an ordinary least-squares
regression predicting the columns of <cite>self</cite> from <cite>target</cite>.</p>
<p>This method can only be called on factors which are deemed safe for use
as inputs to other factors. This includes <cite>Returns</cite> and any factors
created from <cite>Factor.rank</cite> or <cite>Factor.zscore</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>target</strong> (<em>zipline.pipeline.Term with a numeric dtype</em>) &#8211; The term to use as the predictor/independent variable in each
regression. This may be a Factor, a BoundColumn or a Slice. If
<cite>target</cite> is two-dimensional, regressions are computed asset-wise.</li>
<li><strong>regression_length</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; Length of the lookback window over which to compute each
regression.</li>
<li><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; A Filter describing which assets should be regressed with the
target slice each day.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>regressions</strong> &#8211;
A new Factor that will compute linear regressions of <cite>target</cite>
against the columns of <cite>self</cite>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">zipline.pipeline.factors.RollingLinearRegression</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Suppose we want to create a factor that regresses AAPL&#8217;s 10-day returns
against the 10-day returns of all other assets, computing each
regression over 30 days. This can be achieved by doing the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">returns</span> <span class="o">=</span> <span class="n">Returns</span><span class="p">(</span><span class="n">window_length</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">returns_slice</span> <span class="o">=</span> <span class="n">returns</span><span class="p">[</span><span class="n">sid</span><span class="p">(</span><span class="mi">24</span><span class="p">)]</span>
<span class="n">aapl_regressions</span> <span class="o">=</span> <span class="n">returns</span><span class="o">.</span><span class="n">linear_regression</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">returns_slice</span><span class="p">,</span> <span class="n">regression_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This is equivalent to doing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">aapl_regressions</span> <span class="o">=</span> <span class="n">RollingLinearRegressionOfReturns</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">sid</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span> <span class="n">returns_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">regression_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.linregress.html#scipy.stats.linregress" title="(in SciPy v1.0.0)"><code class="xref py py-func docutils literal"><span class="pre">scipy.stats.linregress()</span></code></a>, <a class="reference internal" href="#zipline.pipeline.factors.RollingLinearRegressionOfReturns" title="zipline.pipeline.factors.RollingLinearRegressionOfReturns"><code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.factors.RollingLinearRegressionOfReturns</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.winsorize">
<code class="descname">winsorize</code><span class="sig-paren">(</span><em>min_percentile</em>, <em>max_percentile</em>, <em>mask=sentinel('NotSpecified')</em>, <em>groupby=sentinel('NotSpecified')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.winsorize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.winsorize" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a Factor returns a winsorized row. Winsorizing changes values
ranked less than the minimum percentile to to value at the minimum
percentile. Similarly, values ranking above the maximum percentile will
be changed to the value at the maximum percentile. This is useful
when limiting the impact of extreme values.</p>
<p>If <code class="docutils literal"><span class="pre">mask</span></code> is supplied, ignore values where <code class="docutils literal"><span class="pre">mask</span></code> returns False
when computing row means and standard deviations, and output NaN
anywhere the mask is False.</p>
<p>If <code class="docutils literal"><span class="pre">groupby</span></code> is supplied, compute by partitioning each row based on
the values produced by <code class="docutils literal"><span class="pre">groupby</span></code>, winsorizing the partitioned arrays,
and stitching the sub-results back together.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>min_percentile</strong> (<em>float, int</em>) &#8211; Entries with values at or below this percentile will be replaced
with the (len(inp) * min_percentile)th lowest value. If low values
should not be clipped, use 0.</li>
<li><strong>max_percentile</strong> (<em>float, int</em>) &#8211; Entries with values at or above this percentile will be replaced
with the (len(inp) * max_percentile)th lowest value. If high
values should not be clipped, use 1.</li>
<li><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; A Filter defining values to ignore when winsorizing.</li>
<li><strong>groupby</strong> (<em>zipline.pipeline.Classifier, optional</em>) &#8211; A classifier defining partitions over which to winsorize.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>winsorized</strong> &#8211;
A Factor producing a winsorized version of self.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">zipline.pipeline.Factor</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">price</span> <span class="o">=</span> <span class="n">USEquityPricing</span><span class="o">.</span><span class="n">close</span><span class="o">.</span><span class="n">latest</span>
<span class="n">columns</span><span class="o">=</span><span class="p">{</span>
    <span class="s">&#39;PRICE&#39;</span><span class="p">:</span> <span class="n">price</span><span class="p">,</span>
    <span class="s">&#39;WINSOR_1: price.winsorize(</span>
        <span class="n">min_percentile</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">max_percentile</span><span class="o">=</span><span class="mf">0.75</span>
    <span class="p">),</span>
    <span class="s">&#39;WINSOR_2&#39;</span><span class="p">:</span> <span class="n">price</span><span class="o">.</span><span class="n">winsorize</span><span class="p">(</span>
        <span class="n">min_percentile</span><span class="o">=</span><span class="mf">0.50</span><span class="p">,</span> <span class="n">max_percentile</span><span class="o">=</span><span class="mf">1.0</span>
    <span class="p">),</span>
    <span class="s">&#39;WINSOR_3&#39;</span><span class="p">:</span> <span class="n">price</span><span class="o">.</span><span class="n">winsorize</span><span class="p">(</span>
        <span class="n">min_percentile</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">max_percentile</span><span class="o">=</span><span class="mf">0.5</span>
    <span class="p">),</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Given a pipeline with columns, defined above, the result for a
given day could look like:</p>
<div class="highlight-python"><div class="highlight"><pre>        &#39;PRICE&#39; &#39;WINSOR_1&#39; &#39;WINSOR_2&#39; &#39;WINSOR_3&#39;
Asset_1    1        2          4          3
Asset_2    2        2          4          3
Asset_3    3        3          4          3
Asset_4    4        4          4          4
Asset_5    5        5          5          4
Asset_6    6        5          5          4
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.mstats.winsorize.html#scipy.stats.mstats.winsorize" title="(in SciPy v1.0.0)"><code class="xref py py-func docutils literal"><span class="pre">scipy.stats.mstats.winsorize()</span></code></a>, <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="(in pandas v0.22.0)"><code class="xref py py-meth docutils literal"><span class="pre">pandas.DataFrame.groupby()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.quantiles">
<code class="descname">quantiles</code><span class="sig-paren">(</span><em>bins</em>, <em>mask=sentinel('NotSpecified')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.quantiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.quantiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a Classifier computing quantiles of the output of <code class="docutils literal"><span class="pre">self</span></code>.</p>
<p>Every non-NaN data point the output is labelled with an integer value
from 0 to (bins - 1).  NaNs are labelled with -1.</p>
<p>If <code class="docutils literal"><span class="pre">mask</span></code> is supplied, ignore data points in locations for which
<code class="docutils literal"><span class="pre">mask</span></code> produces False, and emit a label of -1 at those locations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>bins</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; Number of bins labels to compute.</li>
<li><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; Mask of values to ignore when computing quantiles.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>quantiles</strong> &#8211;
A Classifier producing integer labels ranging from 0 to (bins - 1).</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">zipline.pipeline.classifiers.Quantiles</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.quartiles">
<code class="descname">quartiles</code><span class="sig-paren">(</span><em>mask=sentinel('NotSpecified')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.quartiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.quartiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a Classifier computing quartiles over the output of <code class="docutils literal"><span class="pre">self</span></code>.</p>
<p>Every non-NaN data point the output is labelled with a value of either
0, 1, 2, or 3, corresponding to the first, second, third, or fourth
quartile over each row.  NaN data points are labelled with -1.</p>
<p>If <code class="docutils literal"><span class="pre">mask</span></code> is supplied, ignore data points in locations for which
<code class="docutils literal"><span class="pre">mask</span></code> produces False, and emit a label of -1 at those locations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; Mask of values to ignore when computing quartiles.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>quartiles</strong> &#8211;
A Classifier producing integer labels ranging from 0 to 3.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">zipline.pipeline.classifiers.Quantiles</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.quintiles">
<code class="descname">quintiles</code><span class="sig-paren">(</span><em>mask=sentinel('NotSpecified')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.quintiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.quintiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a Classifier computing quintile labels on <code class="docutils literal"><span class="pre">self</span></code>.</p>
<p>Every non-NaN data point the output is labelled with a value of either
0, 1, 2, or 3, 4, corresonding to quintiles over each row.  NaN data
points are labelled with -1.</p>
<p>If <code class="docutils literal"><span class="pre">mask</span></code> is supplied, ignore data points in locations for which
<code class="docutils literal"><span class="pre">mask</span></code> produces False, and emit a label of -1 at those locations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; Mask of values to ignore when computing quintiles.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>quintiles</strong> &#8211;
A Classifier producing integer labels ranging from 0 to 4.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">zipline.pipeline.classifiers.Quantiles</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.deciles">
<code class="descname">deciles</code><span class="sig-paren">(</span><em>mask=sentinel('NotSpecified')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.deciles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.deciles" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a Classifier computing decile labels on <code class="docutils literal"><span class="pre">self</span></code>.</p>
<p>Every non-NaN data point the output is labelled with a value from 0 to
9 corresonding to deciles over each row.  NaN data points are labelled
with -1.</p>
<p>If <code class="docutils literal"><span class="pre">mask</span></code> is supplied, ignore data points in locations for which
<code class="docutils literal"><span class="pre">mask</span></code> produces False, and emit a label of -1 at those locations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; Mask of values to ignore when computing deciles.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>deciles</strong> &#8211;
A Classifier producing integer labels ranging from 0 to 9.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">zipline.pipeline.classifiers.Quantiles</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.top">
<code class="descname">top</code><span class="sig-paren">(</span><em>N</em>, <em>mask=sentinel('NotSpecified')</em>, <em>groupby=sentinel('NotSpecified')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.top"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.top" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a Filter matching the top N asset values of self each day.</p>
<p>If <code class="docutils literal"><span class="pre">groupby</span></code> is supplied, returns a Filter matching the top N asset
values for each group.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>N</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; Number of assets passing the returned filter each day.</li>
<li><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; A Filter representing assets to consider when computing ranks.
If mask is supplied, top values are computed ignoring any
asset/date pairs for which <cite>mask</cite> produces a value of False.</li>
<li><strong>groupby</strong> (<em>zipline.pipeline.Classifier, optional</em>) &#8211; A classifier defining partitions over which to perform ranking.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>filter</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#zipline.pipeline.filters.Filter" title="zipline.pipeline.filters.Filter">zipline.pipeline.filters.Filter</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.bottom">
<code class="descname">bottom</code><span class="sig-paren">(</span><em>N</em>, <em>mask=sentinel('NotSpecified')</em>, <em>groupby=sentinel('NotSpecified')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.bottom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.bottom" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a Filter matching the bottom N asset values of self each day.</p>
<p>If <code class="docutils literal"><span class="pre">groupby</span></code> is supplied, returns a Filter matching the bottom N
asset values for each group.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>N</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; Number of assets passing the returned filter each day.</li>
<li><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; A Filter representing assets to consider when computing ranks.
If mask is supplied, bottom values are computed ignoring any
asset/date pairs for which <cite>mask</cite> produces a value of False.</li>
<li><strong>groupby</strong> (<em>zipline.pipeline.Classifier, optional</em>) &#8211; A classifier defining partitions over which to perform ranking.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>filter</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">zipline.pipeline.Filter</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.percentile_between">
<code class="descname">percentile_between</code><span class="sig-paren">(</span><em>min_percentile</em>, <em>max_percentile</em>, <em>mask=sentinel('NotSpecified')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.percentile_between"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.percentile_between" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new Filter representing entries from the output of this
Factor that fall within the percentile range defined by min_percentile
and max_percentile.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>min_percentile</strong> (<em>float [0.0, 100.0]</em>) &#8211; Return True for assets falling above this percentile in the data.</li>
<li><strong>max_percentile</strong> (<em>float [0.0, 100.0]</em>) &#8211; Return True for assets falling below this percentile in the data.</li>
<li><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; A Filter representing assets to consider when percentile
calculating thresholds.  If mask is supplied, percentile cutoffs
are computed each day using only assets for which <code class="docutils literal"><span class="pre">mask</span></code> returns
True.  Assets for which <code class="docutils literal"><span class="pre">mask</span></code> produces False will produce False
in the output of this Factor as well.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>out</strong> &#8211;
A new filter that will compute the specified percentile-range mask.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">zipline.pipeline.filters.PercentileFilter</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">zipline.pipeline.filters.filter.PercentileFilter()</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.isnan">
<code class="descname">isnan</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.isnan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.isnan" title="Permalink to this definition">¶</a></dt>
<dd><p>A Filter producing True for all values where this Factor is NaN.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>nanfilter</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#zipline.pipeline.filters.Filter" title="zipline.pipeline.filters.Filter">zipline.pipeline.filters.Filter</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.notnan">
<code class="descname">notnan</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.notnan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.notnan" title="Permalink to this definition">¶</a></dt>
<dd><p>A Filter producing True for values where this Factor is not NaN.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>nanfilter</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#zipline.pipeline.filters.Filter" title="zipline.pipeline.filters.Filter">zipline.pipeline.filters.Filter</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.isfinite">
<code class="descname">isfinite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Factor.isfinite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Factor.isfinite" title="Permalink to this definition">¶</a></dt>
<dd><p>A Filter producing True for values where this Factor is anything but
NaN, inf, or -inf.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.__add__">
<code class="descname">__add__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.factors.Factor.__add__" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary Operator: &#8216;+&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.__div__">
<code class="descname">__div__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.factors.Factor.__div__" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary Operator: &#8216;/&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.__ge__">
<code class="descname">__ge__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.factors.Factor.__ge__" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary Operator: &#8216;&gt;=&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.__gt__">
<code class="descname">__gt__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.factors.Factor.__gt__" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary Operator: &#8216;&gt;&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.__le__">
<code class="descname">__le__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.factors.Factor.__le__" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary Operator: &#8216;&lt;=&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.__lt__">
<code class="descname">__lt__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.factors.Factor.__lt__" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary Operator: &#8216;&lt;&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.__mod__">
<code class="descname">__mod__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.factors.Factor.__mod__" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary Operator: &#8216;%&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.__mul__">
<code class="descname">__mul__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.factors.Factor.__mul__" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary Operator: &#8216;*&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.__ne__">
<code class="descname">__ne__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.factors.Factor.__ne__" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary Operator: &#8216;!=&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.__pow__">
<code class="descname">__pow__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.factors.Factor.__pow__" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary Operator: &#8216;**&#8217;</p>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.factors.Factor.__sub__">
<code class="descname">__sub__</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.factors.Factor.__sub__" title="Permalink to this definition">¶</a></dt>
<dd><p>Binary Operator: &#8216;-&#8216;</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.term.Term">
<em class="property">class </em><code class="descclassname">zipline.pipeline.term.</code><code class="descname">Term</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/term.html#Term"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.term.Term" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for terms in a Pipeline API compute graph.</p>
<dl class="staticmethod">
<dt id="zipline.pipeline.term.Term.__new__">
<em class="property">static </em><code class="descname">__new__</code><span class="sig-paren">(</span><em>domain=sentinel('NotSpecified')</em>, <em>dtype=sentinel('NotSpecified')</em>, <em>missing_value=sentinel('NotSpecified')</em>, <em>window_safe=sentinel('NotSpecified')</em>, <em>ndim=sentinel('NotSpecified')</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/term.html#Term.__new__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.term.Term.__new__" title="Permalink to this definition">¶</a></dt>
<dd><p>Memoized constructor for Terms.</p>
<p>Caching previously-constructed Terms is useful because it allows us to
only compute equivalent sub-expressions once when traversing a Pipeline
dependency graph.</p>
<p>Caching previously-constructed Terms is <strong>sane</strong> because terms and
their inputs are both conceptually immutable.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.data.USEquityPricing">
<em class="property">class </em><code class="descclassname">zipline.pipeline.data.</code><code class="descname">USEquityPricing</code><a class="reference internal" href="_modules/zipline/pipeline/data/equity_pricing.html#USEquityPricing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.data.USEquityPricing" title="Permalink to this definition">¶</a></dt>
<dd><p>Dataset representing daily trading prices and volumes.</p>
<dl class="attribute">
<dt id="zipline.pipeline.data.USEquityPricing.close">
<code class="descname">close</code><em class="property"> = USEquityPricing.close::float64</em><a class="headerlink" href="#zipline.pipeline.data.USEquityPricing.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="zipline.pipeline.data.USEquityPricing.high">
<code class="descname">high</code><em class="property"> = USEquityPricing.high::float64</em><a class="headerlink" href="#zipline.pipeline.data.USEquityPricing.high" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="zipline.pipeline.data.USEquityPricing.low">
<code class="descname">low</code><em class="property"> = USEquityPricing.low::float64</em><a class="headerlink" href="#zipline.pipeline.data.USEquityPricing.low" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="zipline.pipeline.data.USEquityPricing.open">
<code class="descname">open</code><em class="property"> = USEquityPricing.open::float64</em><a class="headerlink" href="#zipline.pipeline.data.USEquityPricing.open" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="zipline.pipeline.data.USEquityPricing.volume">
<code class="descname">volume</code><em class="property"> = USEquityPricing.volume::float64</em><a class="headerlink" href="#zipline.pipeline.data.USEquityPricing.volume" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<div class="section" id="built-in-factors">
<h3>Built-in Factors<a class="headerlink" href="#built-in-factors" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="zipline.pipeline.factors.AverageDollarVolume">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">AverageDollarVolume</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#AverageDollarVolume"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.AverageDollarVolume" title="Permalink to this definition">¶</a></dt>
<dd><p>Average Daily Dollar Volume</p>
<p><strong>Default Inputs:</strong> [USEquityPricing.close, USEquityPricing.volume]</p>
<p><strong>Default Window Length:</strong> None</p>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.BollingerBands">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">BollingerBands</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/technical.html#BollingerBands"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.BollingerBands" title="Permalink to this definition">¶</a></dt>
<dd><p>Bollinger Bands technical indicator.
<a class="reference external" href="https://en.wikipedia.org/wiki/Bollinger_Bands">https://en.wikipedia.org/wiki/Bollinger_Bands</a></p>
<p><strong>Default Inputs:</strong> <a class="reference internal" href="#zipline.pipeline.data.USEquityPricing.close" title="zipline.pipeline.data.USEquityPricing.close"><code class="xref py py-data docutils literal"><span class="pre">zipline.pipeline.data.USEquityPricing.close</span></code></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>inputs</strong> (<em>length-1 iterable[BoundColumn]</em>) &#8211; The expression over which to compute bollinger bands.</li>
<li><strong>window_length</strong> (<em>int &gt; 0</em>) &#8211; Length of the lookback window over which to compute the bollinger
bands.</li>
<li><strong>k</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) &#8211; The number of standard deviations to add or subtract to create the
upper and lower bands.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.BusinessDaysSincePreviousEvent">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">BusinessDaysSincePreviousEvent</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/events.html#BusinessDaysSincePreviousEvent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.BusinessDaysSincePreviousEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract class for business days since a previous event.
Returns the number of <strong>business days</strong> (not trading days!) since
the most recent event date for each asset.</p>
<p>This doesn&#8217;t use trading days for symmetry with
BusinessDaysUntilNextEarnings.</p>
<p>Assets which announced or will announce the event today will produce a
value of 0.0. Assets that announced the event on the previous business
day will produce a value of 1.0.</p>
<p>Assets for which the event date is <cite>NaT</cite> will produce a value of <cite>NaN</cite>.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.BusinessDaysUntilNextEvent">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">BusinessDaysUntilNextEvent</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/events.html#BusinessDaysUntilNextEvent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.BusinessDaysUntilNextEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract class for business days since a next event.
Returns the number of <strong>business days</strong> (not trading days!) until
the next known event date for each asset.</p>
<p>This doesn&#8217;t use trading days because the trading calendar includes
information that may not have been available to the algorithm at the time
when <cite>compute</cite> is called.</p>
<p>For example, the NYSE closings September 11th 2001, would not have been
known to the algorithm on September 10th.</p>
<p>Assets that announced or will announce the event today will produce a value
of 0.0.  Assets that will announce the event on the next upcoming business
day will produce a value of 1.0.</p>
<p>Assets for which the event date is <cite>NaT</cite> will produce a value of <cite>NaN</cite>.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.ExponentialWeightedMovingAverage">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">ExponentialWeightedMovingAverage</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#ExponentialWeightedMovingAverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.ExponentialWeightedMovingAverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Exponentially Weighted Moving Average</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> None</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>inputs</strong> (<em>length-1 list/tuple of BoundColumn</em>) &#8211; The expression over which to compute the average.</li>
<li><strong>window_length</strong> (<em>int &gt; 0</em>) &#8211; Length of the lookback window over which to compute the average.</li>
<li><strong>decay_rate</strong> (<em>float, 0 &lt; decay_rate &lt;= 1</em>) &#8211; <p>Weighting factor by which to discount past observations.</p>
<p>When calculating historical averages, rows are multiplied by the
sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">decay_rate</span><span class="p">,</span> <span class="n">decay_rate</span> <span class="o">**</span> <span class="mi">2</span><span class="p">,</span> <span class="n">decay_rate</span> <span class="o">**</span> <span class="mi">3</span><span class="p">,</span> <span class="o">...</span>
</pre></div>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>This class can also be imported under the name <code class="docutils literal"><span class="pre">EWMA</span></code>.</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal"><span class="pre">pandas.ewma()</span></code></p>
</div>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.ExponentialWeightedMovingStdDev">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">ExponentialWeightedMovingStdDev</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#ExponentialWeightedMovingStdDev"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.ExponentialWeightedMovingStdDev" title="Permalink to this definition">¶</a></dt>
<dd><p>Exponentially Weighted Moving Standard Deviation</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> None</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>inputs</strong> (<em>length-1 list/tuple of BoundColumn</em>) &#8211; The expression over which to compute the average.</li>
<li><strong>window_length</strong> (<em>int &gt; 0</em>) &#8211; Length of the lookback window over which to compute the average.</li>
<li><strong>decay_rate</strong> (<em>float, 0 &lt; decay_rate &lt;= 1</em>) &#8211; <p>Weighting factor by which to discount past observations.</p>
<p>When calculating historical averages, rows are multiplied by the
sequence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">decay_rate</span><span class="p">,</span> <span class="n">decay_rate</span> <span class="o">**</span> <span class="mi">2</span><span class="p">,</span> <span class="n">decay_rate</span> <span class="o">**</span> <span class="mi">3</span><span class="p">,</span> <span class="o">...</span>
</pre></div>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<ul class="simple">
<li>This class can also be imported under the name <code class="docutils literal"><span class="pre">EWMSTD</span></code>.</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal"><span class="pre">pandas.ewmstd()</span></code></p>
</div>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.Latest">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">Latest</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/factor.html#Latest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Latest" title="Permalink to this definition">¶</a></dt>
<dd><p>Factor producing the most recently-known value of <cite>inputs[0]</cite> on each day.</p>
<p>The <cite>.latest</cite> attribute of DataSet columns returns an instance of this
Factor.</p>
</dd></dl>

<dl class="attribute">
<dt id="zipline.pipeline.factors.MACDSignal">
<code class="descclassname">zipline.pipeline.factors.</code><code class="descname">MACDSignal</code><a class="headerlink" href="#zipline.pipeline.factors.MACDSignal" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <code class="xref py py-class docutils literal"><span class="pre">MovingAverageConvergenceDivergenceSignal</span></code></p>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.MaxDrawdown">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">MaxDrawdown</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#MaxDrawdown"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.MaxDrawdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Max Drawdown</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> None</p>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.Returns">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">Returns</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#Returns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.Returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the percent change in close price over the given window_length.</p>
<p><strong>Default Inputs</strong>: [USEquityPricing.close]</p>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.RollingLinearRegressionOfReturns">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">RollingLinearRegressionOfReturns</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/statistical.html#RollingLinearRegressionOfReturns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.RollingLinearRegressionOfReturns" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform an ordinary least-squares regression predicting the returns of all
other assets on the given asset.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>target</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a>) &#8211; The asset to regress against all other assets.</li>
<li><strong>returns_length</strong> (<em>int &gt;= 2</em>) &#8211; Length of the lookback window over which to compute returns. Daily
returns require a window length of 2.</li>
<li><strong>regression_length</strong> (<em>int &gt;= 1</em>) &#8211; Length of the lookback window over which to compute each regression.</li>
<li><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; A Filter describing which assets should be regressed against the target
asset each day.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Computing this factor over many assets can be time consuming. It is
recommended that a mask be used in order to limit the number of assets over
which regressions are computed.</p>
<p>This factor is designed to return five outputs:</p>
<ul class="simple">
<li>alpha, a factor that computes the intercepts of each regression.</li>
<li>beta, a factor that computes the slopes of each regression.</li>
<li>r_value, a factor that computes the correlation coefficient of each
regression.</li>
<li>p_value, a factor that computes, for each regression, the two-sided
p-value for a hypothesis test whose null hypothesis is that the slope is
zero.</li>
<li>stderr, a factor that computes the standard error of the estimate of each
regression.</li>
</ul>
<p>For more help on factors with multiple outputs, see
<code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.factors.CustomFactor</span></code>.</p>
<p class="rubric">Examples</p>
<p>Let the following be example 10-day returns for three different assets:</p>
<div class="highlight-python"><div class="highlight"><pre>               SPY    MSFT     FB
2017-03-13    -.03     .03    .04
2017-03-14    -.02    -.03    .02
2017-03-15    -.01     .02    .01
2017-03-16       0    -.02    .01
2017-03-17     .01     .04   -.01
2017-03-20     .02    -.03   -.02
2017-03-21     .03     .01   -.02
2017-03-22     .04    -.02   -.02
</pre></div>
</div>
<p>Suppose we are interested in predicting each stock&#8217;s returns from SPY&#8217;s
over rolling 5-day look back windows. We can compute rolling regression
coefficients (alpha and beta) from 2017-03-17 to 2017-03-22 by doing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">regression_factor</span> <span class="o">=</span> <span class="n">RollingRegressionOfReturns</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">sid</span><span class="p">(</span><span class="mi">8554</span><span class="p">),</span>
    <span class="n">returns_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">regression_length</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="n">regression_factor</span><span class="o">.</span><span class="n">alpha</span>
<span class="n">beta</span> <span class="o">=</span> <span class="n">regression_factor</span><span class="o">.</span><span class="n">beta</span>
</pre></div>
</div>
<p>The result of computing <code class="docutils literal"><span class="pre">alpha</span></code> from 2017-03-17 to 2017-03-22 gives:</p>
<div class="highlight-python"><div class="highlight"><pre>               SPY    MSFT     FB
2017-03-17       0    .011   .003
2017-03-20       0   -.004   .004
2017-03-21       0    .007   .006
2017-03-22       0    .002   .008
</pre></div>
</div>
<p>And the result of computing <code class="docutils literal"><span class="pre">beta</span></code> from 2017-03-17 to 2017-03-22 gives:</p>
<div class="highlight-python"><div class="highlight"><pre>               SPY    MSFT     FB
2017-03-17       1      .3   -1.1
2017-03-20       1      .2     -1
2017-03-21       1     -.3     -1
2017-03-22       1     -.3    -.9
</pre></div>
</div>
<p>Note that SPY&#8217;s column for alpha is all 0&#8217;s and for beta is all 1&#8217;s, as the
regression line of SPY with itself is simply the function y = x.</p>
<p>To understand how each of the other values were calculated, take for
example MSFT&#8217;s <code class="docutils literal"><span class="pre">alpha</span></code> and <code class="docutils literal"><span class="pre">beta</span></code> values on 2017-03-17 (.011 and .3,
respectively). These values are the result of running a linear regression
predicting MSFT&#8217;s returns from SPY&#8217;s returns, using values starting at
2017-03-17 and looking back 5 days. That is, the regression was run with
x = [-.03, -.02, -.01, 0, .01] and y = [.03, -.03, .02, -.02, .04], and it
produced a slope of .3 and an intercept of .011.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.pipeline.factors.RollingPearsonOfReturns" title="zipline.pipeline.factors.RollingPearsonOfReturns"><code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.factors.RollingPearsonOfReturns</span></code></a>, <a class="reference internal" href="#zipline.pipeline.factors.RollingSpearmanOfReturns" title="zipline.pipeline.factors.RollingSpearmanOfReturns"><code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.factors.RollingSpearmanOfReturns</span></code></a></p>
</div>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.RollingPearsonOfReturns">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">RollingPearsonOfReturns</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/statistical.html#RollingPearsonOfReturns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.RollingPearsonOfReturns" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the Pearson product-moment correlation coefficient of the
returns of the given asset with the returns of all other assets.</p>
<p>Pearson correlation is what most people mean when they say &#8220;correlation
coefficient&#8221; or &#8220;R-value&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>target</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a>) &#8211; The asset to correlate with all other assets.</li>
<li><strong>returns_length</strong> (<em>int &gt;= 2</em>) &#8211; Length of the lookback window over which to compute returns. Daily
returns require a window length of 2.</li>
<li><strong>correlation_length</strong> (<em>int &gt;= 1</em>) &#8211; Length of the lookback window over which to compute each correlation
coefficient.</li>
<li><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; A Filter describing which assets should have their correlation with the
target asset computed each day.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Computing this factor over many assets can be time consuming. It is
recommended that a mask be used in order to limit the number of assets over
which correlations are computed.</p>
<p class="rubric">Examples</p>
<p>Let the following be example 10-day returns for three different assets:</p>
<div class="highlight-python"><div class="highlight"><pre>               SPY    MSFT     FB
2017-03-13    -.03     .03    .04
2017-03-14    -.02    -.03    .02
2017-03-15    -.01     .02    .01
2017-03-16       0    -.02    .01
2017-03-17     .01     .04   -.01
2017-03-20     .02    -.03   -.02
2017-03-21     .03     .01   -.02
2017-03-22     .04    -.02   -.02
</pre></div>
</div>
<p>Suppose we are interested in SPY&#8217;s rolling returns correlation with each
stock from 2017-03-17 to 2017-03-22, using a 5-day look back window (that
is, we calculate each correlation coefficient over 5 days of data). We can
achieve this by doing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">rolling_correlations</span> <span class="o">=</span> <span class="n">RollingPearsonOfReturns</span><span class="p">(</span>
    <span class="n">target</span><span class="o">=</span><span class="n">sid</span><span class="p">(</span><span class="mi">8554</span><span class="p">),</span>
    <span class="n">returns_length</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">correlation_length</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The result of computing <code class="docutils literal"><span class="pre">rolling_correlations</span></code> from 2017-03-17 to
2017-03-22 gives:</p>
<div class="highlight-python"><div class="highlight"><pre>               SPY   MSFT     FB
2017-03-17       1    .15   -.96
2017-03-20       1    .10   -.96
2017-03-21       1   -.16   -.94
2017-03-22       1   -.16   -.85
</pre></div>
</div>
<p>Note that the column for SPY is all 1&#8217;s, as the correlation of any data
series with itself is always 1. To understand how each of the other values
were calculated, take for example the .15 in MSFT&#8217;s column. This is the
correlation coefficient between SPY&#8217;s returns looking back from 2017-03-17
(-.03, -.02, -.01, 0, .01) and MSFT&#8217;s returns (.03, -.03, .02, -.02, .04).</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.pipeline.factors.RollingSpearmanOfReturns" title="zipline.pipeline.factors.RollingSpearmanOfReturns"><code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.factors.RollingSpearmanOfReturns</span></code></a>, <a class="reference internal" href="#zipline.pipeline.factors.RollingLinearRegressionOfReturns" title="zipline.pipeline.factors.RollingLinearRegressionOfReturns"><code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.factors.RollingLinearRegressionOfReturns</span></code></a></p>
</div>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.RollingSpearmanOfReturns">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">RollingSpearmanOfReturns</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/statistical.html#RollingSpearmanOfReturns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.RollingSpearmanOfReturns" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the Spearman rank correlation coefficient of the returns of the
given asset with the returns of all other assets.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>target</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>zipline.assets.Asset</em></a>) &#8211; The asset to correlate with all other assets.</li>
<li><strong>returns_length</strong> (<em>int &gt;= 2</em>) &#8211; Length of the lookback window over which to compute returns. Daily
returns require a window length of 2.</li>
<li><strong>correlation_length</strong> (<em>int &gt;= 1</em>) &#8211; Length of the lookback window over which to compute each correlation
coefficient.</li>
<li><strong>mask</strong> (<em>zipline.pipeline.Filter, optional</em>) &#8211; A Filter describing which assets should have their correlation with the
target asset computed each day.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Computing this factor over many assets can be time consuming. It is
recommended that a mask be used in order to limit the number of assets over
which correlations are computed.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.pipeline.factors.RollingPearsonOfReturns" title="zipline.pipeline.factors.RollingPearsonOfReturns"><code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.factors.RollingPearsonOfReturns</span></code></a>, <a class="reference internal" href="#zipline.pipeline.factors.RollingLinearRegressionOfReturns" title="zipline.pipeline.factors.RollingLinearRegressionOfReturns"><code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.factors.RollingLinearRegressionOfReturns</span></code></a></p>
</div>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.RSI">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">RSI</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/technical.html#RSI"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.RSI" title="Permalink to this definition">¶</a></dt>
<dd><p>Relative Strength Index</p>
<p><strong>Default Inputs</strong>: [USEquityPricing.close]</p>
<p><strong>Default Window Length</strong>: 15</p>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.SimpleMovingAverage">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">SimpleMovingAverage</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#SimpleMovingAverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.SimpleMovingAverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Average Value of an arbitrary column</p>
<p><strong>Default Inputs</strong>: None</p>
<p><strong>Default Window Length</strong>: None</p>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.VWAP">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">VWAP</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#VWAP"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.VWAP" title="Permalink to this definition">¶</a></dt>
<dd><p>Volume Weighted Average Price</p>
<p><strong>Default Inputs:</strong> [USEquityPricing.close, USEquityPricing.volume]</p>
<p><strong>Default Window Length:</strong> None</p>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.factors.WeightedAverageValue">
<em class="property">class </em><code class="descclassname">zipline.pipeline.factors.</code><code class="descname">WeightedAverageValue</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/factors/basic.html#WeightedAverageValue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.factors.WeightedAverageValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper for VWAP-like computations.</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> None</p>
</dd></dl>

</div>
<div class="section" id="built-in-filters">
<h3>Built-in Filters<a class="headerlink" href="#built-in-filters" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="zipline.pipeline.filters.All">
<em class="property">class </em><code class="descclassname">zipline.pipeline.filters.</code><code class="descname">All</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/smoothing.html#All"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.filters.All" title="Permalink to this definition">¶</a></dt>
<dd><p>A Filter requiring that assets produce True for <code class="docutils literal"><span class="pre">window_length</span></code>
consecutive days.</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> None</p>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.filters.AllPresent">
<em class="property">class </em><code class="descclassname">zipline.pipeline.filters.</code><code class="descname">AllPresent</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/filter.html#AllPresent"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.filters.AllPresent" title="Permalink to this definition">¶</a></dt>
<dd><p>Pipeline filter indicating input term has data for a given window.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.filters.Any">
<em class="property">class </em><code class="descclassname">zipline.pipeline.filters.</code><code class="descname">Any</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/smoothing.html#Any"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.filters.Any" title="Permalink to this definition">¶</a></dt>
<dd><p>A Filter requiring that assets produce True for at least one day in the
last <code class="docutils literal"><span class="pre">window_length</span></code> days.</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> None</p>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.filters.AtLeastN">
<em class="property">class </em><code class="descclassname">zipline.pipeline.filters.</code><code class="descname">AtLeastN</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/smoothing.html#AtLeastN"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.filters.AtLeastN" title="Permalink to this definition">¶</a></dt>
<dd><p>A Filter requiring that assets produce True for at least N days in the
last <code class="docutils literal"><span class="pre">window_length</span></code> days.</p>
<p><strong>Default Inputs:</strong> None</p>
<p><strong>Default Window Length:</strong> None</p>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.filters.SingleAsset">
<em class="property">class </em><code class="descclassname">zipline.pipeline.filters.</code><code class="descname">SingleAsset</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/filter.html#SingleAsset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.filters.SingleAsset" title="Permalink to this definition">¶</a></dt>
<dd><p>A Filter that computes to True only for the given asset.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.filters.StaticAssets">
<em class="property">class </em><code class="descclassname">zipline.pipeline.filters.</code><code class="descname">StaticAssets</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/filter.html#StaticAssets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.filters.StaticAssets" title="Permalink to this definition">¶</a></dt>
<dd><p>A Filter that computes True for a specific set of predetermined assets.</p>
<p><code class="docutils literal"><span class="pre">StaticAssets</span></code> is mostly useful for debugging or for interactively
computing pipeline terms for a fixed set of assets that are known ahead of
time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>assets</strong> (<em>iterable[Asset]</em>) &#8211; An iterable of assets for which to filter.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.filters.StaticSids">
<em class="property">class </em><code class="descclassname">zipline.pipeline.filters.</code><code class="descname">StaticSids</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/filters/filter.html#StaticSids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.filters.StaticSids" title="Permalink to this definition">¶</a></dt>
<dd><p>A Filter that computes True for a specific set of predetermined sids.</p>
<p><code class="docutils literal"><span class="pre">StaticSids</span></code> is mostly useful for debugging or for interactively
computing pipeline terms for a fixed set of sids that are known ahead of
time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sids</strong> (<em>iterable[int]</em>) &#8211; An iterable of sids for which to filter.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="pipeline-engine">
<h3>Pipeline Engine<a class="headerlink" href="#pipeline-engine" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="zipline.pipeline.engine.PipelineEngine">
<em class="property">class </em><code class="descclassname">zipline.pipeline.engine.</code><code class="descname">PipelineEngine</code><a class="reference internal" href="_modules/zipline/pipeline/engine.html#PipelineEngine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.engine.PipelineEngine" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="zipline.pipeline.engine.PipelineEngine.run_pipeline">
<code class="descname">run_pipeline</code><span class="sig-paren">(</span><em>pipeline</em>, <em>start_date</em>, <em>end_date</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.engine.PipelineEngine.run_pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute values for <code class="docutils literal"><span class="pre">pipeline</span></code> between <code class="docutils literal"><span class="pre">start_date</span></code> and
<code class="docutils literal"><span class="pre">end_date</span></code>.</p>
<p>Returns a DataFrame with a MultiIndex of (date, asset) pairs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pipeline</strong> (<a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline"><em>zipline.pipeline.Pipeline</em></a>) &#8211; The pipeline to run.</li>
<li><strong>start_date</strong> (<em>pd.Timestamp</em>) &#8211; Start date of the computed matrix.</li>
<li><strong>end_date</strong> (<em>pd.Timestamp</em>) &#8211; End date of the computed matrix.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p><strong>result</strong> &#8211;
A frame of computed results.</p>
<p>The <code class="docutils literal"><span class="pre">result</span></code> columns correspond to the entries of
<cite>pipeline.columns</cite>, which should be a dictionary mapping strings to
instances of <a class="reference internal" href="#zipline.pipeline.term.Term" title="zipline.pipeline.term.Term"><code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.term.Term</span></code></a>.</p>
<p>For each date between <code class="docutils literal"><span class="pre">start_date</span></code> and <code class="docutils literal"><span class="pre">end_date</span></code>, <code class="docutils literal"><span class="pre">result</span></code>
will contain a row for each asset that passed <cite>pipeline.screen</cite>.
A screen of <code class="docutils literal"><span class="pre">None</span></code> indicates that a row should be returned for
each asset that existed each day.</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DataFrame</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.engine.PipelineEngine.run_chunked_pipeline">
<code class="descname">run_chunked_pipeline</code><span class="sig-paren">(</span><em>pipeline</em>, <em>start_date</em>, <em>end_date</em>, <em>chunksize</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.pipeline.engine.PipelineEngine.run_chunked_pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute values for <cite>pipeline</cite> in number of days equal to <cite>chunksize</cite>
and return stitched up result. Computing in chunks is useful for
pipelines computed over a long period of time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pipeline</strong> (<a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline"><em>Pipeline</em></a>) &#8211; The pipeline to run.</li>
<li><strong>start_date</strong> (<em>pd.Timestamp</em>) &#8211; The start date to run the pipeline for.</li>
<li><strong>end_date</strong> (<em>pd.Timestamp</em>) &#8211; The end date to run the pipeline for.</li>
<li><strong>chunksize</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The number of days to execute at a time.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p><strong>result</strong> &#8211;
A frame of computed results.</p>
<p>The <code class="docutils literal"><span class="pre">result</span></code> columns correspond to the entries of
<cite>pipeline.columns</cite>, which should be a dictionary mapping strings to
instances of <a class="reference internal" href="#zipline.pipeline.term.Term" title="zipline.pipeline.term.Term"><code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.term.Term</span></code></a>.</p>
<p>For each date between <code class="docutils literal"><span class="pre">start_date</span></code> and <code class="docutils literal"><span class="pre">end_date</span></code>, <code class="docutils literal"><span class="pre">result</span></code>
will contain a row for each asset that passed <cite>pipeline.screen</cite>.
A screen of <code class="docutils literal"><span class="pre">None</span></code> indicates that a row should be returned for
each asset that existed each day.</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DataFrame</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.pipeline.engine.PipelineEngine.run_pipeline" title="zipline.pipeline.engine.PipelineEngine.run_pipeline"><code class="xref py py-meth docutils literal"><span class="pre">zipline.pipeline.engine.PipelineEngine.run_pipeline()</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.pipeline.engine.SimplePipelineEngine">
<em class="property">class </em><code class="descclassname">zipline.pipeline.engine.</code><code class="descname">SimplePipelineEngine</code><span class="sig-paren">(</span><em>get_loader</em>, <em>calendar</em>, <em>asset_finder</em>, <em>populate_initial_workspace=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/engine.html#SimplePipelineEngine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.engine.SimplePipelineEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>PipelineEngine class that computes each term independently.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>get_loader</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) &#8211; A function that is given a loadable term and returns a PipelineLoader
to use to retrieve raw data for that term.</li>
<li><strong>calendar</strong> (<em>DatetimeIndex</em>) &#8211; Array of dates to consider as trading days when computing a range
between a fixed start and end.</li>
<li><strong>asset_finder</strong> (<a class="reference internal" href="#zipline.assets.AssetFinder" title="zipline.assets.AssetFinder"><em>zipline.assets.AssetFinder</em></a>) &#8211; An AssetFinder instance.  We depend on the AssetFinder to determine
which assets are in the top-level universe at any point in time.</li>
<li><strong>populate_initial_workspace</strong> (<em>callable, optional</em>) &#8211; A function which will be used to populate the initial workspace when
computing a pipeline. See
<a class="reference internal" href="#zipline.pipeline.engine.default_populate_initial_workspace" title="zipline.pipeline.engine.default_populate_initial_workspace"><code class="xref py py-func docutils literal"><span class="pre">zipline.pipeline.engine.default_populate_initial_workspace()</span></code></a>
for more info.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.pipeline.engine.default_populate_initial_workspace" title="zipline.pipeline.engine.default_populate_initial_workspace"><code class="xref py py-func docutils literal"><span class="pre">zipline.pipeline.engine.default_populate_initial_workspace()</span></code></a></p>
</div>
<dl class="method">
<dt id="zipline.pipeline.engine.SimplePipelineEngine.run_pipeline">
<code class="descname">run_pipeline</code><span class="sig-paren">(</span><em>pipeline</em>, <em>start_date</em>, <em>end_date</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/engine.html#SimplePipelineEngine.run_pipeline"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.engine.SimplePipelineEngine.run_pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a pipeline.</p>
<p>The algorithm implemented here can be broken down into the following
stages:</p>
<ol class="arabic simple" start="0">
<li>Build a dependency graph of all terms in <cite>pipeline</cite>.  Topologically
sort the graph to determine an order in which we can compute the
terms.</li>
<li>Ask our AssetFinder for a &#8220;lifetimes matrix&#8221;, which should contain,
for each date between start_date and end_date, a boolean value for
each known asset indicating whether the asset existed on that date.</li>
<li>Compute each term in the dependency order determined in (0), caching
the results in a a dictionary to that they can be fed into future
terms.</li>
<li>For each date, determine the number of assets passing
pipeline.screen.  The sum, N, of all these values is the total
number of rows in our output frame, so we pre-allocate an output
array of length N for each factor in <cite>terms</cite>.</li>
<li>Fill in the arrays allocated in (3) by copying computed values from
our output cache into the corresponding rows.</li>
<li>Stick the values computed in (4) into a DataFrame and return it.</li>
</ol>
<p>Step 0 is performed by <code class="docutils literal"><span class="pre">Pipeline.to_graph</span></code>.
Step 1 is performed in <code class="docutils literal"><span class="pre">SimplePipelineEngine._compute_root_mask</span></code>.
Step 2 is performed in <code class="docutils literal"><span class="pre">SimplePipelineEngine.compute_chunk</span></code>.
Steps 3, 4, and 5 are performed in <code class="docutils literal"><span class="pre">SimplePiplineEngine._to_narrow</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pipeline</strong> (<a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline"><em>zipline.pipeline.Pipeline</em></a>) &#8211; The pipeline to run.</li>
<li><strong>start_date</strong> (<em>pd.Timestamp</em>) &#8211; Start date of the computed matrix.</li>
<li><strong>end_date</strong> (<em>pd.Timestamp</em>) &#8211; End date of the computed matrix.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p><strong>result</strong> &#8211;
A frame of computed results.</p>
<p>The <code class="docutils literal"><span class="pre">result</span></code> columns correspond to the entries of
<cite>pipeline.columns</cite>, which should be a dictionary mapping strings to
instances of <a class="reference internal" href="#zipline.pipeline.term.Term" title="zipline.pipeline.term.Term"><code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.term.Term</span></code></a>.</p>
<p>For each date between <code class="docutils literal"><span class="pre">start_date</span></code> and <code class="docutils literal"><span class="pre">end_date</span></code>, <code class="docutils literal"><span class="pre">result</span></code>
will contain a row for each asset that passed <cite>pipeline.screen</cite>.
A screen of <code class="docutils literal"><span class="pre">None</span></code> indicates that a row should be returned for
each asset that existed each day.</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DataFrame</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.pipeline.engine.PipelineEngine.run_pipeline" title="zipline.pipeline.engine.PipelineEngine.run_pipeline"><code class="xref py py-meth docutils literal"><span class="pre">zipline.pipeline.engine.PipelineEngine.run_pipeline()</span></code></a>, <a class="reference internal" href="#zipline.pipeline.engine.PipelineEngine.run_chunked_pipeline" title="zipline.pipeline.engine.PipelineEngine.run_chunked_pipeline"><code class="xref py py-meth docutils literal"><span class="pre">zipline.pipeline.engine.PipelineEngine.run_chunked_pipeline()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="zipline.pipeline.engine.SimplePipelineEngine.run_chunked_pipeline">
<code class="descname">run_chunked_pipeline</code><span class="sig-paren">(</span><em>pipeline</em>, <em>start_date</em>, <em>end_date</em>, <em>chunksize</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/engine.html#SimplePipelineEngine.run_chunked_pipeline"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.engine.SimplePipelineEngine.run_chunked_pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute values for <cite>pipeline</cite> in number of days equal to <cite>chunksize</cite>
and return stitched up result. Computing in chunks is useful for
pipelines computed over a long period of time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pipeline</strong> (<a class="reference internal" href="#zipline.pipeline.Pipeline" title="zipline.pipeline.Pipeline"><em>Pipeline</em></a>) &#8211; The pipeline to run.</li>
<li><strong>start_date</strong> (<em>pd.Timestamp</em>) &#8211; The start date to run the pipeline for.</li>
<li><strong>end_date</strong> (<em>pd.Timestamp</em>) &#8211; The end date to run the pipeline for.</li>
<li><strong>chunksize</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The number of days to execute at a time.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p><strong>result</strong> &#8211;
A frame of computed results.</p>
<p>The <code class="docutils literal"><span class="pre">result</span></code> columns correspond to the entries of
<cite>pipeline.columns</cite>, which should be a dictionary mapping strings to
instances of <a class="reference internal" href="#zipline.pipeline.term.Term" title="zipline.pipeline.term.Term"><code class="xref py py-class docutils literal"><span class="pre">zipline.pipeline.term.Term</span></code></a>.</p>
<p>For each date between <code class="docutils literal"><span class="pre">start_date</span></code> and <code class="docutils literal"><span class="pre">end_date</span></code>, <code class="docutils literal"><span class="pre">result</span></code>
will contain a row for each asset that passed <cite>pipeline.screen</cite>.
A screen of <code class="docutils literal"><span class="pre">None</span></code> indicates that a row should be returned for
each asset that existed each day.</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DataFrame</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.pipeline.engine.PipelineEngine.run_pipeline" title="zipline.pipeline.engine.PipelineEngine.run_pipeline"><code class="xref py py-meth docutils literal"><span class="pre">zipline.pipeline.engine.PipelineEngine.run_pipeline()</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="zipline.pipeline.engine.default_populate_initial_workspace">
<code class="descclassname">zipline.pipeline.engine.</code><code class="descname">default_populate_initial_workspace</code><span class="sig-paren">(</span><em>initial_workspace</em>, <em>root_mask_term</em>, <em>execution_plan</em>, <em>dates</em>, <em>assets</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/engine.html#default_populate_initial_workspace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.engine.default_populate_initial_workspace" title="Permalink to this definition">¶</a></dt>
<dd><p>The default implementation for <code class="docutils literal"><span class="pre">populate_initial_workspace</span></code>. This
function returns the <code class="docutils literal"><span class="pre">initial_workspace</span></code> argument without making any
modifications.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>initial_workspace</strong> (<em>dict[array-like]</em>) &#8211; The initial workspace before we have populated it with any cached
terms.</li>
<li><strong>root_mask_term</strong> (<a class="reference internal" href="#zipline.pipeline.term.Term" title="zipline.pipeline.term.Term"><em>Term</em></a>) &#8211; The root mask term, normally <code class="docutils literal"><span class="pre">AssetExists()</span></code>. This is needed to
compute the dates for individual terms.</li>
<li><strong>execution_plan</strong> (<em>ExecutionPlan</em>) &#8211; The execution plan for the pipeline being run.</li>
<li><strong>dates</strong> (<em>pd.DatetimeIndex</em>) &#8211; All of the dates being requested in this pipeline run including
the extra dates for look back windows.</li>
<li><strong>assets</strong> (<em>pd.Int64Index</em>) &#8211; All of the assets that exist for the window being computed.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>populated_initial_workspace</strong> &#8211;
The workspace to begin computations with.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">dict[term, array-like]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="data-loaders">
<h3>Data Loaders<a class="headerlink" href="#data-loaders" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="zipline.pipeline.loaders.equity_pricing_loader.USEquityPricingLoader">
<em class="property">class </em><code class="descclassname">zipline.pipeline.loaders.equity_pricing_loader.</code><code class="descname">USEquityPricingLoader</code><span class="sig-paren">(</span><em>raw_price_loader</em>, <em>adjustments_loader</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/loaders/equity_pricing_loader.html#USEquityPricingLoader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.loaders.equity_pricing_loader.USEquityPricingLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>PipelineLoader for US Equity Pricing data</p>
<p>Delegates loading of baselines and adjustments.</p>
<dl class="classmethod">
<dt id="zipline.pipeline.loaders.equity_pricing_loader.USEquityPricingLoader.from_files">
<em class="property">classmethod </em><code class="descname">from_files</code><span class="sig-paren">(</span><em>pricing_path</em>, <em>adjustments_path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/pipeline/loaders/equity_pricing_loader.html#USEquityPricingLoader.from_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.pipeline.loaders.equity_pricing_loader.USEquityPricingLoader.from_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a loader from a bcolz equity pricing dir and a SQLite
adjustments path.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>pricing_path</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; Path to a bcolz directory written by a BcolzDailyBarWriter.</li>
<li><strong>adjusments_path</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; Path to an adjusments db written by a SQLiteAdjustmentWriter.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="asset-metadata">
<h2>Asset Metadata<a class="headerlink" href="#asset-metadata" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="zipline.assets.Asset">
<em class="property">class </em><code class="descclassname">zipline.assets.</code><code class="descname">Asset</code><span class="sig-paren">(</span><em>int64_t sid</em>, <em>exchange</em>, <em>symbol=''</em>, <em>asset_name=''</em>, <em>start_date=None</em>, <em>end_date=None</em>, <em>first_traded=None</em>, <em>auto_close_date=None</em>, <em>exchange_full=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.assets.Asset" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="zipline.assets.Asset.first_traded">
<code class="descname">first_traded</code><a class="headerlink" href="#zipline.assets.Asset.first_traded" title="Permalink to this definition">¶</a></dt>
<dd><p>first_traded: object</p>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.Asset.from_dict">
<code class="descname">from_dict</code><span class="sig-paren">(</span><em>type cls</em>, <em>dict_</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.assets.Asset.from_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Build an Asset instance from a dict.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.Asset.is_alive_for_session">
<code class="descname">is_alive_for_session</code><span class="sig-paren">(</span><em>self</em>, <em>session_label</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.assets.Asset.is_alive_for_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns whether the asset is alive at the given dt.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>session_label</strong> (<em>pd.Timestamp</em>) &#8211; The desired session label to check. (midnight UTC)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>boolean</strong></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">whether the asset is alive at the given dt.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.Asset.is_exchange_open">
<code class="descname">is_exchange_open</code><span class="sig-paren">(</span><em>self</em>, <em>dt_minute</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.assets.Asset.is_exchange_open" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dt_minute</strong> (<em>pd.Timestamp (UTC, tz-aware)</em>) &#8211; The minute to check.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>boolean</strong></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">whether the asset&#8217;s exchange is open at the given minute.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.Asset.to_dict">
<code class="descname">to_dict</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.assets.Asset.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert to a python dict.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.assets.Equity">
<em class="property">class </em><code class="descclassname">zipline.assets.</code><code class="descname">Equity</code><a class="headerlink" href="#zipline.assets.Equity" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="zipline.assets.Equity.security_end_date">
<code class="descname">security_end_date</code><a class="headerlink" href="#zipline.assets.Equity.security_end_date" title="Permalink to this definition">¶</a></dt>
<dd><p>DEPRECATION: This property should be deprecated and is only present for
backwards compatibility</p>
</dd></dl>

<dl class="attribute">
<dt id="zipline.assets.Equity.security_name">
<code class="descname">security_name</code><a class="headerlink" href="#zipline.assets.Equity.security_name" title="Permalink to this definition">¶</a></dt>
<dd><p>DEPRECATION: This property should be deprecated and is only present for
backwards compatibility</p>
</dd></dl>

<dl class="attribute">
<dt id="zipline.assets.Equity.security_start_date">
<code class="descname">security_start_date</code><a class="headerlink" href="#zipline.assets.Equity.security_start_date" title="Permalink to this definition">¶</a></dt>
<dd><p>DEPRECATION: This property should be deprecated and is only present for
backwards compatibility</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.assets.Future">
<em class="property">class </em><code class="descclassname">zipline.assets.</code><code class="descname">Future</code><span class="sig-paren">(</span><em>int64_t sid</em>, <em>exchange</em>, <em>symbol=''</em>, <em>root_symbol=''</em>, <em>asset_name=''</em>, <em>start_date=None</em>, <em>end_date=None</em>, <em>notice_date=None</em>, <em>expiration_date=None</em>, <em>auto_close_date=None</em>, <em>first_traded=None</em>, <em>tick_size=''</em>, <em>float multiplier=1.0</em>, <em>exchange_full=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.assets.Future" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="zipline.assets.Future.to_dict">
<code class="descname">to_dict</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.assets.Future.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert to a python dict.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.assets.AssetConvertible">
<em class="property">class </em><code class="descclassname">zipline.assets.</code><code class="descname">AssetConvertible</code><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetConvertible"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetConvertible" title="Permalink to this definition">¶</a></dt>
<dd><p>ABC for types that are convertible to integer-representations of
Assets.</p>
<p>Includes Asset, six.string_types, and Integral</p>
</dd></dl>

</div>
<div class="section" id="trading-calendar-api">
<h2>Trading Calendar API<a class="headerlink" href="#trading-calendar-api" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="zipline.utils.calendars.get_calendar">
<code class="descclassname">zipline.utils.calendars.</code><code class="descname">get_calendar</code><span class="sig-paren">(</span><em>self</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.utils.calendars.get_calendar" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves an instance of an TradingCalendar whose name is given.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The name of the TradingCalendar to be retrieved.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>calendar</strong> &#8211;
The desired calendar.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#zipline.utils.calendars.TradingCalendar" title="zipline.utils.calendars.TradingCalendar">zipline.utils.calendars.TradingCalendar</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="zipline.utils.calendars.TradingCalendar">
<em class="property">class </em><code class="descclassname">zipline.utils.calendars.</code><code class="descname">TradingCalendar</code><span class="sig-paren">(</span><em>start=Timestamp('1990-01-01 00:00:00+0000'</em>, <em>tz='UTC')</em>, <em>end=Timestamp('2019-04-04 17:25:26.890511+0000'</em>, <em>tz='UTC')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar" title="Permalink to this definition">¶</a></dt>
<dd><p>An TradingCalendar represents the timing information of a single market
exchange.</p>
<p>The timing information is made up of two parts: sessions, and opens/closes.</p>
<p>A session represents a contiguous set of minutes, and has a label that is
midnight UTC. It is important to note that a session label should not be
considered a specific point in time, and that midnight UTC is just being
used for convenience.</p>
<p>For each session, we store the open and close time in UTC time.</p>
<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.execution_minutes_for_session">
<code class="descname">execution_minutes_for_session</code><span class="sig-paren">(</span><em>session_label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.execution_minutes_for_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.execution_minutes_for_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a session label, return the execution minutes for that session.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>session_label</strong> (<em>pd.Timestamp (midnight UTC)</em>) &#8211; A session label whose session&#8217;s minutes are desired.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">All the execution minutes for the given session.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pd.DateTimeIndex</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.is_open_on_minute">
<code class="descname">is_open_on_minute</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.is_open_on_minute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.is_open_on_minute" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a dt, return whether this exchange is open at the given dt.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dt</strong> (<em>pd.Timestamp</em>) &#8211; The dt for which to check if this exchange is open.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Whether the exchange is open on this dt.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/dev/library/functions.html#bool" title="(in Python v3.8)">bool</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.is_session">
<code class="descname">is_session</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.is_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.is_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a dt, returns whether it&#8217;s a valid session label.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dt</strong> (<em>pd.Timestamp</em>) &#8211; The dt that is being tested.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Whether the given dt is a valid session label.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/dev/library/functions.html#bool" title="(in Python v3.8)">bool</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.minute_index_to_session_labels">
<code class="descname">minute_index_to_session_labels</code><span class="sig-paren">(</span><em>index</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.minute_index_to_session_labels"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.minute_index_to_session_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a sorted DatetimeIndex of market minutes, return a
DatetimeIndex of the corresponding session labels.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>index</strong> (<em>pd.DatetimeIndex or pd.Series</em>) &#8211; The ordered list of market minutes we want session labels for.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The list of session labels corresponding to the given minutes.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pd.DatetimeIndex (UTC)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.minute_to_session_label">
<code class="descname">minute_to_session_label</code><span class="sig-paren">(</span><em>dt</em>, <em>direction='next'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.minute_to_session_label"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.minute_to_session_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a minute, get the label of its containing session.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dt</strong> (<em>pd.Timestamp or nanosecond offset</em>) &#8211; The dt for which to get the containing session.</li>
<li><strong>direction</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; <p>&#8220;next&#8221; (default) means that if the given dt is not part of a
session, return the label of the next session.</p>
<p>&#8220;previous&#8221; means that if the given dt is not part of a session,
return the label of the previous session.</p>
<p>&#8220;none&#8221; means that a KeyError will be raised if the given
dt is not part of a session.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The label of the containing session.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.Timestamp (midnight UTC)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.minutes_count_for_sessions_in_range">
<code class="descname">minutes_count_for_sessions_in_range</code><span class="sig-paren">(</span><em>start_session</em>, <em>end_session</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.minutes_count_for_sessions_in_range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.minutes_count_for_sessions_in_range" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>start_session</strong> (<em>pd.Timestamp</em>) &#8211; The first session.</li>
<li><strong>end_session</strong> (<em>pd.Timestamp</em>) &#8211; The last session.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>int</strong> &#8211;
between start_session and end_session, inclusive.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">The total number of minutes for the contiguous chunk of sessions.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.minutes_for_session">
<code class="descname">minutes_for_session</code><span class="sig-paren">(</span><em>session_label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.minutes_for_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.minutes_for_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a session label, return the minutes for that session.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>session_label</strong> (<em>pd.Timestamp (midnight UTC)</em>) &#8211; A session label whose session&#8217;s minutes are desired.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">All the minutes for the given session.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pd.DateTimeIndex</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.minutes_for_sessions_in_range">
<code class="descname">minutes_for_sessions_in_range</code><span class="sig-paren">(</span><em>start_session_label</em>, <em>end_session_label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.minutes_for_sessions_in_range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.minutes_for_sessions_in_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all the minutes for all the sessions from the given start
session label to the given end session label, inclusive.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>start_session_label</strong> (<em>pd.Timestamp</em>) &#8211; The label of the first session in the range.</li>
<li><strong>end_session_label</strong> (<em>pd.Timestamp</em>) &#8211; The label of the last session in the range.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The minutes in the desired range.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DatetimeIndex</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.minutes_in_range">
<code class="descname">minutes_in_range</code><span class="sig-paren">(</span><em>start_minute</em>, <em>end_minute</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.minutes_in_range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.minutes_in_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Given start and end minutes, return all the calendar minutes
in that range, inclusive.</p>
<p>Given minutes don&#8217;t need to be calendar minutes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>start_minute</strong> (<em>pd.Timestamp</em>) &#8211; The minute representing the start of the desired range.</li>
<li><strong>end_minute</strong> (<em>pd.Timestamp</em>) &#8211; The minute representing the end of the desired range.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The minutes in the desired range.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DatetimeIndex</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.next_close">
<code class="descname">next_close</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.next_close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.next_close" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a dt, returns the next close.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dt</strong> (<em>pd.Timestamp</em>) &#8211; The dt for which to get the next close.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The UTC timestamp of the next close.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pd.Timestamp</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.next_minute">
<code class="descname">next_minute</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.next_minute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.next_minute" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a dt, return the next exchange minute.  If the given dt is not
an exchange minute, returns the next exchange open.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dt</strong> (<em>pd.Timestamp</em>) &#8211; The dt for which to get the next exchange minute.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The next exchange minute.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pd.Timestamp</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.next_open">
<code class="descname">next_open</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.next_open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.next_open" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a dt, returns the next open.</p>
<p>If the given dt happens to be a session open, the next session&#8217;s open
will be returned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dt</strong> (<em>pd.Timestamp</em>) &#8211; The dt for which to get the next open.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The UTC timestamp of the next open.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pd.Timestamp</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.next_session_label">
<code class="descname">next_session_label</code><span class="sig-paren">(</span><em>session_label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.next_session_label"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.next_session_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a session label, returns the label of the next session.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>session_label</strong> (<em>pd.Timestamp</em>) &#8211; A session whose next session is desired.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The next session label (midnight UTC).</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pd.Timestamp</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Raises ValueError if the given session is the last session in this
calendar.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.open_and_close_for_session">
<code class="descname">open_and_close_for_session</code><span class="sig-paren">(</span><em>session_label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.open_and_close_for_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.open_and_close_for_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple of timestamps of the open and close of the session
represented by the given label.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>session_label</strong> (<em>pd.Timestamp</em>) &#8211; The session whose open and close are desired.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The open and close for the given session.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">(Timestamp, Timestamp)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.previous_close">
<code class="descname">previous_close</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.previous_close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.previous_close" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a dt, returns the previous close.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dt</strong> (<em>pd.Timestamp</em>) &#8211; The dt for which to get the previous close.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The UTC timestamp of the previous close.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pd.Timestamp</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.previous_minute">
<code class="descname">previous_minute</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.previous_minute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.previous_minute" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a dt, return the previous exchange minute.</p>
<p>Raises KeyError if the given timestamp is not an exchange minute.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dt</strong> (<em>pd.Timestamp</em>) &#8211; The dt for which to get the previous exchange minute.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The previous exchange minute.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pd.Timestamp</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.previous_open">
<code class="descname">previous_open</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.previous_open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.previous_open" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a dt, returns the previous open.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dt</strong> (<em>pd.Timestamp</em>) &#8211; The dt for which to get the previous open.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The UTC imestamp of the previous open.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pd.Timestamp</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.previous_session_label">
<code class="descname">previous_session_label</code><span class="sig-paren">(</span><em>session_label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.previous_session_label"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.previous_session_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a session label, returns the label of the previous session.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>session_label</strong> (<em>pd.Timestamp</em>) &#8211; A session whose previous session is desired.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The previous session label (midnight UTC).</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pd.Timestamp</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Raises ValueError if the given session is the first session in this
calendar.</p>
</dd></dl>

<dl class="attribute">
<dt id="zipline.utils.calendars.TradingCalendar.regular_holidays">
<code class="descname">regular_holidays</code><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.regular_holidays" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><ul class="simple">
<li><strong>pd.AbstractHolidayCalendar</strong> (<em>a calendar containing the regular holidays</em>)</li>
<li><em>for this calendar</em></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.session_distance">
<code class="descname">session_distance</code><span class="sig-paren">(</span><em>start_session_label</em>, <em>end_session_label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.session_distance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.session_distance" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a start and end session label, returns the distance between them.
For example, for three consecutive sessions Mon., Tues., and Wed,
<code class="docutils literal"><span class="pre">session_distance(Mon,</span> <span class="pre">Wed)</span></code> returns 3. If <code class="docutils literal"><span class="pre">start_session</span></code> is after
<code class="docutils literal"><span class="pre">end_session</span></code>, the value will be negated.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>start_session_label</strong> (<em>pd.Timestamp</em>) &#8211; The label of the start session.</li>
<li><strong>end_session_label</strong> (<em>pd.Timestamp</em>) &#8211; The label of the ending session inclusive.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The distance between the two sessions.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)">int</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.sessions_in_range">
<code class="descname">sessions_in_range</code><span class="sig-paren">(</span><em>start_session_label</em>, <em>end_session_label</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.sessions_in_range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.sessions_in_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Given start and end session labels, return all the sessions in that
range, inclusive.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>start_session_label</strong> (<em>pd.Timestamp (midnight UTC)</em>) &#8211; The label representing the first session of the desired range.</li>
<li><strong>end_session_label</strong> (<em>pd.Timestamp (midnight UTC)</em>) &#8211; The label representing the last session of the desired range.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The desired sessions.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DatetimeIndex</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.utils.calendars.TradingCalendar.sessions_window">
<code class="descname">sessions_window</code><span class="sig-paren">(</span><em>session_label</em>, <em>count</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/calendars/trading_calendar.html#TradingCalendar.sessions_window"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.sessions_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a session label and a window size, returns a list of sessions
of size <cite>count</cite> + 1, that either starts with the given session
(if <cite>count</cite> is positive) or ends with the given session (if <cite>count</cite> is
negative).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>session_label</strong> (<em>pd.Timestamp</em>) &#8211; The label of the initial session.</li>
<li><strong>count</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; Defines the length and the direction of the window.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The desired sessions.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DatetimeIndex</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="zipline.utils.calendars.TradingCalendar.special_closes">
<code class="descname">special_closes</code><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.special_closes" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of special close times and corresponding HolidayCalendars.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>list</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">List of (time, AbstractHolidayCalendar) tuples</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="zipline.utils.calendars.TradingCalendar.special_closes_adhoc">
<code class="descname">special_closes_adhoc</code><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.special_closes_adhoc" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>list</strong> &#8211;
closes that cannot be codified into rules.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">List of (time, DatetimeIndex) tuples that represent special</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="zipline.utils.calendars.TradingCalendar.special_opens">
<code class="descname">special_opens</code><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.special_opens" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of special open times and corresponding HolidayCalendars.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>list</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">List of (time, AbstractHolidayCalendar) tuples</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="zipline.utils.calendars.TradingCalendar.special_opens_adhoc">
<code class="descname">special_opens_adhoc</code><a class="headerlink" href="#zipline.utils.calendars.TradingCalendar.special_opens_adhoc" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>list</strong> &#8211;
closes that cannot be codified into rules.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">List of (time, DatetimeIndex) tuples that represent special</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="zipline.utils.calendars.register_calendar">
<code class="descclassname">zipline.utils.calendars.</code><code class="descname">register_calendar</code><span class="sig-paren">(</span><em>self</em>, <em>name</em>, <em>calendar</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.utils.calendars.register_calendar" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a calendar for retrieval by the get_calendar method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The key with which to register this calendar.</li>
<li><strong>calendar</strong> (<a class="reference internal" href="#zipline.utils.calendars.TradingCalendar" title="zipline.utils.calendars.TradingCalendar"><em>TradingCalendar</em></a>) &#8211; The calendar to be registered for retrieval.</li>
<li><strong>force</strong> (<em>bool, optional</em>) &#8211; If True, old calendars will be overwritten on a name collision.
If False, name collisions will raise an exception.
Default is False.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">CalendarNameCollision</span></code> &#8211;
If a calendar is already registered with the given calendar&#8217;s name.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.utils.calendars.register_calendar_type">
<code class="descclassname">zipline.utils.calendars.</code><code class="descname">register_calendar_type</code><span class="sig-paren">(</span><em>self</em>, <em>name</em>, <em>calendar_type</em>, <em>force=False</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.utils.calendars.register_calendar_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a calendar by type.</p>
<p>This is useful for registering a new calendar to be lazily instantiated
at some future point in time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The key with which to register this calendar.</li>
<li><strong>calendar_type</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#type" title="(in Python v3.8)"><em>type</em></a>) &#8211; The type of the calendar to register.</li>
<li><strong>force</strong> (<em>bool, optional</em>) &#8211; If True, old calendars will be overwritten on a name collision.
If False, name collisions will raise an exception.
Default is False.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">CalendarNameCollision</span></code> &#8211;
If a calendar is already registered with the given calendar&#8217;s name.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.utils.calendars.deregister_calendar">
<code class="descclassname">zipline.utils.calendars.</code><code class="descname">deregister_calendar</code><span class="sig-paren">(</span><em>self</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.utils.calendars.deregister_calendar" title="Permalink to this definition">¶</a></dt>
<dd><p>If a calendar is registered with the given name, it is de-registered.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cal_name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The name of the calendar to be deregistered.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.utils.calendars.clear_calendars">
<code class="descclassname">zipline.utils.calendars.</code><code class="descname">clear_calendars</code><span class="sig-paren">(</span><em>self</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.utils.calendars.clear_calendars" title="Permalink to this definition">¶</a></dt>
<dd><p>Deregisters all current registered calendars</p>
</dd></dl>

</div>
<div class="section" id="data-api">
<h2>Data API<a class="headerlink" href="#data-api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="writers">
<h3>Writers<a class="headerlink" href="#writers" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="zipline.data.minute_bars.BcolzMinuteBarWriter">
<em class="property">class </em><code class="descclassname">zipline.data.minute_bars.</code><code class="descname">BcolzMinuteBarWriter</code><span class="sig-paren">(</span><em>rootdir</em>, <em>calendar</em>, <em>start_session</em>, <em>end_session</em>, <em>minutes_per_day</em>, <em>default_ohlc_ratio=1000</em>, <em>ohlc_ratios_per_sid=None</em>, <em>expectedlen=1474200</em>, <em>write_metadata=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/minute_bars.html#BcolzMinuteBarWriter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.minute_bars.BcolzMinuteBarWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Class capable of writing minute OHLCV data to disk into bcolz format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rootdir</strong> (<a class="reference external" href="http://docs.python.org/dev/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a>) &#8211; Path to the root directory into which to write the metadata and
bcolz subdirectories.</li>
<li><strong>calendar</strong> (<em>zipline.utils.calendars.trading_calendar.TradingCalendar</em>) &#8211; The trading calendar on which to base the minute bars. Used to
get the market opens used as a starting point for each periodic
span of minutes in the index, and the market closes that
correspond with the market opens.</li>
<li><strong>minutes_per_day</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The number of minutes per each period. Defaults to 390, the mode
of minutes in NYSE trading days.</li>
<li><strong>start_session</strong> (<a class="reference external" href="http://docs.python.org/dev/library/datetime.html#module-datetime" title="(in Python v3.8)"><em>datetime</em></a>) &#8211; The first trading session in the data set.</li>
<li><strong>end_session</strong> (<a class="reference external" href="http://docs.python.org/dev/library/datetime.html#module-datetime" title="(in Python v3.8)"><em>datetime</em></a>) &#8211; The last trading session in the data set.</li>
<li><strong>default_ohlc_ratio</strong> (<em>int, optional</em>) &#8211; The default ratio by which to multiply the pricing data to
convert from floats to integers that fit within np.uint32. If
ohlc_ratios_per_sid is None or does not contain a mapping for a
given sid, this ratio is used. Default is OHLC_RATIO (1000).</li>
<li><strong>ohlc_ratios_per_sid</strong> (<em>dict, optional</em>) &#8211; A dict mapping each sid in the output to the ratio by which to
multiply the pricing data to convert the floats from floats to
an integer to fit within the np.uint32.</li>
<li><strong>expectedlen</strong> (<em>int, optional</em>) &#8211; <p>The expected length of the dataset, used when creating the initial
bcolz ctable.</p>
<p>If the expectedlen is not used, the chunksize and corresponding
compression ratios are not ideal.</p>
<p>Defaults to supporting 15 years of NYSE equity market data.
see: <a class="reference external" href="http://bcolz.blosc.org/opt-tips.html#informing-about-the-length-of-your-carrays">http://bcolz.blosc.org/opt-tips.html#informing-about-the-length-of-your-carrays</a> # noqa</p>
</li>
<li><strong>write_metadata</strong> (<em>bool, optional</em>) &#8211; If True, writes the minute bar metadata (on init of the writer).
If False, no metadata is written (existing metadata is
retained). Default is True.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Writes a bcolz directory for each individual sid, all contained within
a root directory which also contains metadata about the entire dataset.</p>
<p>Each individual asset&#8217;s data is stored as a bcolz table with a column for
each pricing field: (open, high, low, close, volume)</p>
<p>The open, high, low, and close columns are integers which are 1000 times
the quoted price, so that the data can represented and stored as an
np.uint32, supporting market prices quoted up to the thousands place.</p>
<p>volume is a np.uint32 with no mutation of the tens place.</p>
<p>The &#8216;index&#8217; for each individual asset are a repeating period of minutes of
length <cite>minutes_per_day</cite> starting from each market open.
The file format does not account for half-days.
e.g.:
2016-01-19 14:31
2016-01-19 14:32
...
2016-01-19 20:59
2016-01-19 21:00
2016-01-20 14:31
2016-01-20 14:32
...
2016-01-20 20:59
2016-01-20 21:00</p>
<p>All assets are written with a common &#8216;index&#8217;, sharing a common first
trading day. Assets that do not begin trading until after the first trading
day will have zeros for all pricing data up and until data is traded.</p>
<p>&#8216;index&#8217; is in quotations, because bcolz does not provide an index. The
format allows index-like behavior by writing each minute&#8217;s data into the
corresponding position of the enumeration of the aforementioned datetime
index.</p>
<p>The datetimes which correspond to each position are written in the metadata
as integer nanoseconds since the epoch into the <cite>minute_index</cite> key.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.data.minute_bars.BcolzMinuteBarReader" title="zipline.data.minute_bars.BcolzMinuteBarReader"><code class="xref py py-class docutils literal"><span class="pre">zipline.data.minute_bars.BcolzMinuteBarReader</span></code></a></p>
</div>
<dl class="method">
<dt id="zipline.data.minute_bars.BcolzMinuteBarWriter.data_len_for_day">
<code class="descname">data_len_for_day</code><span class="sig-paren">(</span><em>day</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/minute_bars.html#BcolzMinuteBarWriter.data_len_for_day"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.minute_bars.BcolzMinuteBarWriter.data_len_for_day" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of data points up to and including the
provided day.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.data.minute_bars.BcolzMinuteBarWriter.last_date_in_output_for_sid">
<code class="descname">last_date_in_output_for_sid</code><span class="sig-paren">(</span><em>sid</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/minute_bars.html#BcolzMinuteBarWriter.last_date_in_output_for_sid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.minute_bars.BcolzMinuteBarWriter.last_date_in_output_for_sid" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sid</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; Asset identifier.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>out</strong> &#8211;
The midnight of the last date written in to the output for the
given sid.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">pd.Timestamp</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="classmethod">
<dt id="zipline.data.minute_bars.BcolzMinuteBarWriter.open">
<em class="property">classmethod </em><code class="descname">open</code><span class="sig-paren">(</span><em>rootdir</em>, <em>end_session=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/minute_bars.html#BcolzMinuteBarWriter.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.minute_bars.BcolzMinuteBarWriter.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Open an existing <code class="docutils literal"><span class="pre">rootdir</span></code> for writing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>end_session</strong> (<em>Timestamp (optional)</em>) &#8211; When appending, the intended new <code class="docutils literal"><span class="pre">end_session</span></code>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.minute_bars.BcolzMinuteBarWriter.pad">
<code class="descname">pad</code><span class="sig-paren">(</span><em>sid</em>, <em>date</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/minute_bars.html#BcolzMinuteBarWriter.pad"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.minute_bars.BcolzMinuteBarWriter.pad" title="Permalink to this definition">¶</a></dt>
<dd><p>Fill sid container with empty data through the specified date.</p>
<p>If the last recorded trade is not at the close, then that day will be
padded with zeros until its close. Any day after that (up to and
including the specified date) will be padded with <cite>minute_per_day</cite>
worth of zeros</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sid</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The asset identifier for the data being written.</li>
<li><strong>date</strong> (<em>datetime-like</em>) &#8211; The date used to calculate how many slots to be pad.
The padding is done through the date, i.e. after the padding is
done the <cite>last_date_in_output_for_sid</cite> will be equal to <cite>date</cite></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.minute_bars.BcolzMinuteBarWriter.set_sid_attrs">
<code class="descname">set_sid_attrs</code><span class="sig-paren">(</span><em>sid</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/minute_bars.html#BcolzMinuteBarWriter.set_sid_attrs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.minute_bars.BcolzMinuteBarWriter.set_sid_attrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Write all the supplied kwargs as attributes of the sid&#8217;s file.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.data.minute_bars.BcolzMinuteBarWriter.sidpath">
<code class="descname">sidpath</code><span class="sig-paren">(</span><em>sid</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/minute_bars.html#BcolzMinuteBarWriter.sidpath"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.minute_bars.BcolzMinuteBarWriter.sidpath" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sid</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; Asset identifier.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>out</strong> &#8211;
Full path to the bcolz rootdir for the given sid.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/dev/library/string.html#module-string" title="(in Python v3.8)">string</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.minute_bars.BcolzMinuteBarWriter.truncate">
<code class="descname">truncate</code><span class="sig-paren">(</span><em>date</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/minute_bars.html#BcolzMinuteBarWriter.truncate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.minute_bars.BcolzMinuteBarWriter.truncate" title="Permalink to this definition">¶</a></dt>
<dd><p>Truncate data beyond this date in all ctables.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.data.minute_bars.BcolzMinuteBarWriter.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>data</em>, <em>show_progress=False</em>, <em>invalid_data_behavior='warn'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/minute_bars.html#BcolzMinuteBarWriter.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.minute_bars.BcolzMinuteBarWriter.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write a stream of minute data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> (<em>iterable[(int, pd.DataFrame)]</em>) &#8211; <p>The data to write. Each element should be a tuple of sid, data
where data has the following format:</p>
<blockquote>
<div><dl class="docutils">
<dt>columns <span class="classifier-delimiter">:</span> <span class="classifier">(&#8216;open&#8217;, &#8216;high&#8217;, &#8216;low&#8217;, &#8216;close&#8217;, &#8216;volume&#8217;)</span></dt>
<dd>open : float64
high : float64
low  : float64
close : float64
volume : float64|int64</dd>
</dl>
<p>index : DatetimeIndex of market minutes.</p>
</div></blockquote>
<p>A given sid may appear more than once in <code class="docutils literal"><span class="pre">data</span></code>; however,
the dates must be strictly increasing.</p>
</li>
<li><strong>show_progress</strong> (<em>bool, optional</em>) &#8211; Whether or not to show a progress bar while writing.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.minute_bars.BcolzMinuteBarWriter.write_cols">
<code class="descname">write_cols</code><span class="sig-paren">(</span><em>sid</em>, <em>dts</em>, <em>cols</em>, <em>invalid_data_behavior='warn'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/minute_bars.html#BcolzMinuteBarWriter.write_cols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.minute_bars.BcolzMinuteBarWriter.write_cols" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the OHLCV data for the given sid.
If there is no bcolz ctable yet created for the sid, create it.
If the length of the bcolz ctable is not exactly to the date before
the first day provided, fill the ctable with 0s up to that date.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sid</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The asset identifier for the data being written.</li>
<li><strong>dts</strong> (<em>datetime64 array</em>) &#8211; The dts corresponding to values in cols.</li>
<li><strong>cols</strong> (<em>dict of str -&gt; np.array</em>) &#8211; dict of market data with the following characteristics.
keys are (&#8216;open&#8217;, &#8216;high&#8217;, &#8216;low&#8217;, &#8216;close&#8217;, &#8216;volume&#8217;)
open : float64
high : float64
low  : float64
close : float64
volume : float64|int64</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.minute_bars.BcolzMinuteBarWriter.write_sid">
<code class="descname">write_sid</code><span class="sig-paren">(</span><em>sid</em>, <em>df</em>, <em>invalid_data_behavior='warn'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/minute_bars.html#BcolzMinuteBarWriter.write_sid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.minute_bars.BcolzMinuteBarWriter.write_sid" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the OHLCV data for the given sid.
If there is no bcolz ctable yet created for the sid, create it.
If the length of the bcolz ctable is not exactly to the date before
the first day provided, fill the ctable with 0s up to that date.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sid</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The asset identifer for the data being written.</li>
<li><strong>df</strong> (<em>pd.DataFrame</em>) &#8211; <p>DataFrame of market data with the following characteristics.
columns : (&#8216;open&#8217;, &#8216;high&#8217;, &#8216;low&#8217;, &#8216;close&#8217;, &#8216;volume&#8217;)</p>
<blockquote>
<div>open : float64
high : float64
low  : float64
close : float64
volume : float64|int64</div></blockquote>
<p>index : DatetimeIndex of market minutes.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.data.us_equity_pricing.BcolzDailyBarWriter">
<em class="property">class </em><code class="descclassname">zipline.data.us_equity_pricing.</code><code class="descname">BcolzDailyBarWriter</code><span class="sig-paren">(</span><em>filename</em>, <em>calendar</em>, <em>start_session</em>, <em>end_session</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/us_equity_pricing.html#BcolzDailyBarWriter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.us_equity_pricing.BcolzDailyBarWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Class capable of writing daily OHLCV data to disk in a format that can
be read efficiently by BcolzDailyOHLCVReader.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The location at which we should write our output.</li>
<li><strong>calendar</strong> (<em>zipline.utils.calendar.trading_calendar</em>) &#8211; Calendar to use to compute asset calendar offsets.</li>
<li><strong>start_session</strong> (<em>pd.Timestamp</em>) &#8211; Midnight UTC session label.</li>
<li><strong>end_session</strong> (<em>pd.Timestamp</em>) &#8211; Midnight UTC session label.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.data.us_equity_pricing.BcolzDailyBarReader" title="zipline.data.us_equity_pricing.BcolzDailyBarReader"><code class="xref py py-class docutils literal"><span class="pre">zipline.data.us_equity_pricing.BcolzDailyBarReader</span></code></a></p>
</div>
<dl class="method">
<dt id="zipline.data.us_equity_pricing.BcolzDailyBarWriter.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>data</em>, <em>assets=None</em>, <em>show_progress=False</em>, <em>invalid_data_behavior='warn'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/us_equity_pricing.html#BcolzDailyBarWriter.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.us_equity_pricing.BcolzDailyBarWriter.write" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>iterable[tuple[int, pandas.DataFrame or bcolz.ctable]]</em>) &#8211; The data chunks to write. Each chunk should be a tuple of sid
and the data for that asset.</li>
<li><strong>assets</strong> (<em>set[int], optional</em>) &#8211; The assets that should be in <code class="docutils literal"><span class="pre">data</span></code>. If this is provided
we will check <code class="docutils literal"><span class="pre">data</span></code> against the assets and provide better
progress information.</li>
<li><strong>show_progress</strong> (<em>bool, optional</em>) &#8211; Whether or not to show a progress bar while writing.</li>
<li><strong>invalid_data_behavior</strong> (<em>{'warn', 'raise', 'ignore'}, optional</em>) &#8211; What to do when data is encountered that is outside the range of
a uint32.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>table</strong> &#8211;
The newly-written table.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">bcolz.ctable</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.us_equity_pricing.BcolzDailyBarWriter.write_csvs">
<code class="descname">write_csvs</code><span class="sig-paren">(</span><em>asset_map</em>, <em>show_progress=False</em>, <em>invalid_data_behavior='warn'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/us_equity_pricing.html#BcolzDailyBarWriter.write_csvs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.us_equity_pricing.BcolzDailyBarWriter.write_csvs" title="Permalink to this definition">¶</a></dt>
<dd><p>Read CSVs as DataFrames from our asset map.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>asset_map</strong> (<em>dict[int -&gt; str]</em>) &#8211; A mapping from asset id to file path with the CSV data for that
asset</li>
<li><strong>show_progress</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) &#8211; Whether or not to show a progress bar while writing.</li>
<li><strong>invalid_data_behavior</strong> (<em>{'warn', 'raise', 'ignore'}</em>) &#8211; What to do when data is encountered that is outside the range of
a uint32.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.data.us_equity_pricing.SQLiteAdjustmentWriter">
<em class="property">class </em><code class="descclassname">zipline.data.us_equity_pricing.</code><code class="descname">SQLiteAdjustmentWriter</code><span class="sig-paren">(</span><em>conn_or_path</em>, <em>equity_daily_bar_reader</em>, <em>calendar</em>, <em>overwrite=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/us_equity_pricing.html#SQLiteAdjustmentWriter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.us_equity_pricing.SQLiteAdjustmentWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Writer for data to be read by SQLiteAdjustmentReader</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>conn_or_path</strong> (<em>str or sqlite3.Connection</em>) &#8211; A handle to the target sqlite database.</li>
<li><strong>equity_daily_bar_reader</strong> (<a class="reference internal" href="#zipline.data.us_equity_pricing.BcolzDailyBarReader" title="zipline.data.us_equity_pricing.BcolzDailyBarReader"><em>BcolzDailyBarReader</em></a>) &#8211; Daily bar reader to use for dividend writes.</li>
<li><strong>overwrite</strong> (<em>bool, optional, default=False</em>) &#8211; If True and conn_or_path is a string, remove any existing files at the
given path before connecting.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.data.us_equity_pricing.SQLiteAdjustmentReader" title="zipline.data.us_equity_pricing.SQLiteAdjustmentReader"><code class="xref py py-class docutils literal"><span class="pre">zipline.data.us_equity_pricing.SQLiteAdjustmentReader</span></code></a></p>
</div>
<dl class="method">
<dt id="zipline.data.us_equity_pricing.SQLiteAdjustmentWriter.calc_dividend_ratios">
<code class="descname">calc_dividend_ratios</code><span class="sig-paren">(</span><em>dividends</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/us_equity_pricing.html#SQLiteAdjustmentWriter.calc_dividend_ratios"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.us_equity_pricing.SQLiteAdjustmentWriter.calc_dividend_ratios" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the ratios to apply to equities when looking back at pricing
history so that the price is smoothed over the ex_date, when the market
adjusts to the change in equity value due to upcoming dividend.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A frame in the same format as splits and mergers, with keys
- sid, the id of the equity
- effective_date, the date in seconds on which to apply the ratio.
- ratio, the ratio to apply to backwards looking pricing data.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">DataFrame</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.us_equity_pricing.SQLiteAdjustmentWriter.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>splits=None</em>, <em>mergers=None</em>, <em>dividends=None</em>, <em>stock_dividends=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/us_equity_pricing.html#SQLiteAdjustmentWriter.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.us_equity_pricing.SQLiteAdjustmentWriter.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes data to a SQLite file to be read by SQLiteAdjustmentReader.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>splits</strong> (<em>pandas.DataFrame, optional</em>) &#8211; <p>Dataframe containing split data. The format of this dataframe is:
effective_date : int</p>
<blockquote>
<div>The date, represented as seconds since Unix epoch, on which
the adjustment should be applied.</div></blockquote>
<dl class="docutils">
<dt>ratio <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>A value to apply to all data earlier than the effective date.
For open, high, low, and close those values are multiplied by
the ratio. Volume is divided by this value.</dd>
<dt>sid <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>The asset id associated with this adjustment.</dd>
</dl>
</li>
<li><strong>mergers</strong> (<em>pandas.DataFrame, optional</em>) &#8211; <p>DataFrame containing merger data. The format of this dataframe is:
effective_date : int</p>
<blockquote>
<div>The date, represented as seconds since Unix epoch, on which
the adjustment should be applied.</div></blockquote>
<dl class="docutils">
<dt>ratio <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>A value to apply to all data earlier than the effective date.
For open, high, low, and close those values are multiplied by
the ratio. Volume is unaffected.</dd>
<dt>sid <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>The asset id associated with this adjustment.</dd>
</dl>
</li>
<li><strong>dividends</strong> (<em>pandas.DataFrame, optional</em>) &#8211; <dl class="docutils">
<dt>DataFrame containing dividend data. The format of the dataframe is:</dt>
<dd><dl class="first last docutils">
<dt>sid <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>The asset id associated with this adjustment.</dd>
<dt>ex_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime64</span></dt>
<dd>The date on which an equity must be held to be eligible to
receive payment.</dd>
<dt>declared_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime64</span></dt>
<dd>The date on which the dividend is announced to the public.</dd>
<dt>pay_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime64</span></dt>
<dd>The date on which the dividend is distributed.</dd>
<dt>record_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime64</span></dt>
<dd>The date on which the stock ownership is checked to determine
distribution of dividends.</dd>
<dt>amount <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The cash amount paid for each share.</dd>
</dl>
</dd>
</dl>
<p>Dividend ratios are calculated as:
<code class="docutils literal"><span class="pre">1.0</span> <span class="pre">-</span> <span class="pre">(dividend_value</span> <span class="pre">/</span> <span class="pre">&quot;close</span> <span class="pre">on</span> <span class="pre">day</span> <span class="pre">prior</span> <span class="pre">to</span> <span class="pre">ex_date&quot;)</span></code></p>
</li>
<li><strong>stock_dividends</strong> (<em>pandas.DataFrame, optional</em>) &#8211; <p>DataFrame containing stock dividend data. The format of the
dataframe is:</p>
<blockquote>
<div><dl class="docutils">
<dt>sid <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>The asset id associated with this adjustment.</dd>
<dt>ex_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime64</span></dt>
<dd>The date on which an equity must be held to be eligible to
receive payment.</dd>
<dt>declared_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime64</span></dt>
<dd>The date on which the dividend is announced to the public.</dd>
<dt>pay_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime64</span></dt>
<dd>The date on which the dividend is distributed.</dd>
<dt>record_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime64</span></dt>
<dd>The date on which the stock ownership is checked to determine
distribution of dividends.</dd>
<dt>payment_sid <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>The asset id of the shares that should be paid instead of
cash.</dd>
<dt>ratio <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The ratio of currently held shares in the held sid that
should be paid with new shares of the payment_sid.</dd>
</dl>
</div></blockquote>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.data.us_equity_pricing.SQLiteAdjustmentReader" title="zipline.data.us_equity_pricing.SQLiteAdjustmentReader"><code class="xref py py-meth docutils literal"><span class="pre">zipline.data.us_equity_pricing.SQLiteAdjustmentReader()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="zipline.data.us_equity_pricing.SQLiteAdjustmentWriter.write_dividend_data">
<code class="descname">write_dividend_data</code><span class="sig-paren">(</span><em>dividends</em>, <em>stock_dividends=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/us_equity_pricing.html#SQLiteAdjustmentWriter.write_dividend_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.us_equity_pricing.SQLiteAdjustmentWriter.write_dividend_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Write both dividend payouts and the derived price adjustment ratios.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.data.us_equity_pricing.SQLiteAdjustmentWriter.write_dividend_payouts">
<code class="descname">write_dividend_payouts</code><span class="sig-paren">(</span><em>frame</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/us_equity_pricing.html#SQLiteAdjustmentWriter.write_dividend_payouts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.us_equity_pricing.SQLiteAdjustmentWriter.write_dividend_payouts" title="Permalink to this definition">¶</a></dt>
<dd><p>Write dividend payout data to SQLite table <cite>dividend_payouts</cite>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.assets.AssetDBWriter">
<em class="property">class </em><code class="descclassname">zipline.assets.</code><code class="descname">AssetDBWriter</code><span class="sig-paren">(</span><em>engine</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/asset_writer.html#AssetDBWriter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetDBWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Class used to write data to an assets db.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>engine</strong> (<em>Engine or str</em>) &#8211; An SQLAlchemy engine or path to a SQL database.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="zipline.assets.AssetDBWriter.init_db">
<code class="descname">init_db</code><span class="sig-paren">(</span><em>txn=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/asset_writer.html#AssetDBWriter.init_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetDBWriter.init_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to database and create tables.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>txn</strong> (<em>sa.engine.Connection, optional</em>) &#8211; The transaction to execute in. If this is not provided, a new
transaction will be started with the engine provided.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>metadata</strong> &#8211;
The metadata that describes the new assets db.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">sa.MetaData</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.AssetDBWriter.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>equities=None</em>, <em>futures=None</em>, <em>exchanges=None</em>, <em>root_symbols=None</em>, <em>equity_supplementary_mappings=None</em>, <em>chunk_size=999</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/asset_writer.html#AssetDBWriter.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetDBWriter.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write asset metadata to a sqlite database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>equities</strong> (<em>pd.DataFrame, optional</em>) &#8211; <p>The equity metadata. The columns for this dataframe are:</p>
<blockquote>
<div><dl class="docutils">
<dt>symbol <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The ticker symbol for this equity.</dd>
<dt>asset_name <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The full name for this asset.</dd>
<dt>start_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime</span></dt>
<dd>The date when this asset was created.</dd>
<dt>end_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime, optional</span></dt>
<dd>The last date we have trade data for this asset.</dd>
<dt>first_traded <span class="classifier-delimiter">:</span> <span class="classifier">datetime, optional</span></dt>
<dd>The first date we have trade data for this asset.</dd>
<dt>auto_close_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime, optional</span></dt>
<dd>The date on which to close any positions in this asset.</dd>
<dt>exchange <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The exchange where this asset is traded.</dd>
</dl>
</div></blockquote>
<p>The index of this dataframe should contain the sids.</p>
</li>
<li><strong>futures</strong> (<em>pd.DataFrame, optional</em>) &#8211; <p>The future contract metadata. The columns for this dataframe are:</p>
<dl class="docutils">
<dt>symbol <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The ticker symbol for this futures contract.</dd>
<dt>root_symbol <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The root symbol, or the symbol with the expiration stripped
out.</dd>
<dt>asset_name <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The full name for this asset.</dd>
<dt>start_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime, optional</span></dt>
<dd>The date when this asset was created.</dd>
<dt>end_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime, optional</span></dt>
<dd>The last date we have trade data for this asset.</dd>
<dt>first_traded <span class="classifier-delimiter">:</span> <span class="classifier">datetime, optional</span></dt>
<dd>The first date we have trade data for this asset.</dd>
<dt>exchange <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The exchange where this asset is traded.</dd>
<dt>notice_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime</span></dt>
<dd>The date when the owner of the contract may be forced
to take physical delivery of the contract&#8217;s asset.</dd>
<dt>expiration_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime</span></dt>
<dd>The date when the contract expires.</dd>
<dt>auto_close_date <span class="classifier-delimiter">:</span> <span class="classifier">datetime</span></dt>
<dd>The date when the broker will automatically close any
positions in this contract.</dd>
<dt>tick_size <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The minimum price movement of the contract.</dd>
<dt>multiplier: float</dt>
<dd>The amount of the underlying asset represented by this
contract.</dd>
</dl>
</li>
<li><strong>exchanges</strong> (<em>pd.DataFrame, optional</em>) &#8211; <p>The exchanges where assets can be traded. The columns of this
dataframe are:</p>
<blockquote>
<div><dl class="docutils">
<dt>exchange <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The name of the exchange.</dd>
<dt>timezone <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The timezone of the exchange.</dd>
</dl>
</div></blockquote>
</li>
<li><strong>root_symbols</strong> (<em>pd.DataFrame, optional</em>) &#8211; <p>The root symbols for the futures contracts. The columns for this
dataframe are:</p>
<blockquote>
<div><dl class="docutils">
<dt>root_symbol <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The root symbol name.</dd>
<dt>root_symbol_id <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>The unique id for this root symbol.</dd>
<dt>sector <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd>The sector of this root symbol.</dd>
<dt>description <span class="classifier-delimiter">:</span> <span class="classifier">string, optional</span></dt>
<dd>A short description of this root symbol.</dd>
<dt>exchange <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>The exchange where this root symbol is traded.</dd>
</dl>
</div></blockquote>
</li>
<li><strong>equity_supplementary_mappings</strong> (<em>pd.DataFrame, optional</em>) &#8211; Additional mappings from values of abitrary type to assets.</li>
<li><strong>chunk_size</strong> (<em>int, optional</em>) &#8211; The amount of rows to write to the SQLite table at once.
This defaults to the default number of bind params in sqlite.
If you have compiled sqlite3 with more bind or less params you may
want to pass that value here.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">zipline.assets.asset_finder()</span></code></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="readers">
<h3>Readers<a class="headerlink" href="#readers" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="zipline.data.minute_bars.BcolzMinuteBarReader">
<em class="property">class </em><code class="descclassname">zipline.data.minute_bars.</code><code class="descname">BcolzMinuteBarReader</code><span class="sig-paren">(</span><em>rootdir</em>, <em>sid_cache_sizes=mappingproxy({'low': 1550</em>, <em>'close': 3000</em>, <em>'volume': 1550</em>, <em>'open': 1550</em>, <em>'high': 1550})</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/minute_bars.html#BcolzMinuteBarReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.minute_bars.BcolzMinuteBarReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Reader for data written by BcolzMinuteBarWriter</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rootdir</strong> (<a class="reference external" href="http://docs.python.org/dev/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a>) &#8211; The root directory containing the metadata and asset bcolz
directories.</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.data.minute_bars.BcolzMinuteBarWriter" title="zipline.data.minute_bars.BcolzMinuteBarWriter"><code class="xref py py-class docutils literal"><span class="pre">zipline.data.minute_bars.BcolzMinuteBarWriter</span></code></a></p>
</div>
<dl class="method">
<dt id="zipline.data.minute_bars.BcolzMinuteBarReader.get_value">
<code class="descname">get_value</code><span class="sig-paren">(</span><em>sid</em>, <em>dt</em>, <em>field</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/minute_bars.html#BcolzMinuteBarReader.get_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.minute_bars.BcolzMinuteBarReader.get_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the pricing info for the given sid, dt, and field.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sid</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; Asset identifier.</li>
<li><strong>dt</strong> (<em>datetime-like</em>) &#8211; The datetime at which the trade occurred.</li>
<li><strong>field</strong> (<a class="reference external" href="http://docs.python.org/dev/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a>) &#8211; The type of pricing data to retrieve.
(&#8216;open&#8217;, &#8216;high&#8217;, &#8216;low&#8217;, &#8216;close&#8217;, &#8216;volume&#8217;)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>out</strong> (<em>float|int</em>)</li>
<li><em>The market data for the given sid, dt, and field coordinates.</em></li>
<li><em>For OHLC</em> &#8211;
Returns a float if a trade occurred at the given dt.
If no trade occurred, a np.nan is returned.</li>
<li><em>For volume</em> &#8211;
Returns the integer value of the volume.
(A volume of 0 signifies no trades for the given dt.)</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.minute_bars.BcolzMinuteBarReader.load_raw_arrays">
<code class="descname">load_raw_arrays</code><span class="sig-paren">(</span><em>fields</em>, <em>start_dt</em>, <em>end_dt</em>, <em>sids</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/minute_bars.html#BcolzMinuteBarReader.load_raw_arrays"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.minute_bars.BcolzMinuteBarReader.load_raw_arrays" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fields</strong> (<em>list of str</em>) &#8211; &#8216;open&#8217;, &#8216;high&#8217;, &#8216;low&#8217;, &#8216;close&#8217;, or &#8216;volume&#8217;</li>
<li><strong>start_dt</strong> (<em>Timestamp</em>) &#8211; Beginning of the window range.</li>
<li><strong>end_dt</strong> (<em>Timestamp</em>) &#8211; End of the window range.</li>
<li><strong>sids</strong> (<em>list of int</em>) &#8211; The asset identifiers in the window.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A list with an entry per field of ndarrays with shape
(minutes in range, sids) with a dtype of float64, containing the
values for the respective field over start and end dt range.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list of np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.minute_bars.BcolzMinuteBarReader.table_len">
<code class="descname">table_len</code><span class="sig-paren">(</span><em>sid</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/minute_bars.html#BcolzMinuteBarReader.table_len"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.minute_bars.BcolzMinuteBarReader.table_len" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the length of the underlying table for this sid.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.data.us_equity_pricing.BcolzDailyBarReader">
<em class="property">class </em><code class="descclassname">zipline.data.us_equity_pricing.</code><code class="descname">BcolzDailyBarReader</code><span class="sig-paren">(</span><em>table</em>, <em>read_all_threshold=3000</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/us_equity_pricing.html#BcolzDailyBarReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.us_equity_pricing.BcolzDailyBarReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Reader for raw pricing data written by BcolzDailyOHLCVWriter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>table</strong> (<em>bcolz.ctable</em>) &#8211; The ctable contaning the pricing data, with attrs corresponding to the
Attributes list below.</li>
<li><strong>read_all_threshold</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The number of equities at which; below, the data is read by reading a
slice from the carray per asset.  above, the data is read by pulling
all of the data for all assets into memory and then indexing into that
array for each day and asset pair.  Used to tune performance of reads
when using a small or large number of equities.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt>
<code class="descname">The table with which this loader interacts contains the following</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="BcolzDailyBarReader.attributes">
<code class="descname">attributes</code><a class="headerlink" href="#BcolzDailyBarReader.attributes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="BcolzDailyBarReader.first_row">
<code class="descname">first_row</code><a class="headerlink" href="#BcolzDailyBarReader.first_row" title="Permalink to this definition">¶</a></dt>
<dd><p><em>dict</em></p>
<p>Map from asset_id -&gt; index of first row in the dataset with that id.</p>
</dd></dl>

<dl class="attribute">
<dt id="BcolzDailyBarReader.last_row">
<code class="descname">last_row</code><a class="headerlink" href="#BcolzDailyBarReader.last_row" title="Permalink to this definition">¶</a></dt>
<dd><p><em>dict</em></p>
<p>Map from asset_id -&gt; index of last row in the dataset with that id.</p>
</dd></dl>

<dl class="attribute">
<dt id="BcolzDailyBarReader.calendar_offset">
<code class="descname">calendar_offset</code><a class="headerlink" href="#BcolzDailyBarReader.calendar_offset" title="Permalink to this definition">¶</a></dt>
<dd><p><em>dict</em></p>
<p>Map from asset_id -&gt; calendar index of first row.</p>
</dd></dl>

<dl class="attribute">
<dt id="BcolzDailyBarReader.start_session_ns">
<code class="descname">start_session_ns</code><a class="headerlink" href="#BcolzDailyBarReader.start_session_ns" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>Epoch ns of the first session used in this dataset.</p>
</dd></dl>

<dl class="attribute">
<dt id="BcolzDailyBarReader.end_session_ns">
<code class="descname">end_session_ns</code><a class="headerlink" href="#BcolzDailyBarReader.end_session_ns" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int</em></p>
<p>Epoch ns of the last session used in this dataset.</p>
</dd></dl>

<dl class="attribute">
<dt id="BcolzDailyBarReader.calendar_name">
<code class="descname">calendar_name</code><a class="headerlink" href="#BcolzDailyBarReader.calendar_name" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em></p>
<p>String identifier of trading calendar used (ie, &#8220;NYSE&#8221;).</p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">We use first_row and last_row together to quickly find ranges of rows to</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">load when reading an asset's data into memory.</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">We use calendar_offset and calendar to orient loaded blocks within a</code></dt>
<dd></dd></dl>

<dl class="attribute">
<dt>
<code class="descname">range of queried dates.</code></dt>
<dd></dd></dl>

<p class="rubric">Notes</p>
<p>A Bcolz CTable is comprised of Columns and Attributes.
The table with which this loader interacts contains the following columns:</p>
<p>[&#8216;open&#8217;, &#8216;high&#8217;, &#8216;low&#8217;, &#8216;close&#8217;, &#8216;volume&#8217;, &#8216;day&#8217;, &#8216;id&#8217;].</p>
<p>The data in these columns is interpreted as follows:</p>
<ul class="simple">
<li>Price columns (&#8216;open&#8217;, &#8216;high&#8217;, &#8216;low&#8217;, &#8216;close&#8217;) are interpreted as 1000 *
as-traded dollar value.</li>
<li>Volume is interpreted as as-traded volume.</li>
<li>Day is interpreted as seconds since midnight UTC, Jan 1, 1970.</li>
<li>Id is the asset id of the row.</li>
</ul>
<p>The data in each column is grouped by asset and then sorted by day within
each asset block.</p>
<p>The table is built to represent a long time range of data, e.g. ten years
of equity data, so the lengths of each asset block is not equal to each
other. The blocks are clipped to the known start and end date of each asset
to cut down on the number of empty values that would need to be included to
make a regular/cubic dataset.</p>
<p>When read across the open, high, low, close, and volume with the same
index should represent the same asset and day.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.data.us_equity_pricing.BcolzDailyBarWriter" title="zipline.data.us_equity_pricing.BcolzDailyBarWriter"><code class="xref py py-class docutils literal"><span class="pre">zipline.data.us_equity_pricing.BcolzDailyBarWriter</span></code></a></p>
</div>
<dl class="method">
<dt id="zipline.data.us_equity_pricing.BcolzDailyBarReader.get_value">
<code class="descname">get_value</code><span class="sig-paren">(</span><em>sid</em>, <em>dt</em>, <em>field</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/us_equity_pricing.html#BcolzDailyBarReader.get_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.us_equity_pricing.BcolzDailyBarReader.get_value" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sid</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The asset identifier.</li>
<li><strong>day</strong> (<em>datetime64-like</em>) &#8211; Midnight of the day for which data is requested.</li>
<li><strong>colname</strong> (<a class="reference external" href="http://docs.python.org/dev/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a>) &#8211; The price field. e.g. (&#8216;open&#8217;, &#8216;high&#8217;, &#8216;low&#8217;, &#8216;close&#8217;, &#8216;volume&#8217;)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The spot price for colname of the given sid on the given day.
Raises a NoDataOnDate exception if the given day and sid is before
or after the date range of the equity.
Returns -1 if the day is within the date range, but the price is
0.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/dev/library/functions.html#float" title="(in Python v3.8)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.us_equity_pricing.BcolzDailyBarReader.sid_day_index">
<code class="descname">sid_day_index</code><span class="sig-paren">(</span><em>sid</em>, <em>day</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/us_equity_pricing.html#BcolzDailyBarReader.sid_day_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.us_equity_pricing.BcolzDailyBarReader.sid_day_index" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sid</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The asset identifier.</li>
<li><strong>day</strong> (<em>datetime64-like</em>) &#8211; Midnight of the day for which data is requested.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Index into the data tape for the given sid and day.
Raises a NoDataOnDate exception if the given day and sid is before
or after the date range of the equity.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)">int</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.data.us_equity_pricing.SQLiteAdjustmentReader">
<em class="property">class </em><code class="descclassname">zipline.data.us_equity_pricing.</code><code class="descname">SQLiteAdjustmentReader</code><span class="sig-paren">(</span><em>conn</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/us_equity_pricing.html#SQLiteAdjustmentReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.us_equity_pricing.SQLiteAdjustmentReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads adjustments based on corporate actions from a SQLite database.</p>
<p>Expects data written in the format output by <cite>SQLiteAdjustmentWriter</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>conn</strong> (<em>str or sqlite3.Connection</em>) &#8211; Connection from which to load data.</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.data.us_equity_pricing.SQLiteAdjustmentWriter" title="zipline.data.us_equity_pricing.SQLiteAdjustmentWriter"><code class="xref py py-class docutils literal"><span class="pre">zipline.data.us_equity_pricing.SQLiteAdjustmentWriter</span></code></a></p>
</div>
<dl class="method">
<dt id="zipline.data.us_equity_pricing.SQLiteAdjustmentReader.unpack_db_to_component_dfs">
<code class="descname">unpack_db_to_component_dfs</code><span class="sig-paren">(</span><em>convert_dates=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/us_equity_pricing.html#SQLiteAdjustmentReader.unpack_db_to_component_dfs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.us_equity_pricing.SQLiteAdjustmentReader.unpack_db_to_component_dfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the set of known tables in the adjustments file in DataFrame
form.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>convert_dates</strong> (<em>bool, optional</em>) &#8211; By default, dates are returned in seconds since EPOCH. If
convert_dates is True, all ints in date columns will be converted
to datetimes.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>dfs</strong> &#8211;
Dictionary which maps table name to the corresponding DataFrame
version of the table, where all date columns have been coerced back
from int to datetime.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict{str-&gt;DataFrame}</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.assets.AssetFinder">
<em class="property">class </em><code class="descclassname">zipline.assets.</code><code class="descname">AssetFinder</code><span class="sig-paren">(</span><em>engine</em>, <em>future_chain_predicates={'EL': functools.partial(&lt;built-in function delivery_predicate&gt;</em>, <em>{'Z'</em>, <em>'M'</em>, <em>'H'</em>, <em>'U'})</em>, <em>'YS': functools.partial(&lt;built-in function delivery_predicate&gt;</em>, <em>{'N'</em>, <em>'Z'</em>, <em>'H'</em>, <em>'U'</em>, <em>'K'})</em>, <em>'CD': functools.partial(&lt;built-in function delivery_predicate&gt;</em>, <em>{'Z'</em>, <em>'M'</em>, <em>'H'</em>, <em>'U'})</em>, <em>'XG': functools.partial(&lt;built-in function delivery_predicate&gt;</em>, <em>{'V'</em>, <em>'Z'</em>, <em>'G'</em>, <em>'Q'</em>, <em>'J'</em>, <em>'M'})</em>, <em>'PL': functools.partial(&lt;built-in function delivery_predicate&gt;</em>, <em>{'J'</em>, <em>'V'</em>, <em>'F'</em>, <em>'N'})</em>, <em>'PA': functools.partial(&lt;built-in function delivery_predicate&gt;</em>, <em>{'Z'</em>, <em>'M'</em>, <em>'H'</em>, <em>'U'})</em>, <em>'JY': functools.partial(&lt;built-in function delivery_predicate&gt;</em>, <em>{'Z'</em>, <em>'M'</em>, <em>'H'</em>, <em>'U'})</em>, <em>'GC': functools.partial(&lt;built-in function delivery_predicate&gt;</em>, <em>{'V'</em>, <em>'Z'</em>, <em>'G'</em>, <em>'Q'</em>, <em>'J'</em>, <em>'M'})</em>, <em>'ME': functools.partial(&lt;built-in function delivery_predicate&gt;</em>, <em>{'Z'</em>, <em>'M'</em>, <em>'H'</em>, <em>'U'})</em>, <em>'AD': functools.partial(&lt;built-in function delivery_predicate&gt;</em>, <em>{'Z'</em>, <em>'M'</em>, <em>'H'</em>, <em>'U'})</em>, <em>'SV': functools.partial(&lt;built-in function delivery_predicate&gt;</em>, <em>{'N'</em>, <em>'Z'</em>, <em>'H'</em>, <em>'U'</em>, <em>'K'})</em>, <em>'BP': functools.partial(&lt;built-in function delivery_predicate&gt;</em>, <em>{'Z'</em>, <em>'M'</em>, <em>'H'</em>, <em>'U'})}</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetFinder" title="Permalink to this definition">¶</a></dt>
<dd><p>An AssetFinder is an interface to a database of Asset metadata written by
an <code class="docutils literal"><span class="pre">AssetDBWriter</span></code>.</p>
<p>This class provides methods for looking up assets by unique integer id or
by symbol.  For historical reasons, we refer to these unique ids as &#8216;sids&#8217;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>engine</strong> (<em>str or SQLAlchemy.engine</em>) &#8211; An engine with a connection to the asset database to use, or a string
that can be parsed by SQLAlchemy as a URI.</li>
<li><strong>future_chain_predicates</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) &#8211; A dict mapping future root symbol to a predicate function which accepts</li>
<li><strong>contract as a parameter and returns whether or not the contract should be</strong> (<em>a</em>) &#8211; </li>
<li><strong>in the chain.</strong> (<em>included</em>) &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.assets.AssetDBWriter" title="zipline.assets.AssetDBWriter"><code class="xref py py-class docutils literal"><span class="pre">zipline.assets.AssetDBWriter</span></code></a></p>
</div>
<dl class="attribute">
<dt id="zipline.assets.AssetFinder.equities_sids">
<code class="descname">equities_sids</code><a class="headerlink" href="#zipline.assets.AssetFinder.equities_sids" title="Permalink to this definition">¶</a></dt>
<dd><p>All of the sids for equities in the asset finder.</p>
</dd></dl>

<dl class="attribute">
<dt id="zipline.assets.AssetFinder.futures_sids">
<code class="descname">futures_sids</code><a class="headerlink" href="#zipline.assets.AssetFinder.futures_sids" title="Permalink to this definition">¶</a></dt>
<dd><p>All of the sids for futures consracts in the asset finder.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.AssetFinder.get_supplementary_field">
<code class="descname">get_supplementary_field</code><span class="sig-paren">(</span><em>sid</em>, <em>field_name</em>, <em>as_of_date</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.get_supplementary_field"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetFinder.get_supplementary_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value of a supplementary field for an asset.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sid</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The sid of the asset to query.</li>
<li><strong>field_name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; Name of the supplementary field.</li>
<li><strong>as_of_date</strong> (<em>pd.Timestamp, None</em>) &#8211; The last known value on this date is returned. If None, a
value is returned only if we&#8217;ve only ever had one value for
this sid. If None and we&#8217;ve had multiple values,
MultipleValuesFoundForSid is raised.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">NoValueForSid</span></code> &#8211;
If we have no values for this asset, or no values was known
on this as_of_date.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">MultipleValuesFoundForSid</span></code> &#8211;
If we have had multiple values for this asset over time, and
None was passed for as_of_date.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.AssetFinder.group_by_type">
<code class="descname">group_by_type</code><span class="sig-paren">(</span><em>sids</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.group_by_type"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetFinder.group_by_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Group a list of sids by asset type.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sids</strong> (<em>list[int]</em>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>types</strong> &#8211;
A dict mapping unique asset types to lists of sids drawn from sids.
If we fail to look up an asset, we assign it a key of None.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict[str or None -&gt; list[int]]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.AssetFinder.lifetimes">
<code class="descname">lifetimes</code><span class="sig-paren">(</span><em>dates</em>, <em>include_start_date</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.lifetimes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetFinder.lifetimes" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a DataFrame representing asset lifetimes for the specified date
range.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dates</strong> (<em>pd.DatetimeIndex</em>) &#8211; The dates for which to compute lifetimes.</li>
<li><strong>include_start_date</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) &#8211; <p>Whether or not to count the asset as alive on its start_date.</p>
<p>This is useful in a backtesting context where <cite>lifetimes</cite> is being
used to signify &#8220;do I have data for this asset as of the morning of
this date?&#8221;  For many financial metrics, (e.g. daily close), data
isn&#8217;t available for an asset until the end of the asset&#8217;s first
day.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>lifetimes</strong> &#8211;
A frame of dtype bool with <cite>dates</cite> as index and an Int64Index of
assets as columns.  The value at <cite>lifetimes.loc[date, asset]</cite> will
be True iff <cite>asset</cite> existed on <cite>date</cite>.  If <cite>include_start_date</cite> is
False, then lifetimes.loc[date, asset] will be false when date ==
asset.start_date.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DataFrame</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">numpy.putmask()</span></code>, <code class="xref py py-meth docutils literal"><span class="pre">zipline.pipeline.engine.SimplePipelineEngine._compute_root_mask()</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.AssetFinder.lookup_asset_types">
<code class="descname">lookup_asset_types</code><span class="sig-paren">(</span><em>sids</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.lookup_asset_types"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetFinder.lookup_asset_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve asset types for a list of sids.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sids</strong> (<em>list[int]</em>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>types</strong> &#8211;
Asset types for the provided sids.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict[sid -&gt; str or None]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.AssetFinder.lookup_future_symbol">
<code class="descname">lookup_future_symbol</code><span class="sig-paren">(</span><em>symbol</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.lookup_future_symbol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetFinder.lookup_future_symbol" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup a future contract by symbol.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>symbol</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The symbol of the desired contract.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>future</strong> &#8211;
The future contract referenced by <code class="docutils literal"><span class="pre">symbol</span></code>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#zipline.assets.Future" title="zipline.assets.Future">Future</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">SymbolNotFound</span></code> &#8211;
Raised when no contract named &#8216;symbol&#8217; is found.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.AssetFinder.lookup_generic">
<code class="descname">lookup_generic</code><span class="sig-paren">(</span><em>asset_convertible_or_iterable</em>, <em>as_of_date</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.lookup_generic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetFinder.lookup_generic" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a AssetConvertible or iterable of AssetConvertibles into
a list of Asset objects.</p>
<p>This method exists primarily as a convenience for implementing
user-facing APIs that can handle multiple kinds of input.  It should
not be used for internal code where we already know the expected types
of our inputs.</p>
<p>Returns a pair of objects, the first of which is the result of the
conversion, and the second of which is a list containing any values
that couldn&#8217;t be resolved.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.AssetFinder.lookup_symbol">
<code class="descname">lookup_symbol</code><span class="sig-paren">(</span><em>symbol</em>, <em>as_of_date</em>, <em>fuzzy=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.lookup_symbol"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetFinder.lookup_symbol" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup an equity by symbol.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>symbol</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The ticker symbol to resolve.</li>
<li><strong>as_of_date</strong> (<em>datetime or None</em>) &#8211; Look up the last owner of this symbol as of this datetime.
If <code class="docutils literal"><span class="pre">as_of_date</span></code> is None, then this can only resolve the equity
if exactly one equity has ever owned the ticker.</li>
<li><strong>fuzzy</strong> (<em>bool, optional</em>) &#8211; Should fuzzy symbol matching be used? Fuzzy symbol matching
attempts to resolve differences in representations for
shareclasses. For example, some people may represent the <code class="docutils literal"><span class="pre">A</span></code>
shareclass of <code class="docutils literal"><span class="pre">BRK</span></code> as <code class="docutils literal"><span class="pre">BRK.A</span></code>, where others could write
<code class="docutils literal"><span class="pre">BRK_A</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>equity</strong> &#8211;
The equity that held <code class="docutils literal"><span class="pre">symbol</span></code> on the given <code class="docutils literal"><span class="pre">as_of_date</span></code>, or the
only equity to hold <code class="docutils literal"><span class="pre">symbol</span></code> if <code class="docutils literal"><span class="pre">as_of_date</span></code> is None.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference internal" href="#zipline.assets.Equity" title="zipline.assets.Equity">Equity</a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal"><span class="pre">SymbolNotFound</span></code> &#8211;
Raised when no equity has ever held the given symbol.</li>
<li><code class="xref py py-exc docutils literal"><span class="pre">MultipleSymbolsFound</span></code> &#8211;
Raised when no <code class="docutils literal"><span class="pre">as_of_date</span></code> is given and more than one equity
has held <code class="docutils literal"><span class="pre">symbol</span></code>. This is also raised when <code class="docutils literal"><span class="pre">fuzzy=True</span></code> and
there are multiple candidates for the given <code class="docutils literal"><span class="pre">symbol</span></code> on the
<code class="docutils literal"><span class="pre">as_of_date</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.AssetFinder.lookup_symbols">
<code class="descname">lookup_symbols</code><span class="sig-paren">(</span><em>symbols</em>, <em>as_of_date</em>, <em>fuzzy=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.lookup_symbols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetFinder.lookup_symbols" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup a list of equities by symbol.</p>
<p>Equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">finder</span><span class="o">.</span><span class="n">lookup_symbol</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">as_of</span><span class="p">,</span> <span class="n">fuzzy</span><span class="p">)</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">symbols</span><span class="p">]</span>
</pre></div>
</div>
<p>but potentially faster because repeated lookups are memoized.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>symbols</strong> (<em>sequence[str]</em>) &#8211; Sequence of ticker symbols to resolve.</li>
<li><strong>as_of_date</strong> (<em>pd.Timestamp</em>) &#8211; Forwarded to <code class="docutils literal"><span class="pre">lookup_symbol</span></code>.</li>
<li><strong>fuzzy</strong> (<em>bool, optional</em>) &#8211; Forwarded to <code class="docutils literal"><span class="pre">lookup_symbol</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>equities</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list[Equity]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.AssetFinder.map_identifier_index_to_sids">
<code class="descname">map_identifier_index_to_sids</code><span class="sig-paren">(</span><em>index</em>, <em>as_of_date</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.map_identifier_index_to_sids"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetFinder.map_identifier_index_to_sids" title="Permalink to this definition">¶</a></dt>
<dd><p>This method is for use in sanitizing a user&#8217;s DataFrame or Panel
inputs.</p>
<p>Takes the given index of identifiers, checks their types, builds assets
if necessary, and returns a list of the sids that correspond to the
input index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>index</strong> (<em>Iterable</em>) &#8211; An iterable containing ints, strings, or Assets</li>
<li><strong>as_of_date</strong> (<a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Timestamp.html#pandas.Timestamp" title="(in pandas v0.22.0)"><em>pandas.Timestamp</em></a>) &#8211; A date to be used to resolve any dual-mapped symbols</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A list of integer sids corresponding to the input index</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">List</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.AssetFinder.reload_symbol_maps">
<code class="descname">reload_symbol_maps</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.reload_symbol_maps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetFinder.reload_symbol_maps" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the in memory symbol lookup maps.</p>
<p>This will make any changes to the underlying db available to the
symbol maps.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.AssetFinder.retrieve_all">
<code class="descname">retrieve_all</code><span class="sig-paren">(</span><em>sids</em>, <em>default_none=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.retrieve_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetFinder.retrieve_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve all assets in <cite>sids</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sids</strong> (<em>iterable of int</em>) &#8211; Assets to retrieve.</li>
<li><strong>default_none</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) &#8211; If True, return None for failed lookups.
If False, raise <cite>SidsNotFound</cite>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>assets</strong> &#8211;
A list of the same length as <cite>sids</cite> containing Assets (or Nones)
corresponding to the requested sids.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">list[Asset or None]</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal"><span class="pre">SidsNotFound</span></code> &#8211;
When a requested sid is not found and default_none=False.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.AssetFinder.retrieve_asset">
<code class="descname">retrieve_asset</code><span class="sig-paren">(</span><em>sid</em>, <em>default_none=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.retrieve_asset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetFinder.retrieve_asset" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the Asset for a given sid.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.AssetFinder.retrieve_equities">
<code class="descname">retrieve_equities</code><span class="sig-paren">(</span><em>sids</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.retrieve_equities"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetFinder.retrieve_equities" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve Equity objects for a list of sids.</p>
<p>Users generally shouldn&#8217;t need to this method (instead, they should
prefer the more general/friendly <cite>retrieve_assets</cite>), but it has a
documented interface and tests because it&#8217;s used upstream.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sids</strong> (<em>iterable[int]</em>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>equities</strong></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict[int -&gt; Equity]</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">EquitiesNotFound</span></code> &#8211;
When any requested asset isn&#8217;t found.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.assets.AssetFinder.retrieve_futures_contracts">
<code class="descname">retrieve_futures_contracts</code><span class="sig-paren">(</span><em>sids</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/assets/assets.html#AssetFinder.retrieve_futures_contracts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.assets.AssetFinder.retrieve_futures_contracts" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve Future objects for an iterable of sids.</p>
<p>Users generally shouldn&#8217;t need to this method (instead, they should
prefer the more general/friendly <cite>retrieve_assets</cite>), but it has a
documented interface and tests because it&#8217;s used upstream.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sids</strong> (<em>iterable[int]</em>) &#8211; </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>equities</strong></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">dict[int -&gt; Equity]</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">EquitiesNotFound</span></code> &#8211;
When any requested asset isn&#8217;t found.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="zipline.assets.AssetFinder.sids">
<code class="descname">sids</code><a class="headerlink" href="#zipline.assets.AssetFinder.sids" title="Permalink to this definition">¶</a></dt>
<dd><p>All the sids in the asset finder.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.data.data_portal.DataPortal">
<em class="property">class </em><code class="descclassname">zipline.data.data_portal.</code><code class="descname">DataPortal</code><span class="sig-paren">(</span><em>asset_finder</em>, <em>trading_calendar</em>, <em>first_trading_day</em>, <em>equity_daily_reader=None</em>, <em>equity_minute_reader=None</em>, <em>future_daily_reader=None</em>, <em>future_minute_reader=None</em>, <em>adjustment_reader=None</em>, <em>last_available_session=None</em>, <em>last_available_minute=None</em>, <em>minute_history_prefetch_length=1560</em>, <em>daily_history_prefetch_length=40</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal" title="Permalink to this definition">¶</a></dt>
<dd><p>Interface to all of the data that a zipline simulation needs.</p>
<p>This is used by the simulation runner to answer questions about the data,
like getting the prices of assets on a given day or to service history
calls.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>asset_finder</strong> (<em>zipline.assets.assets.AssetFinder</em>) &#8211; The AssetFinder instance used to resolve assets.</li>
<li><strong>trading_calendar</strong> (<em>zipline.utils.calendar.exchange_calendar.TradingCalendar</em>) &#8211; The calendar instance used to provide minute-&gt;session information.</li>
<li><strong>first_trading_day</strong> (<em>pd.Timestamp</em>) &#8211; The first trading day for the simulation.</li>
<li><strong>equity_daily_reader</strong> (<em>BcolzDailyBarReader, optional</em>) &#8211; The daily bar reader for equities. This will be used to service
daily data backtests or daily history calls in a minute backetest.
If a daily bar reader is not provided but a minute bar reader is,
the minutes will be rolled up to serve the daily requests.</li>
<li><strong>equity_minute_reader</strong> (<em>BcolzMinuteBarReader, optional</em>) &#8211; The minute bar reader for equities. This will be used to service
minute data backtests or minute history calls. This can be used
to serve daily calls if no daily bar reader is provided.</li>
<li><strong>future_daily_reader</strong> (<em>BcolzDailyBarReader, optional</em>) &#8211; The daily bar ready for futures. This will be used to service
daily data backtests or daily history calls in a minute backetest.
If a daily bar reader is not provided but a minute bar reader is,
the minutes will be rolled up to serve the daily requests.</li>
<li><strong>future_minute_reader</strong> (<em>BcolzFutureMinuteBarReader, optional</em>) &#8211; The minute bar reader for futures. This will be used to service
minute data backtests or minute history calls. This can be used
to serve daily calls if no daily bar reader is provided.</li>
<li><strong>adjustment_reader</strong> (<em>SQLiteAdjustmentWriter, optional</em>) &#8211; The adjustment reader. This is used to apply splits, dividends, and
other adjustment data to the raw data from the readers.</li>
<li><strong>last_available_session</strong> (<em>pd.Timestamp, optional</em>) &#8211; The last session to make available in session-level data.</li>
<li><strong>last_available_minute</strong> (<em>pd.Timestamp, optional</em>) &#8211; The last minute to make available in minute-level data.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="zipline.data.data_portal.DataPortal.get_adjusted_value">
<code class="descname">get_adjusted_value</code><span class="sig-paren">(</span><em>asset</em>, <em>field</em>, <em>dt</em>, <em>perspective_dt</em>, <em>data_frequency</em>, <em>spot_value=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_adjusted_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_adjusted_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a scalar value representing the value
of the desired asset&#8217;s field at the given dt with adjustments applied.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>asset</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) &#8211; The asset whose data is desired.</li>
<li><strong>field</strong> (<em>{'open', 'high', 'low', 'close', 'volume',                  'price', 'last_traded'}</em>) &#8211; The desired field of the asset.</li>
<li><strong>dt</strong> (<em>pd.Timestamp</em>) &#8211; The timestamp for the desired value.</li>
<li><strong>perspective_dt</strong> (<em>pd.Timestamp</em>) &#8211; The timestamp from which the data is being viewed back from.</li>
<li><strong>data_frequency</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The frequency of the data to query; i.e. whether the data is
&#8216;daily&#8217; or &#8216;minute&#8217; bars</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>value</strong> &#8211;
The value of the given <code class="docutils literal"><span class="pre">field</span></code> for <code class="docutils literal"><span class="pre">asset</span></code> at <code class="docutils literal"><span class="pre">dt</span></code> with any
adjustments known by <code class="docutils literal"><span class="pre">perspective_dt</span></code> applied. The return type is
based on the <code class="docutils literal"><span class="pre">field</span></code> requested. If the field is one of &#8216;open&#8217;,
&#8216;high&#8217;, &#8216;low&#8217;, &#8216;close&#8217;, or &#8216;price&#8217;, the value will be a float. If
the <code class="docutils literal"><span class="pre">field</span></code> is &#8216;volume&#8217; the value will be a int. If the <code class="docutils literal"><span class="pre">field</span></code>
is &#8216;last_traded&#8217; the value will be a Timestamp.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">float, int, or pd.Timestamp</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.data_portal.DataPortal.get_adjustments">
<code class="descname">get_adjustments</code><span class="sig-paren">(</span><em>assets</em>, <em>field</em>, <em>dt</em>, <em>perspective_dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_adjustments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_adjustments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of adjustments between the dt and perspective_dt for the
given field and list of assets</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>assets</strong> (<em>list of type Asset, or Asset</em>) &#8211; The asset, or assets whose adjustments are desired.</li>
<li><strong>field</strong> (<em>{'open', 'high', 'low', 'close', 'volume',                  'price', 'last_traded'}</em>) &#8211; The desired field of the asset.</li>
<li><strong>dt</strong> (<em>pd.Timestamp</em>) &#8211; The timestamp for the desired value.</li>
<li><strong>perspective_dt</strong> (<em>pd.Timestamp</em>) &#8211; The timestamp from which the data is being viewed back from.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>adjustments</strong> &#8211;
The adjustments to that field.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list[Adjustment]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.data_portal.DataPortal.get_current_future_chain">
<code class="descname">get_current_future_chain</code><span class="sig-paren">(</span><em>continuous_future</em>, <em>dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_current_future_chain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_current_future_chain" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the future chain for the contract at the given <cite>dt</cite> according
the <cite>continuous_future</cite> specification.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>future_chain</strong> &#8211;
A list of active futures, where the first index is the current
contract specified by the continuous future definition, the second
is the next upcoming contract and so on.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">list[Future]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.data_portal.DataPortal.get_fetcher_assets">
<code class="descname">get_fetcher_assets</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_fetcher_assets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_fetcher_assets" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of assets for the current date, as defined by the
fetcher data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>list</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">a list of Asset objects.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.data_portal.DataPortal.get_history_window">
<code class="descname">get_history_window</code><span class="sig-paren">(</span><em>assets</em>, <em>end_dt</em>, <em>bar_count</em>, <em>frequency</em>, <em>field</em>, <em>data_frequency</em>, <em>ffill=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_history_window"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_history_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Public API method that returns a dataframe containing the requested
history window.  Data is fully adjusted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>assets</strong> (<em>list of zipline.data.Asset objects</em>) &#8211; The assets whose data is desired.</li>
<li><strong>bar_count</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The number of bars desired.</li>
<li><strong>frequency</strong> (<a class="reference external" href="http://docs.python.org/dev/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a>) &#8211; &#8220;1d&#8221; or &#8220;1m&#8221;</li>
<li><strong>field</strong> (<a class="reference external" href="http://docs.python.org/dev/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a>) &#8211; The desired field of the asset.</li>
<li><strong>data_frequency</strong> (<a class="reference external" href="http://docs.python.org/dev/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a>) &#8211; The frequency of the data to query; i.e. whether the data is
&#8216;daily&#8217; or &#8216;minute&#8217; bars.</li>
<li><strong>ffill</strong> (<em>boolean</em>) &#8211; Forward-fill missing values. Only has effect if field
is &#8216;price&#8217;.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">A dataframe containing the requested data.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.data_portal.DataPortal.get_last_traded_dt">
<code class="descname">get_last_traded_dt</code><span class="sig-paren">(</span><em>asset</em>, <em>dt</em>, <em>data_frequency</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_last_traded_dt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_last_traded_dt" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an asset and dt, returns the last traded dt from the viewpoint
of the given dt.</p>
<p>If there is a trade on the dt, the answer is dt provided.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.data.data_portal.DataPortal.get_scalar_asset_spot_value">
<code class="descname">get_scalar_asset_spot_value</code><span class="sig-paren">(</span><em>asset</em>, <em>field</em>, <em>dt</em>, <em>data_frequency</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_scalar_asset_spot_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_scalar_asset_spot_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Public API method that returns a scalar value representing the value
of the desired asset&#8217;s field at either the given dt.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>assets</strong> (<a class="reference internal" href="#zipline.assets.Asset" title="zipline.assets.Asset"><em>Asset</em></a>) &#8211; The asset or assets whose data is desired. This cannot be
an arbitrary AssetConvertible.</li>
<li><strong>field</strong> (<em>{'open', 'high', 'low', 'close', 'volume',</em>) &#8211; &#8216;price&#8217;, &#8216;last_traded&#8217;}
The desired field of the asset.</li>
<li><strong>dt</strong> (<em>pd.Timestamp</em>) &#8211; The timestamp for the desired value.</li>
<li><strong>data_frequency</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The frequency of the data to query; i.e. whether the data is
&#8216;daily&#8217; or &#8216;minute&#8217; bars</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>value</strong> &#8211;
The spot value of <code class="docutils literal"><span class="pre">field</span></code> for <code class="docutils literal"><span class="pre">asset</span></code> The return type is based
on the <code class="docutils literal"><span class="pre">field</span></code> requested. If the field is one of &#8216;open&#8217;, &#8216;high&#8217;,
&#8216;low&#8217;, &#8216;close&#8217;, or &#8216;price&#8217;, the value will be a float. If the
<code class="docutils literal"><span class="pre">field</span></code> is &#8216;volume&#8217; the value will be a int. If the <code class="docutils literal"><span class="pre">field</span></code> is
&#8216;last_traded&#8217; the value will be a Timestamp.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">float, int, or pd.Timestamp</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.data_portal.DataPortal.get_splits">
<code class="descname">get_splits</code><span class="sig-paren">(</span><em>assets</em>, <em>dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_splits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_splits" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns any splits for the given sids and the given dt.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>assets</strong> (<em>container</em>) &#8211; Assets for which we want splits.</li>
<li><strong>dt</strong> (<em>pd.Timestamp</em>) &#8211; The date for which we are checking for splits. Note: this is
expected to be midnight UTC.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>splits</strong> &#8211;
List of splits, where each split is a (asset, ratio) tuple.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">list[(asset, float)]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.data_portal.DataPortal.get_spot_value">
<code class="descname">get_spot_value</code><span class="sig-paren">(</span><em>assets</em>, <em>field</em>, <em>dt</em>, <em>data_frequency</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_spot_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_spot_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Public API method that returns a scalar value representing the value
of the desired asset&#8217;s field at either the given dt.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>assets</strong> (<em>Asset, ContinuousFuture, or iterable of same.</em>) &#8211; The asset or assets whose data is desired.</li>
<li><strong>field</strong> (<em>{'open', 'high', 'low', 'close', 'volume',</em>) &#8211; &#8216;price&#8217;, &#8216;last_traded&#8217;}
The desired field of the asset.</li>
<li><strong>dt</strong> (<em>pd.Timestamp</em>) &#8211; The timestamp for the desired value.</li>
<li><strong>data_frequency</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The frequency of the data to query; i.e. whether the data is
&#8216;daily&#8217; or &#8216;minute&#8217; bars</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>value</strong> &#8211;
The spot value of <code class="docutils literal"><span class="pre">field</span></code> for <code class="docutils literal"><span class="pre">asset</span></code> The return type is based
on the <code class="docutils literal"><span class="pre">field</span></code> requested. If the field is one of &#8216;open&#8217;, &#8216;high&#8217;,
&#8216;low&#8217;, &#8216;close&#8217;, or &#8216;price&#8217;, the value will be a float. If the
<code class="docutils literal"><span class="pre">field</span></code> is &#8216;volume&#8217; the value will be a int. If the <code class="docutils literal"><span class="pre">field</span></code> is
&#8216;last_traded&#8217; the value will be a Timestamp.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">float, int, or pd.Timestamp</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.data_portal.DataPortal.get_stock_dividends">
<code class="descname">get_stock_dividends</code><span class="sig-paren">(</span><em>sid</em>, <em>trading_days</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.get_stock_dividends"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.get_stock_dividends" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all the stock dividends for a specific sid that occur
in the given trading range.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sid</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) &#8211; The asset whose stock dividends should be returned.</li>
<li><strong>trading_days</strong> (<em>pd.DatetimeIndex</em>) &#8211; The trading range.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>list</strong> (<em>A list of objects with all relevant attributes populated.</em>)</li>
<li><em>All timestamp fields are converted to pd.Timestamps.</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.data.data_portal.DataPortal.handle_extra_source">
<code class="descname">handle_extra_source</code><span class="sig-paren">(</span><em>source_df</em>, <em>sim_params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/data/data_portal.html#DataPortal.handle_extra_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.data.data_portal.DataPortal.handle_extra_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Extra sources always have a sid column.</p>
<p>We expand the given data (by forward filling) to the full range of
the simulation dates, so that lookup is fast during simulation.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.sources.benchmark_source.BenchmarkSource">
<em class="property">class </em><code class="descclassname">zipline.sources.benchmark_source.</code><code class="descname">BenchmarkSource</code><span class="sig-paren">(</span><em>benchmark_asset</em>, <em>trading_calendar</em>, <em>sessions</em>, <em>data_portal</em>, <em>emission_rate='daily'</em>, <em>benchmark_returns=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/sources/benchmark_source.html#BenchmarkSource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.sources.benchmark_source.BenchmarkSource" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="zipline.sources.benchmark_source.BenchmarkSource.daily_returns">
<code class="descname">daily_returns</code><span class="sig-paren">(</span><em>start</em>, <em>end=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/sources/benchmark_source.html#BenchmarkSource.daily_returns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.sources.benchmark_source.BenchmarkSource.daily_returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the daily returns for the given period.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>start</strong> (<a class="reference external" href="http://docs.python.org/dev/library/datetime.html#module-datetime" title="(in Python v3.8)"><em>datetime</em></a>) &#8211; The inclusive starting session label.</li>
<li><strong>end</strong> (<em>datetime, optional</em>) &#8211; The inclusive ending session label. If not provided, treat
<code class="docutils literal"><span class="pre">start</span></code> as a scalar key.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>returns</strong> &#8211;
The returns in the given period. The index will be the trading
calendar in the range [start, end]. If just <code class="docutils literal"><span class="pre">start</span></code> is provided,
return the scalar value on that day.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.Series or float</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.sources.benchmark_source.BenchmarkSource.get_range">
<code class="descname">get_range</code><span class="sig-paren">(</span><em>start_dt</em>, <em>end_dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/sources/benchmark_source.html#BenchmarkSource.get_range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.sources.benchmark_source.BenchmarkSource.get_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the returns for a given period.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>start_dt</strong> (<a class="reference external" href="http://docs.python.org/dev/library/datetime.html#module-datetime" title="(in Python v3.8)"><em>datetime</em></a>) &#8211; The inclusive start label.</li>
<li><strong>end_dt</strong> (<a class="reference external" href="http://docs.python.org/dev/library/datetime.html#module-datetime" title="(in Python v3.8)"><em>datetime</em></a>) &#8211; The inclusive end label.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>returns</strong> &#8211;
The series of returns.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.Series</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.sources.benchmark_source.BenchmarkSource.daily_returns" title="zipline.sources.benchmark_source.BenchmarkSource.daily_returns"><code class="xref py py-class docutils literal"><span class="pre">zipline.sources.benchmark_source.BenchmarkSource.daily_returns</span></code></a></p>
<dl class="last docutils">
<dt><code class="xref py py-meth docutils literal"><span class="pre">()</span></code></dt>
<dd>This method expects minute inputs if <code class="docutils literal"><span class="pre">emission_rate</span> <span class="pre">==</span> <span class="pre">'minute'</span></code> and session labels when <code class="docutils literal"><span class="pre">emission_rate</span> <span class="pre">==</span> <span class="pre">'daily</span></code>.</dd>
</dl>
</div>
</dd></dl>

<dl class="method">
<dt id="zipline.sources.benchmark_source.BenchmarkSource.get_value">
<code class="descname">get_value</code><span class="sig-paren">(</span><em>dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/sources/benchmark_source.html#BenchmarkSource.get_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.sources.benchmark_source.BenchmarkSource.get_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Look up the returns for a given dt.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dt</strong> (<a class="reference external" href="http://docs.python.org/dev/library/datetime.html#module-datetime" title="(in Python v3.8)"><em>datetime</em></a>) &#8211; The label to look up.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>returns</strong> &#8211;
The returns at the given dt or session.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/dev/library/functions.html#float" title="(in Python v3.8)">float</a></td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p><a class="reference internal" href="#zipline.sources.benchmark_source.BenchmarkSource.daily_returns" title="zipline.sources.benchmark_source.BenchmarkSource.daily_returns"><code class="xref py py-class docutils literal"><span class="pre">zipline.sources.benchmark_source.BenchmarkSource.daily_returns</span></code></a></p>
<dl class="last docutils">
<dt><code class="xref py py-meth docutils literal"><span class="pre">()</span></code></dt>
<dd>This method expects minute inputs if <code class="docutils literal"><span class="pre">emission_rate</span> <span class="pre">==</span> <span class="pre">'minute'</span></code> and session labels when <code class="docutils literal"><span class="pre">emission_rate</span> <span class="pre">==</span> <span class="pre">'daily</span></code>.</dd>
</dl>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="bundles">
<h3>Bundles<a class="headerlink" href="#bundles" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="zipline.data.bundles.register">
<code class="descclassname">zipline.data.bundles.</code><code class="descname">register</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#zipline.data.bundles.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a data bundle ingest function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The name of the bundle.</li>
<li><strong>f</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) &#8211; <p>The ingest function. This function will be passed:</p>
<dl class="docutils">
<dt>environ <span class="classifier-delimiter">:</span> <span class="classifier">mapping</span></dt>
<dd>The environment this is being run with.</dd>
<dt>asset_db_writer <span class="classifier-delimiter">:</span> <span class="classifier">AssetDBWriter</span></dt>
<dd>The asset db writer to write into.</dd>
<dt>minute_bar_writer <span class="classifier-delimiter">:</span> <span class="classifier">BcolzMinuteBarWriter</span></dt>
<dd>The minute bar writer to write into.</dd>
<dt>daily_bar_writer <span class="classifier-delimiter">:</span> <span class="classifier">BcolzDailyBarWriter</span></dt>
<dd>The daily bar writer to write into.</dd>
<dt>adjustment_writer <span class="classifier-delimiter">:</span> <span class="classifier">SQLiteAdjustmentWriter</span></dt>
<dd>The adjustment db writer to write into.</dd>
<dt>calendar <span class="classifier-delimiter">:</span> <span class="classifier">zipline.utils.calendars.TradingCalendar</span></dt>
<dd>The trading calendar to ingest for.</dd>
<dt>start_session <span class="classifier-delimiter">:</span> <span class="classifier">pd.Timestamp</span></dt>
<dd>The first session of data to ingest.</dd>
<dt>end_session <span class="classifier-delimiter">:</span> <span class="classifier">pd.Timestamp</span></dt>
<dd>The last session of data to ingest.</dd>
<dt>cache <span class="classifier-delimiter">:</span> <span class="classifier">DataFrameCache</span></dt>
<dd>A mapping object to temporarily store dataframes.
This should be used to cache intermediates in case the load
fails. This will be automatically cleaned up after a
successful load.</dd>
<dt>show_progress <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Show the progress for the current load where possible.</dd>
</dl>
</li>
<li><strong>calendar_name</strong> (<em>str, optional</em>) &#8211; The name of a calendar used to align bundle data.
Default is &#8216;NYSE&#8217;.</li>
<li><strong>start_session</strong> (<em>pd.Timestamp, optional</em>) &#8211; The first session for which we want data. If not provided,
or if the date lies outside the range supported by the
calendar, the first_session of the calendar is used.</li>
<li><strong>end_session</strong> (<em>pd.Timestamp, optional</em>) &#8211; The last session for which we want data. If not provided,
or if the date lies outside the range supported by the
calendar, the last_session of the calendar is used.</li>
<li><strong>minutes_per_day</strong> (<em>int, optional</em>) &#8211; The number of minutes in each normal trading day.</li>
<li><strong>create_writers</strong> (<em>bool, optional</em>) &#8211; Should the ingest machinery create the writers for the ingest
function. This can be disabled as an optimization for cases where
they are not needed, like the <code class="docutils literal"><span class="pre">quantopian-quandl</span></code> bundle.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This function my be used as a decorator, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@register</span><span class="p">(</span><span class="s">&#39;quandl&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">quandl_ingest_function</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.data.bundles.bundles" title="zipline.data.bundles.bundles"><code class="xref py py-func docutils literal"><span class="pre">zipline.data.bundles.bundles()</span></code></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="zipline.data.bundles.ingest">
<code class="descclassname">zipline.data.bundles.</code><code class="descname">ingest</code><span class="sig-paren">(</span><em>name</em>, <em>environ=os.environ</em>, <em>date=None</em>, <em>show_progress=True</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.data.bundles.ingest" title="Permalink to this definition">¶</a></dt>
<dd><p>Ingest data for a given bundle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The name of the bundle.</li>
<li><strong>environ</strong> (<em>mapping, optional</em>) &#8211; The environment variables. By default this is os.environ.</li>
<li><strong>timestamp</strong> (<em>datetime, optional</em>) &#8211; The timestamp to use for the load.
By default this is the current time.</li>
<li><strong>assets_versions</strong> (<em>Iterable[int], optional</em>) &#8211; Versions of the assets db to which to downgrade.</li>
<li><strong>show_progress</strong> (<em>bool, optional</em>) &#8211; Tell the ingest function to display the progress where possible.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.data.bundles.load">
<code class="descclassname">zipline.data.bundles.</code><code class="descname">load</code><span class="sig-paren">(</span><em>name</em>, <em>environ=os.environ</em>, <em>date=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.data.bundles.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a previously ingested bundle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The name of the bundle.</li>
<li><strong>environ</strong> (<em>mapping, optional</em>) &#8211; The environment variables. Defaults of os.environ.</li>
<li><strong>timestamp</strong> (<em>datetime, optional</em>) &#8211; The timestamp of the data to lookup.
Defaults to the current time.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>bundle_data</strong> &#8211;
The raw data readers for this bundle.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">BundleData</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.data.bundles.unregister">
<code class="descclassname">zipline.data.bundles.</code><code class="descname">unregister</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.data.bundles.unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregister a bundle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The name of the bundle to unregister.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal"><span class="pre">UnknownBundle</span></code> &#8211;
Raised when no bundle has been registered with the given name.</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#zipline.data.bundles.bundles" title="zipline.data.bundles.bundles"><code class="xref py py-func docutils literal"><span class="pre">zipline.data.bundles.bundles()</span></code></a></p>
</div>
</dd></dl>

<dl class="data">
<dt id="zipline.data.bundles.bundles">
<code class="descclassname">zipline.data.bundles.</code><code class="descname">bundles</code><a class="headerlink" href="#zipline.data.bundles.bundles" title="Permalink to this definition">¶</a></dt>
<dd><p>The bundles that have been registered as a mapping from bundle name to bundle
data. This mapping is immutable and may only be updated through
<a class="reference internal" href="#zipline.data.bundles.register" title="zipline.data.bundles.register"><code class="xref py py-func docutils literal"><span class="pre">register()</span></code></a> or
<a class="reference internal" href="#zipline.data.bundles.unregister" title="zipline.data.bundles.unregister"><code class="xref py py-func docutils literal"><span class="pre">unregister()</span></code></a>.</p>
</dd></dl>

</div>
</div>
<div class="section" id="risk-metrics">
<h2>Risk Metrics<a class="headerlink" href="#risk-metrics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="algorithm-state">
<h3>Algorithm State<a class="headerlink" href="#algorithm-state" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="zipline.finance.ledger.Ledger">
<em class="property">class </em><code class="descclassname">zipline.finance.ledger.</code><code class="descname">Ledger</code><span class="sig-paren">(</span><em>trading_sessions</em>, <em>capital_base</em>, <em>data_frequency</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger" title="Permalink to this definition">¶</a></dt>
<dd><p>The ledger tracks all orders and transactions as well as the current
state of the portfolio and positions.</p>
<dl class="attribute">
<dt id="Ledger.portfolio">
<code class="descname">portfolio</code><a class="headerlink" href="#Ledger.portfolio" title="Permalink to this definition">¶</a></dt>
<dd><p><em>zipline.protocol.Portfolio</em></p>
<p>The updated portfolio being managed.</p>
</dd></dl>

<dl class="attribute">
<dt id="Ledger.account">
<code class="descname">account</code><a class="headerlink" href="#Ledger.account" title="Permalink to this definition">¶</a></dt>
<dd><p><em>zipline.protocol.Account</em></p>
<p>The updated account being managed.</p>
</dd></dl>

<dl class="attribute">
<dt id="Ledger.position_tracker">
<code class="descname">position_tracker</code><a class="headerlink" href="#Ledger.position_tracker" title="Permalink to this definition">¶</a></dt>
<dd><p><em>PositionTracker</em></p>
<p>The current set of positions.</p>
</dd></dl>

<dl class="attribute">
<dt id="Ledger.todays_returns">
<code class="descname">todays_returns</code><a class="headerlink" href="#Ledger.todays_returns" title="Permalink to this definition">¶</a></dt>
<dd><p><em>float</em></p>
<p>The current day&#8217;s returns. In minute emission mode, this is the partial
day&#8217;s returns. In daily emission mode, this is
<code class="docutils literal"><span class="pre">daily_returns[session]</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="Ledger.daily_returns_series">
<code class="descname">daily_returns_series</code><a class="headerlink" href="#Ledger.daily_returns_series" title="Permalink to this definition">¶</a></dt>
<dd><p><em>pd.Series</em></p>
<p>The daily returns series. Days that have not yet finished will hold
a value of <code class="docutils literal"><span class="pre">np.nan</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="Ledger.daily_returns_array">
<code class="descname">daily_returns_array</code><a class="headerlink" href="#Ledger.daily_returns_array" title="Permalink to this definition">¶</a></dt>
<dd><p><em>np.ndarray</em></p>
<p>The daily returns as an ndarray. Days that have not yet finished will
hold a value of <code class="docutils literal"><span class="pre">np.nan</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.finance.ledger.Ledger.orders">
<code class="descname">orders</code><span class="sig-paren">(</span><em>dt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.orders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the dict-form of all of the orders in a given bar or for
the whole simulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dt</strong> (<em>pd.Timestamp or None, optional</em>) &#8211; The particular datetime to look up order for. If not passed, or
None is explicitly passed, all of the orders will be returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>orders</strong> &#8211;
The order information.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list[dict]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.finance.ledger.Ledger.override_account_fields">
<code class="descname">override_account_fields</code><span class="sig-paren">(</span><em>settled_cash=sentinel('not_overridden')</em>, <em>accrued_interest=sentinel('not_overridden')</em>, <em>buying_power=sentinel('not_overridden')</em>, <em>equity_with_loan=sentinel('not_overridden')</em>, <em>total_positions_value=sentinel('not_overridden')</em>, <em>total_positions_exposure=sentinel('not_overridden')</em>, <em>regt_equity=sentinel('not_overridden')</em>, <em>regt_margin=sentinel('not_overridden')</em>, <em>initial_margin_requirement=sentinel('not_overridden')</em>, <em>maintenance_margin_requirement=sentinel('not_overridden')</em>, <em>available_funds=sentinel('not_overridden')</em>, <em>excess_liquidity=sentinel('not_overridden')</em>, <em>cushion=sentinel('not_overridden')</em>, <em>day_trades_remaining=sentinel('not_overridden')</em>, <em>leverage=sentinel('not_overridden')</em>, <em>net_leverage=sentinel('not_overridden')</em>, <em>net_liquidation=sentinel('not_overridden')</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.override_account_fields"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.override_account_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Override fields on <code class="docutils literal"><span class="pre">self.account</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="zipline.finance.ledger.Ledger.portfolio">
<code class="descname">portfolio</code><a class="headerlink" href="#zipline.finance.ledger.Ledger.portfolio" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the current portfolio.</p>
<p class="rubric">Notes</p>
<p>This is cached, repeated access will not recompute the portfolio until
the portfolio may have changed.</p>
</dd></dl>

<dl class="method">
<dt id="zipline.finance.ledger.Ledger.process_commission">
<code class="descname">process_commission</code><span class="sig-paren">(</span><em>commission</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.process_commission"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.process_commission" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the commission.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>commission</strong> (<em>zp.Event</em>) &#8211; The commission being paid.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.finance.ledger.Ledger.process_dividends">
<code class="descname">process_dividends</code><span class="sig-paren">(</span><em>next_session</em>, <em>asset_finder</em>, <em>adjustment_reader</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.process_dividends"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.process_dividends" title="Permalink to this definition">¶</a></dt>
<dd><p>Process dividends for the next session.</p>
<p>This will earn us any dividends whose ex-date is the next session as
well as paying out any dividends whose pay-date is the next session</p>
</dd></dl>

<dl class="method">
<dt id="zipline.finance.ledger.Ledger.process_order">
<code class="descname">process_order</code><span class="sig-paren">(</span><em>order</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.process_order"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.process_order" title="Permalink to this definition">¶</a></dt>
<dd><p>Keep track of an order that was placed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>order</strong> (<em>zp.Order</em>) &#8211; The order to record.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.finance.ledger.Ledger.process_splits">
<code class="descname">process_splits</code><span class="sig-paren">(</span><em>splits</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.process_splits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.process_splits" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes a list of splits by modifying any positions as needed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>splits</strong> (<em>list[(Asset, float)]</em>) &#8211; A list of splits. Each split is a tuple of (asset, ratio).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.finance.ledger.Ledger.process_transaction">
<code class="descname">process_transaction</code><span class="sig-paren">(</span><em>transaction</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.process_transaction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.process_transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a transaction to ledger, updating the current state as needed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>transaction</strong> (<em>zp.Transaction</em>) &#8211; The transaction to execute.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.finance.ledger.Ledger.transactions">
<code class="descname">transactions</code><span class="sig-paren">(</span><em>dt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.transactions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.transactions" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the dict-form of all of the transactions in a given bar or
for the whole simulation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dt</strong> (<em>pd.Timestamp or None, optional</em>) &#8211; The particular datetime to look up transactions for. If not passed,
or None is explicitly passed, all of the transactions will be
returned.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>transactions</strong> &#8211;
The transaction information.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">list[dict]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.finance.ledger.Ledger.update_portfolio">
<code class="descname">update_portfolio</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#Ledger.update_portfolio"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.ledger.Ledger.update_portfolio" title="Permalink to this definition">¶</a></dt>
<dd><p>Force a computation of the current portfolio state.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.protocol.Portfolio">
<em class="property">class </em><code class="descclassname">zipline.protocol.</code><code class="descname">Portfolio</code><span class="sig-paren">(</span><em>start_date=None</em>, <em>capital_base=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/protocol.html#Portfolio"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.protocol.Portfolio" title="Permalink to this definition">¶</a></dt>
<dd><p>The portfolio at a given time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start_date</strong> (<em>pd.Timestamp</em>) &#8211; The start date for the period being recorded.</li>
<li><strong>capital_base</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) &#8211; The starting value for the portfolio. This will be used as the starting
cash, current cash, and portfolio value.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="zipline.protocol.Portfolio.current_portfolio_weights">
<code class="descname">current_portfolio_weights</code><a class="headerlink" href="#zipline.protocol.Portfolio.current_portfolio_weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute each asset&#8217;s weight in the portfolio by calculating its held
value divided by the total value of all positions.</p>
<p>Each equity&#8217;s value is its price times the number of shares held. Each
futures contract&#8217;s value is its unit price times number of shares held
times the multiplier.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.protocol.Account">
<em class="property">class </em><code class="descclassname">zipline.protocol.</code><code class="descname">Account</code><a class="reference internal" href="_modules/zipline/protocol.html#Account"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.protocol.Account" title="Permalink to this definition">¶</a></dt>
<dd><p>The account object tracks information about the trading account. The
values are updated as the algorithm runs and its keys remain unchanged.
If connected to a broker, one can update these values with the trading
account values as reported by the broker.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.ledger.PositionTracker">
<em class="property">class </em><code class="descclassname">zipline.finance.ledger.</code><code class="descname">PositionTracker</code><span class="sig-paren">(</span><em>data_frequency</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#PositionTracker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.ledger.PositionTracker" title="Permalink to this definition">¶</a></dt>
<dd><p>The current state of the positions held.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>data_frequency</strong> (<em>{'daily', 'minute'}</em>) &#8211; The data frequency of the simulation.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="zipline.finance.ledger.PositionTracker.earn_dividends">
<code class="descname">earn_dividends</code><span class="sig-paren">(</span><em>cash_dividends</em>, <em>stock_dividends</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#PositionTracker.earn_dividends"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.ledger.PositionTracker.earn_dividends" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of dividends whose ex_dates are all the next trading
day, calculate and store the cash and/or stock payments to be paid on
each dividend&#8217;s pay date.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cash_dividends</strong> (<em>iterable of (asset, amount, pay_date) namedtuples</em>) &#8211; </li>
<li><strong>stock_dividends</strong> (<em>iterable of (asset, payment_asset, ratio, pay_date)</em>) &#8211; namedtuples.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.finance.ledger.PositionTracker.handle_splits">
<code class="descname">handle_splits</code><span class="sig-paren">(</span><em>splits</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#PositionTracker.handle_splits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.ledger.PositionTracker.handle_splits" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes a list of splits by modifying any positions as needed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>splits</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a>) &#8211; A list of splits.  Each split is a tuple of (asset, ratio).</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>int</strong> &#8211;
position.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">The leftover cash from fractional shares after modifying each</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="zipline.finance.ledger.PositionTracker.pay_dividends">
<code class="descname">pay_dividends</code><span class="sig-paren">(</span><em>next_trading_day</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/ledger.html#PositionTracker.pay_dividends"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.ledger.PositionTracker.pay_dividends" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a cash payment based on the dividends that should be paid out
according to the accumulated bookkeeping of earned, unpaid, and stock
dividends.</p>
</dd></dl>

<dl class="attribute">
<dt id="zipline.finance.ledger.PositionTracker.stats">
<code class="descname">stats</code><a class="headerlink" href="#zipline.finance.ledger.PositionTracker.stats" title="Permalink to this definition">¶</a></dt>
<dd><p>The current status of the positions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>stats</strong> &#8211;
The current stats position stats.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#zipline.finance._finance_ext.PositionStats" title="zipline.finance._finance_ext.PositionStats">PositionStats</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This is cached, repeated access will not recompute the stats until
the stats may have changed.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="zipline.finance._finance_ext.PositionStats">
<em class="property">class </em><code class="descclassname">zipline.finance._finance_ext.</code><code class="descname">PositionStats</code><a class="headerlink" href="#zipline.finance._finance_ext.PositionStats" title="Permalink to this definition">¶</a></dt>
<dd><p>Computed values from the current positions.</p>
<dl class="attribute">
<dt id="PositionStats.gross_exposure">
<code class="descname">gross_exposure</code><a class="headerlink" href="#PositionStats.gross_exposure" title="Permalink to this definition">¶</a></dt>
<dd><p><em>float64</em></p>
<p>The gross position exposure.</p>
</dd></dl>

<dl class="attribute">
<dt id="PositionStats.gross_value">
<code class="descname">gross_value</code><a class="headerlink" href="#PositionStats.gross_value" title="Permalink to this definition">¶</a></dt>
<dd><p><em>float64</em></p>
<p>The gross position value.</p>
</dd></dl>

<dl class="attribute">
<dt id="PositionStats.long_exposure">
<code class="descname">long_exposure</code><a class="headerlink" href="#PositionStats.long_exposure" title="Permalink to this definition">¶</a></dt>
<dd><p><em>float64</em></p>
<p>The exposure of just the long positions.</p>
</dd></dl>

<dl class="attribute">
<dt id="PositionStats.long_value">
<code class="descname">long_value</code><a class="headerlink" href="#PositionStats.long_value" title="Permalink to this definition">¶</a></dt>
<dd><p><em>float64</em></p>
<p>The value of just the long positions.</p>
</dd></dl>

<dl class="attribute">
<dt id="PositionStats.net_exposure">
<code class="descname">net_exposure</code><a class="headerlink" href="#PositionStats.net_exposure" title="Permalink to this definition">¶</a></dt>
<dd><p><em>float64</em></p>
<p>The net position exposure.</p>
</dd></dl>

<dl class="attribute">
<dt id="PositionStats.net_value">
<code class="descname">net_value</code><a class="headerlink" href="#PositionStats.net_value" title="Permalink to this definition">¶</a></dt>
<dd><p><em>float64</em></p>
<p>The net position value.</p>
</dd></dl>

<dl class="attribute">
<dt id="PositionStats.short_exposure">
<code class="descname">short_exposure</code><a class="headerlink" href="#PositionStats.short_exposure" title="Permalink to this definition">¶</a></dt>
<dd><p><em>float64</em></p>
<p>The exposure of just the short positions.</p>
</dd></dl>

<dl class="attribute">
<dt id="PositionStats.short_value">
<code class="descname">short_value</code><a class="headerlink" href="#PositionStats.short_value" title="Permalink to this definition">¶</a></dt>
<dd><p><em>float64</em></p>
<p>The value of just the short positions.</p>
</dd></dl>

<dl class="attribute">
<dt id="PositionStats.longs_count">
<code class="descname">longs_count</code><a class="headerlink" href="#PositionStats.longs_count" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int64</em></p>
<p>The number of long positions.</p>
</dd></dl>

<dl class="attribute">
<dt id="PositionStats.shorts_count">
<code class="descname">shorts_count</code><a class="headerlink" href="#PositionStats.shorts_count" title="Permalink to this definition">¶</a></dt>
<dd><p><em>int64</em></p>
<p>The number of short positions.</p>
</dd></dl>

<dl class="attribute">
<dt id="PositionStats.position_exposure_array">
<code class="descname">position_exposure_array</code><a class="headerlink" href="#PositionStats.position_exposure_array" title="Permalink to this definition">¶</a></dt>
<dd><p><em>np.ndarray[float64]</em></p>
<p>The exposure of each position in the same order as
<code class="docutils literal"><span class="pre">position_tracker.positions</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="PositionStats.position_exposure_series">
<code class="descname">position_exposure_series</code><a class="headerlink" href="#PositionStats.position_exposure_series" title="Permalink to this definition">¶</a></dt>
<dd><p><em>pd.Series[float64]</em></p>
<p>The exposure of each position in the same order as
<code class="docutils literal"><span class="pre">position_tracker.positions</span></code>. The index is the numeric sid of each
asset.</p>
</dd></dl>

<p class="rubric">Notes</p>
<p><code class="docutils literal"><span class="pre">position_exposure_array</span></code> and <code class="docutils literal"><span class="pre">position_exposure_series</span></code> share the same
underlying memory. The array interface should be preferred if you are doing
access each minute for better performance.</p>
<p><code class="docutils literal"><span class="pre">position_exposure_array</span></code> and <code class="docutils literal"><span class="pre">position_exposure_series</span></code> may be mutated
when the position tracker next updates the stats. Do not rely on these
objects being preserved across accesses to <code class="docutils literal"><span class="pre">stats</span></code>. If you need to freeze
the values, you must take a copy.</p>
</dd></dl>

</div>
<div class="section" id="built-in-metrics">
<h3>Built-in Metrics<a class="headerlink" href="#built-in-metrics" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="zipline.finance.metrics.metric.SimpleLedgerField">
<em class="property">class </em><code class="descclassname">zipline.finance.metrics.metric.</code><code class="descname">SimpleLedgerField</code><span class="sig-paren">(</span><em>ledger_field</em>, <em>packet_field=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#SimpleLedgerField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.metrics.metric.SimpleLedgerField" title="Permalink to this definition">¶</a></dt>
<dd><p>Emit the current value of a ledger field every bar or every session.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ledger_field</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The ledger field to read.</li>
<li><strong>packet_field</strong> (<em>str, optional</em>) &#8211; The name of the field to populate in the packet. If not provided,
<code class="docutils literal"><span class="pre">ledger_field</span></code> will be used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.metrics.metric.DailyLedgerField">
<em class="property">class </em><code class="descclassname">zipline.finance.metrics.metric.</code><code class="descname">DailyLedgerField</code><span class="sig-paren">(</span><em>ledger_field</em>, <em>packet_field=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#DailyLedgerField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.metrics.metric.DailyLedgerField" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#zipline.finance.metrics.metric.SimpleLedgerField" title="zipline.finance.metrics.metric.SimpleLedgerField"><code class="xref py py-class docutils literal"><span class="pre">SimpleLedgerField</span></code></a> but
also puts the current value in the <code class="docutils literal"><span class="pre">cumulative_perf</span></code> section.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ledger_field</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The ledger field to read.</li>
<li><strong>packet_field</strong> (<em>str, optional</em>) &#8211; The name of the field to populate in the packet. If not provided,
<code class="docutils literal"><span class="pre">ledger_field</span></code> will be used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.metrics.metric.StartOfPeriodLedgerField">
<em class="property">class </em><code class="descclassname">zipline.finance.metrics.metric.</code><code class="descname">StartOfPeriodLedgerField</code><span class="sig-paren">(</span><em>ledger_field</em>, <em>packet_field=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#StartOfPeriodLedgerField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.metrics.metric.StartOfPeriodLedgerField" title="Permalink to this definition">¶</a></dt>
<dd><p>Keep track of the value of a ledger field at the start of the period.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ledger_field</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The ledger field to read.</li>
<li><strong>packet_field</strong> (<em>str, optional</em>) &#8211; The name of the field to populate in the packet. If not provided,
<code class="docutils literal"><span class="pre">ledger_field</span></code> will be used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">zipline.finance.metrics.metric.</code><code class="descname">StartOfPeriodLedgerField</code><span class="sig-paren">(</span><em>ledger_field</em>, <em>packet_field=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#StartOfPeriodLedgerField"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Keep track of the value of a ledger field at the start of the period.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>ledger_field</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The ledger field to read.</li>
<li><strong>packet_field</strong> (<em>str, optional</em>) &#8211; The name of the field to populate in the packet. If not provided,
<code class="docutils literal"><span class="pre">ledger_field</span></code> will be used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.metrics.metric.Returns">
<em class="property">class </em><code class="descclassname">zipline.finance.metrics.metric.</code><code class="descname">Returns</code><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#Returns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.metrics.metric.Returns" title="Permalink to this definition">¶</a></dt>
<dd><p>Tracks the daily and cumulative returns of the algorithm.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.metrics.metric.BenchmarkReturnsAndVolatility">
<em class="property">class </em><code class="descclassname">zipline.finance.metrics.metric.</code><code class="descname">BenchmarkReturnsAndVolatility</code><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#BenchmarkReturnsAndVolatility"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.metrics.metric.BenchmarkReturnsAndVolatility" title="Permalink to this definition">¶</a></dt>
<dd><p>Tracks daily and cumulative returns for the benchmark as well as the
volatility of the benchmark returns.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.metrics.metric.CashFlow">
<em class="property">class </em><code class="descclassname">zipline.finance.metrics.metric.</code><code class="descname">CashFlow</code><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#CashFlow"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.metrics.metric.CashFlow" title="Permalink to this definition">¶</a></dt>
<dd><p>Tracks daily and cumulative cash flow.</p>
<p class="rubric">Notes</p>
<p>For historical reasons, this field is named &#8216;capital_used&#8217; in the packets.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.metrics.metric.Orders">
<em class="property">class </em><code class="descclassname">zipline.finance.metrics.metric.</code><code class="descname">Orders</code><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#Orders"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.metrics.metric.Orders" title="Permalink to this definition">¶</a></dt>
<dd><p>Tracks daily orders.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.metrics.metric.Transactions">
<em class="property">class </em><code class="descclassname">zipline.finance.metrics.metric.</code><code class="descname">Transactions</code><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#Transactions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.metrics.metric.Transactions" title="Permalink to this definition">¶</a></dt>
<dd><p>Tracks daily transactions.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.metrics.metric.Positions">
<em class="property">class </em><code class="descclassname">zipline.finance.metrics.metric.</code><code class="descname">Positions</code><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#Positions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.metrics.metric.Positions" title="Permalink to this definition">¶</a></dt>
<dd><p>Tracks daily positions.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.metrics.metric.ReturnsStatistic">
<em class="property">class </em><code class="descclassname">zipline.finance.metrics.metric.</code><code class="descname">ReturnsStatistic</code><span class="sig-paren">(</span><em>function</em>, <em>field_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#ReturnsStatistic"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.metrics.metric.ReturnsStatistic" title="Permalink to this definition">¶</a></dt>
<dd><p>A metric that reports an end of simulation scalar or time series
computed from the algorithm returns.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>function</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) &#8211; The function to call on the daily returns.</li>
<li><strong>field_name</strong> (<em>str, optional</em>) &#8211; The name of the field. If not provided, it will be
<code class="docutils literal"><span class="pre">function.__name__</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.metrics.metric.AlphaBeta">
<em class="property">class </em><code class="descclassname">zipline.finance.metrics.metric.</code><code class="descname">AlphaBeta</code><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#AlphaBeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.metrics.metric.AlphaBeta" title="Permalink to this definition">¶</a></dt>
<dd><p>End of simulation alpha and beta to the benchmark.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.finance.metrics.metric.MaxLeverage">
<em class="property">class </em><code class="descclassname">zipline.finance.metrics.metric.</code><code class="descname">MaxLeverage</code><a class="reference internal" href="_modules/zipline/finance/metrics/metric.html#MaxLeverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.finance.metrics.metric.MaxLeverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Tracks the maximum account leverage.</p>
</dd></dl>

</div>
<div class="section" id="metrics-sets">
<h3>Metrics Sets<a class="headerlink" href="#metrics-sets" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="zipline.finance.metrics.register">
<code class="descclassname">zipline.finance.metrics.</code><code class="descname">register</code><span class="sig-paren">(</span><em>name</em>, <em>function=None</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.finance.metrics.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a new metrics set.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The name of the metrics set</li>
<li><strong>function</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) &#8211; The callable which produces the metrics set.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This may be used as a decorator if only <code class="docutils literal"><span class="pre">name</span></code> is passed.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal"><span class="pre">zipline.finance.metrics.get_metrics_set()</span></code>, <code class="xref py py-func docutils literal"><span class="pre">zipline.finance.metrics.unregister_metrics_set()</span></code></p>
</div>
</dd></dl>

<dl class="function">
<dt id="zipline.finance.metrics.load">
<code class="descclassname">zipline.finance.metrics.</code><code class="descname">load</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.finance.metrics.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance of the metrics set registered with the given name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>metrics</strong> &#8211;
A new instance of the metrics set.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">set[Metric]</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/dev/library/exceptions.html#ValueError" title="(in Python v3.8)"><code class="xref py py-exc docutils literal"><span class="pre">ValueError</span></code></a> &#8211;
Raised when no metrics set is registered to <code class="docutils literal"><span class="pre">name</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="zipline.finance.metrics.unregister">
<code class="descclassname">zipline.finance.metrics.</code><code class="descname">unregister</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#zipline.finance.metrics.unregister" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregister an existing metrics set.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The name of the metrics set</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal"><span class="pre">zipline.finance.metrics.register_metrics_set()</span></code></p>
</div>
</dd></dl>

<dl class="data">
<dt id="zipline.data.finance.metrics.metrics_sets">
<code class="descclassname">zipline.data.finance.metrics.</code><code class="descname">metrics_sets</code><a class="headerlink" href="#zipline.data.finance.metrics.metrics_sets" title="Permalink to this definition">¶</a></dt>
<dd><p>The metrics sets that have been registered as a mapping from metrics set name
to load function. This mapping is immutable and may only be updated through
<a class="reference internal" href="#zipline.finance.metrics.register" title="zipline.finance.metrics.register"><code class="xref py py-func docutils literal"><span class="pre">register()</span></code></a> or
<a class="reference internal" href="#zipline.finance.metrics.unregister" title="zipline.finance.metrics.unregister"><code class="xref py py-func docutils literal"><span class="pre">unregister()</span></code></a>.</p>
</dd></dl>

</div>
</div>
<div class="section" id="utilities">
<h2>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h2>
<div class="section" id="caching">
<h3>Caching<a class="headerlink" href="#caching" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="zipline.utils.cache.CachedObject">
<em class="property">class </em><code class="descclassname">zipline.utils.cache.</code><code class="descname">CachedObject</code><span class="sig-paren">(</span><em>value</em>, <em>expires</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/cache.html#CachedObject"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.cache.CachedObject" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple struct for maintaining a cached object with an expiration date.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>value</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#object" title="(in Python v3.8)"><em>object</em></a>) &#8211; The object to cache.</li>
<li><strong>expires</strong> (<em>datetime-like</em>) &#8211; Expiration date of <cite>value</cite>. The cache is considered invalid for dates
<strong>strictly greater</strong> than <cite>expires</cite>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">Timestamp</span><span class="p">,</span> <span class="n">Timedelta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expires</span> <span class="o">=</span> <span class="n">Timestamp</span><span class="p">(</span><span class="s">&#39;2014&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s">&#39;UTC&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span> <span class="o">=</span> <span class="n">CachedObject</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">expires</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">unwrap</span><span class="p">(</span><span class="n">expires</span> <span class="o">-</span> <span class="n">Timedelta</span><span class="p">(</span><span class="s">&#39;1 minute&#39;</span><span class="p">))</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">unwrap</span><span class="p">(</span><span class="n">expires</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">obj</span><span class="o">.</span><span class="n">unwrap</span><span class="p">(</span><span class="n">expires</span> <span class="o">+</span> <span class="n">Timedelta</span><span class="p">(</span><span class="s">&#39;1 minute&#39;</span><span class="p">))</span>
<span class="gp">... </span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">Expired</span>: <span class="n">2014-01-01 00:00:00+00:00</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="zipline.utils.cache.ExpiringCache">
<em class="property">class </em><code class="descclassname">zipline.utils.cache.</code><code class="descname">ExpiringCache</code><span class="sig-paren">(</span><em>cache=None</em>, <em>cleanup=&lt;function ExpiringCache.&lt;lambda&gt;&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/cache.html#ExpiringCache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.cache.ExpiringCache" title="Permalink to this definition">¶</a></dt>
<dd><p>A cache of multiple CachedObjects, which returns the wrapped the value
or raises and deletes the CachedObject if the value has expired.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cache</strong> (<em>dict-like, optional</em>) &#8211; An instance of a dict-like object which needs to support at least:
<cite>__del__</cite>, <cite>__getitem__</cite>, <cite>__setitem__</cite>
If <cite>None</cite>, than a dict is used as a default.</li>
<li><strong>cleanup</strong> (<em>callable, optional</em>) &#8211; A method that takes a single argument, a cached object, and is called
upon expiry of the cached object, prior to deleting the object. If not
provided, defaults to a no-op.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">Timestamp</span><span class="p">,</span> <span class="n">Timedelta</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expires</span> <span class="o">=</span> <span class="n">Timestamp</span><span class="p">(</span><span class="s">&#39;2014&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s">&#39;UTC&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span> <span class="o">=</span> <span class="n">ExpiringCache</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">expires</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">expires</span> <span class="o">-</span> <span class="n">Timedelta</span><span class="p">(</span><span class="s">&#39;1 minute&#39;</span><span class="p">))</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="n">expires</span> <span class="o">+</span> <span class="n">Timedelta</span><span class="p">(</span><span class="s">&#39;1 minute&#39;</span><span class="p">))</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">KeyError</span>: <span class="n">&#39;foo&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="zipline.utils.cache.dataframe_cache">
<em class="property">class </em><code class="descclassname">zipline.utils.cache.</code><code class="descname">dataframe_cache</code><span class="sig-paren">(</span><em>path=None</em>, <em>lock=None</em>, <em>clean_on_failure=True</em>, <em>serialization='msgpack'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/cache.html#dataframe_cache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.cache.dataframe_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>A disk-backed cache for dataframes.</p>
<p><code class="docutils literal"><span class="pre">dataframe_cache</span></code> is a mutable mapping from string names to pandas
DataFrame objects.
This object may be used as a context manager to delete the cache directory
on exit.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> (<em>str, optional</em>) &#8211; The directory path to the cache. Files will be written as
<code class="docutils literal"><span class="pre">path/&lt;keyname&gt;</span></code>.</li>
<li><strong>lock</strong> (<em>Lock, optional</em>) &#8211; Thread lock for multithreaded/multiprocessed access to the cache.
If not provided no locking will be used.</li>
<li><strong>clean_on_failure</strong> (<em>bool, optional</em>) &#8211; Should the directory be cleaned up if an exception is raised in the
context manager.</li>
<li><strong>serialize</strong> (<em>{'msgpack', 'pickle:&lt;n&gt;'}, optional</em>) &#8211; How should the data be serialized. If <code class="docutils literal"><span class="pre">'pickle'</span></code> is passed, an
optional pickle protocol can be passed like: <code class="docutils literal"><span class="pre">'pickle:3'</span></code> which says
to use pickle protocol 3.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The syntax <code class="docutils literal"><span class="pre">cache[:]</span></code> will load all key:value pairs into memory as a
dictionary.
The cache uses a temporary file format that is subject to change between
versions of zipline.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.utils.cache.working_file">
<em class="property">class </em><code class="descclassname">zipline.utils.cache.</code><code class="descname">working_file</code><span class="sig-paren">(</span><em>final_path</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/cache.html#working_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.cache.working_file" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager for managing a temporary file that will be moved
to a non-temporary location if no exceptions are raised in the context.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>final_path</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The location to move the file when committing.</li>
<li><strong>**kwargs</strong> (<em>*args,</em>) &#8211; <p>Forwarded to NamedTemporaryFile.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The file is moved on __exit__ if there are no exceptions.
<code class="docutils literal"><span class="pre">working_file</span></code> uses <a class="reference external" href="http://docs.python.org/dev/library/shutil.html#shutil.move" title="(in Python v3.8)"><code class="xref py py-func docutils literal"><span class="pre">shutil.move()</span></code></a> to move the actual files,
meaning it has as strong of guarantees as <a class="reference external" href="http://docs.python.org/dev/library/shutil.html#shutil.move" title="(in Python v3.8)"><code class="xref py py-func docutils literal"><span class="pre">shutil.move()</span></code></a>.</p>
</dd></dl>

<dl class="class">
<dt id="zipline.utils.cache.working_dir">
<em class="property">class </em><code class="descclassname">zipline.utils.cache.</code><code class="descname">working_dir</code><span class="sig-paren">(</span><em>final_path</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/cache.html#working_dir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.cache.working_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager for managing a temporary directory that will be moved
to a non-temporary location if no exceptions are raised in the context.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>final_path</strong> (<a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) &#8211; The location to move the file when committing.</li>
<li><strong>**kwargs</strong> (<em>*args,</em>) &#8211; <p>Forwarded to tmp_dir.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The file is moved on __exit__ if there are no exceptions.
<code class="docutils literal"><span class="pre">working_dir</span></code> uses <code class="xref py py-func docutils literal"><span class="pre">dir_util.copy_tree()</span></code> to move the actual files,
meaning it has as strong of guarantees as <code class="xref py py-func docutils literal"><span class="pre">dir_util.copy_tree()</span></code>.</p>
</dd></dl>

</div>
<div class="section" id="command-line">
<h3>Command Line<a class="headerlink" href="#command-line" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="zipline.utils.cli.maybe_show_progress">
<code class="descclassname">zipline.utils.cli.</code><code class="descname">maybe_show_progress</code><span class="sig-paren">(</span><em>it</em>, <em>show_progress</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/zipline/utils/cli.html#maybe_show_progress"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#zipline.utils.cli.maybe_show_progress" title="Permalink to this definition">¶</a></dt>
<dd><p>Optionally show a progress bar for the given iterator.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>it</strong> (<em>iterable</em>) &#8211; The underlying iterator.</li>
<li><strong>show_progress</strong> (<a class="reference external" href="http://docs.python.org/dev/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) &#8211; Should progress be shown.</li>
<li><strong>**kwargs</strong> &#8211; <p>Forwarded to the click progress bar.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>itercontext</strong> &#8211;
A context manager whose enter is the actual iterator to use.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">context manager</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">with</span> <span class="n">maybe_show_progress</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="bp">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">ns</span><span class="p">:</span>
     <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">ns</span><span class="p">:</span>
         <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release-process.html" class="btn btn-neutral float-right" title="Release Process" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="development-guidelines.html" class="btn btn-neutral" title="Development Guidelines" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Quantopian Inc..
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>